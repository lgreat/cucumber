<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2" xmlns="http://www.w3c.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
          xmlns:spring="http://www.springframework.org/tags" xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml">
    <c:if test="not empty requestScope.city">
    <div id="cityStats" class="statsModule">
            <div style="float: right; width: 20%">Pop. <fmt:formatNumber value="${requestScope.city.population}"
                                                                         maxFractionDigits="0"/></div>

            <h1>What's it like to live in ${requestScope.city.name}?</h1>
            <table>
                <thead>
                    <tr>
                        <th width="50%"></th>
                        <th width="25%">${requestScope.city.name}</th>
                        <th width="25%">${requestScope.statewide.name}</th>
                        <th width="25%">U.S.</th></tr>
                </thead>
                <tr>
                    <th>
                        Avg. household income
                    </th>
                    <td class="${requestScope.city.householdMedianIncome gt requestScope.statewide.householdMedianIncome ? 'better' : 'worse'}">
                        $<fmt:formatNumber value="${requestScope.city.householdMedianIncome}" maxFractionDigits="0"/>
                    </td>
                    <td>
                        $<fmt:formatNumber value="${requestScope.statewide.householdMedianIncome}"
                                           maxFractionDigits="0"/>
                    </td>
                    <td>
                        $<fmt:formatNumber value="${requestScope.us.householdMedianIncome}" maxFractionDigits="0"/>
                    </td>
                </tr>
                <tr>
                    <th>
                        Cost of living
                    </th>
                    <td class="${requestScope.city.costOfLiving lt requestScope.us.costOfLiving ? 'better' : 'worse'}">
                        ${requestScope.city.costOfLiving}%
                    </td>
                    <td>
                        ${requestScope.statewide.costOfLiving}%
                    </td>
                    <td>
                        100%
                    </td>
                </tr>
                <tr>
                    <th>
                        Unemployment
                    </th>
                    <td class="${requestScope.city.unemploymentRate lt requestScope.us.unemploymentRate-.01 ? 'better' : requestScope.city.unemploymentRate gt requestScope.us.unemploymentRate+.01 ? 'worse' : ''}">

                        <fmt:formatNumber value="${requestScope.city.unemploymentRate * 100}" maxFractionDigits="0"/>%
                    </td>
                    <td>
                        <fmt:formatNumber value="${requestScope.statewide.unemploymentRate * 100}"
                                          maxFractionDigits="0"/>%
                    </td>
                    <td>
                        <fmt:formatNumber value="${requestScope.us.unemploymentRate * 100}" maxFractionDigits="0"/>%
                    </td>
                </tr>
                <tr>
                    <th>
                        Violent Crime
                    </th>
                    <td class="${requestScope.city.crimeViolent lt requestScope.us.crimeViolent -1 ? 'better' : requestScope.city.crimeViolent gt requestScope.us.crimeViolent + 1 ? 'worse' : ''}">
                        ${requestScope.city.crimeViolent}
                    </td>
                    <td>
                        ${requestScope.statewide.crimeViolent}
                    </td>
                    <td>
                        ${requestScope.us.crimeViolent}
                    </td>
                </tr>
                <tr>
                    <th>
                        Days per year<br/>with some sun
                    </th>
                    <td class="${requestScope.city.sunnyDays gt 250 ? 'better' :
					requestScope.city.sunnyDays lt 75 ? 'worse' : ''}">

                        <fmt:formatNumber value="${requestScope.city.sunnyDays}" maxFractionDigits="0"/>
                    </td>
                </tr>
                <tr>
                    <th>
                        Days per year<br/>with some precipitation
                    </th>
                    <td class="${requestScope.city.precipitationDays gt 150 ? 'worse' :
					requestScope.city.precipitationDays lt 75 ? 'better' : ''}">

                        <fmt:formatNumber value="${requestScope.city.precipitationDays}" maxFractionDigits="0"/>
                    </td>
                </tr>
            </table>
        </div>
    </c:if>
</jsp:root>
