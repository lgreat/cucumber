<?xml version="1.0" encoding="UTF-8"?>
<jsp:root version="2.0"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad" xmlns:promo="urn:jsptagdir:/WEB-INF/tags/promo"
          xmlns:gsweb="gstaglib">

    <jsp:directive.attribute name="feature" required="true" type="gs.data.content.cms.CmsFeature"/>
    <jsp:directive.attribute name="omniturePageName" required="true" type="java.lang.String"/>
    <jsp:directive.attribute name="showCompanionAd" required="true" type="java.lang.Boolean"/>

    <div id="squareadvert">
        <ad:AboveFold_300x250/>
    </div>

    <!-- TODO! articles only -->
    <!-- GS-11430 -->
    <c:if test="${pageScope.showCompanionAd}">
        <div class="ad">
            <span class="jq-ghostText adCompanionHeader" style="display:none;">ADVERTISEMENT</span>

            <div id="adCompanionBanner"><!-- don't collapse --></div>
        </div>
    </c:if>

    <jsp:include page="/content/cms/moreInCategory.module?topics=${pageScope.feature.primaryKategory.id}&amp;excludeType=${
                    pageScope.feature.contentKey.type}&amp;excludeContentId=${pageScope.feature.contentKey.identifier}&amp;language=${pageScope.feature.language}&amp;strict=true"/>

    <!-- TODO! move into pojo/cmsconstants - some articles, some article slideshows -->
    <c:set var="ckid" value="${pageScope.feature.contentKey.identifier}"/>
    <c:if test="${ckid eq 2331 or ckid eq 2287 or ckid eq 2272 or ckid eq 2315 or ckid eq 2324 or ckid eq 2334 or ckid eq 2335 or ckid eq 2336 or ckid eq 2337 or ckid eq 2338 }">
        <promo:searchRealtorDotCom omniturePageName="${pageName}" pageAdRatioKey="RDC_PCT_ARTICLE"
                                   showAdPct="0"/>
    </c:if>

    <jsp:include page="/promo/emailSignUp.module"/>

    <!-- TODO! add logic in tag -->
    <div id="articleBottomRightAd">
        <c:choose>
            <c:when test="${pageScope.feature.contentKey.type eq 'ArticleSlideshow'}">
                <ad:BelowFold_Top_300x125/>
            </c:when>
            <c:otherwise>
                <gsweb:adTagGenerator position="BelowFold2_300x250">
                    <span class="jq-ghostText">ADVERTISEMENT</span>$AD
                </gsweb:adTagGenerator>
            </c:otherwise>
        </c:choose>
    </div>

</jsp:root>