<?xml version="1.0" encoding="UTF-8"?>
<jsp:root version="2.0"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:gsweb="gstaglib">
    <jsp:directive.tag body-content="empty"/>
    <jsp:directive.attribute name="rememberQuery" required="false"/>
    <jsp:directive.attribute name="showStates" required="false"/>
    <jsp:directive.attribute name="showLinks" required="false"/>
    <jsp:directive.attribute name="fieldLength" required="false"/>
    <jsp:directive.attribute name="showLabel"
                             required="false"
                             description="Should the 'Search' label be shown? Default yes."
                             type="java.lang.Boolean"/>
    <jsp:directive.attribute name="showConstraint"
                             required="false"
                             description="Should the constraint control (select) show in this control? Default yes."
                             type="java.lang.Boolean"/>
    <jsp:directive.attribute name="constraint"
                             required="false"
                             description="Constraint, or default if showConstraint is set to true."
                             type="java.lang.String"/>


    <div class="globalSearch">
    <gsweb:form id="searchform" method="get" action="/search/search.page">
        <table style="padding:0px; margin:0px;">
            <c:if test="${showStates == 'true'}">
                <tr>
                    <td colspan="2" class="label" align="left"
                        style="white-space:nowrap;">Search again in:
                        <gsweb:stateSelector usingLongNames="true" state="${requestScope.context.stateOrDefault}"/>
                    </td>
               </tr>
            </c:if>
            <tr>
            <c:if test="${showStates != 'true' and (empty showLabel or showLabel) }">
                <td class="label" width="90" align="right">Search
                </td>
            </c:if>
            <td colspan="1" align="right" style="vertical-align:middle;">
                <input type="text"
                       id="q"
                       name="q"
                       size="${(not empty fieldLength) ? (fieldLength) : '50'}"
                       style="font-size:small"
                       maxlength="255"
                       value="${(not empty param.q) and (rememberQuery == 'true') and (empty param.city) and (empty param.district) ? fn:escapeXml(param.q) : ''}"/>
            </td>
                <c:if test="${(empty showConstraint) or showConstraint}">
                    <td>
                        <select name="type">
                            <option value="school">Schools</option>
                            <option value="topic">Articles</option>
                        </select>
                    </td>
                </c:if>
                <c:if test="${not ((empty showConstraint) or showConstraint)}">
                    <input type="hidden" name="type" value="${(not empty constraint) ? (constraint) : 'all'}" />
                </c:if>
            <td style="vertical-align:middle;padding-bottom:2px">
                <gsml:url var="goButton"
                          value="/res/img/button/btn_go_tp.gif"/>
                <input type="image" src="${goButton}" class="btn" style="height: 18px; width: 21px;"
                       value="go"/>
            </td>
        </tr>
        <c:if test="${showLinks == 'true'}">
           <tr>
            <c:if test="${showStates != 'true' and (empty showLabel or showLabel) }">
                <td></td>
            </c:if>
            <td id="searchlinks" colspan="2" align="center">
                <gsml:a href="/cgi-bin/template_plain/advanced/$STATE/#address">Search near address</gsml:a>|
                <gsml:a href="/cgi-bin/static/searchtips.html/$STATE/">Search tips</gsml:a>|
                <gsml:a href="/search/feedback.page?state=$STATE&amp;q=${param.q}">Help us improve</gsml:a>
            </td>
            <td></td>
        </tr>
        </c:if>
        </table>
        <c:if test="${showStates != 'true'}">
            <input type="hidden" name="state"
                   value="${requestScope.context.stateOrDefault}"/>
        </c:if>
        <c:if test="${requestScope.context.cobrand == 'charterschoolratings'}">
            <input type="hidden" name="st" value="charter"/>
        </c:if>
    </gsweb:form>

    </div>
</jsp:root>