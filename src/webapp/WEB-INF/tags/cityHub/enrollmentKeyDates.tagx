<?xml version="1.0" encoding="UTF-8"?>
<jsp:root version="2.0"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsweb="gstaglib"
          xmlns:hub="urn:jsptagdir:/WEB-INF/tags/cityHub"
>
    <jsp:directive.attribute name="schoolType" required="true" type="java.lang.String"/>
    <jsp:directive.attribute name="gradeLevel" required="true" type="java.lang.String"/>

    <c:set var="configKeyPrefix">keyEnrollmentDates_${schoolType}_${gradeLevel}_</c:set>
    <c:set var="configKeyPrefixesList" value="${keyEnrollmentDates.configKeyPrefixesMap[configKeyPrefix]}"
           property="java.util.List"/>
    <c:set var="hasKeyEnrollmentDatesToDisplay" value="${not empty configKeyPrefixesList}" property="java.lang.Boolean"/>

    <c:choose>
        <c:when test="${hasKeyEnrollmentDatesToDisplay}">
            <div class="mod standard_1-5">
                <div class="inner">
                    <div class="hd">
                        <h5 class="SourceSansPro-Semibold-h5 pvs plm bottom">
                            <span class="make-ffffff">Key dates</span>
                        </h5>
                    </div>
                    <div class="bd">
                        <table class="tableType1" border="0">
                            <tbody class="striped">
                            <c:forEach items="${configKeyPrefixesList}" var="keyPrefix">
                                <c:set var="descriptionKey">${keyPrefix}_description</c:set>
                                <c:set var="keyDate">${keyPrefix}_date_MMMdyyyy</c:set>
                                <tr>
                                    <td width="100px;" class="bold">${keyEnrollmentDates[keyDate]}</td>
                                    <td>${keyEnrollmentDates[descriptionKey]}</td>
                                </tr>
                            </c:forEach>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </c:when>
        <c:otherwise>
            <div class="mod standard_1-5">
                <div class="inner">
                    <div class="hd">
                        <h5 class="SourceSansPro-Semibold-h5 pvs plm bottom">
                            <span class="make-ffffff">Key dates</span>
                        </h5>
                    </div>
                    <div class="bd">
                        <p class="pal small bottom">Enrollment processes and deadlines vary by school. Contact schools directly for more information</p>
                    </div>
                </div>
            </div>
        </c:otherwise>
    </c:choose>
</jsp:root>
