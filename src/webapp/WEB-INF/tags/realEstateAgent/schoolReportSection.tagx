<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:gsweb="gstaglib"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:form="http://www.springframework.org/tags/form"
          version="2.0">

<jsp:directive.attribute name="school" type="gs.data.search.beans.SolrSchoolSearchResult" />
<jsp:directive.attribute name="schoolMediaElement" type="gs.data.school.SchoolMedia" />

<c:set var="defaultString" value="Unknown"/>
<c:set var="isPreschool" value="${school.levelCode eq 'p'}"/>
<c:set var="isPrivateSchool" value="${school.schoolType eq 'private'}"/>
<c:set var="isNewGSRating" value="${school.isNewGSRating}"/>
<c:set var="overallRating" value="${school.greatSchoolsRating}"/>

<c:set var="showHideSprite" value="display:block"/>
<c:if test="${not isNewGSRating and isPrivateSchool}">
    <c:set var="showHideSprite" value="dn" />
</c:if>
<c:if test="${isPreschool and empty overallRating}">
    <c:set var="showHideSprite" value="dn" />
</c:if>
<c:if test="${empty overallRating or overallRating == 0}">
    <c:set var="overallRating" value="NR"/>
</c:if>


<c:set var="ratingType" value="orange" />
<c:if test="${isNewGSRating}">
    <c:set var="ratingType" value="RYG" />
</c:if>
<c:set var="privateSchool" value="" />
<c:if test="${isPrivateSchool}">
    <c:set var="privateSchool" value="Private" />
</c:if>
<c:set var="iconString">iconx60-${ratingType}${privateSchool} i-60-${overallRating}</c:set>

<!--iconx60-orangePrivate-->
<!--iconx60-orange-->
<!--iconx60-RYGPrivate-->
<!--iconx60-RYG-->
<!--iconx60-preschool-->
<c:set var="totSR" value="5"/>
<c:set var="starOff" value="${totSR - school.parentRating}"/>

<div class="chooser-section container_24">
    <div class="fl header-left-component">
        <h1>${fn:escapeXml(school.name)}</h1>
        <!--<p><br /></p>-->
        <p>
            <span class="capitalize"> ${school.schoolType}</span>
            ${fn:escapeXml(school.grades.rangeString)}<br />
            ${fn:escapeXml(school.street)}<br/>
            ${school.city}, ${school.databaseState} ${school.zip}

            <br/>
        </p>
    </div>

    <div class="fl header-left-component">
        ${gsweb:roundTwoDecimal(school.distance)} miles
    </div>

    <div class="fl header-left-component">
        <span class="${iconString}"><!-- do not collapse --></span>
    </div>

    <div class="fr">
        <span class="iconx16-stars i-16-orange-star  i-16-star-${school.parentRating} fl"><!-- not empty--></span>
        <span class="iconx16-stars i-16-grey-star  i-16-star-${starOff} fl"><!-- not empty--></span>
    </div>

    <hr class="rulethin" />

</div><!-- end container -->
</jsp:root>
