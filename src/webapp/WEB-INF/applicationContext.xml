<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd"
       default-autowire="byName" default-lazy-init="true">

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename">
            <value>app</value>
        </property>
    </bean>

    <bean id="tableMoverService" class="gs.web.admin.database.TableMoverService"/>

    <bean id="authenticationManager" class="gs.web.community.registration.AuthenticationManager"/>

    <bean id="schoolProfileHeaderHelper"
          class="gs.web.school.SchoolProfileHeaderHelper">
    </bean>

    <bean id="stateSpecificFooterHelper"
          class="gs.web.geo.StateSpecificFooterHelper">
        <property name="geoDao" ref="geoDao"/>
    </bean>

    <bean id="schoolFinderWidgetEmail"
          class="gs.web.widget.SchoolFinderWidgetEmail">
        <property name="subject" value="Your customized School Finder Widget code"/>
        <property name="fromEmail" value="widget@greatschools.org"/>
        <property name="fromName" value="GreatSchools"/>
    </bean>

    <bean id="mySchoolListConfirmationEmail"
          class="gs.web.community.MySchoolListConfirmationEmail">
        <property name="subject" value="Your My School List membership is only the beginning"/>
        <property name="fromEmail" value="gs-batch@greatschools.org"/>
        <property name="fromName" value="GreatSchools"/>
    </bean>

    <bean id="registrationConfirmationEmail"
          class="gs.web.community.registration.RegistrationConfirmationEmail">
        <property name="subject" value="Welcome to GreatSchools"/>
        <property name="fromEmail" value="gs-batch@greatschools.org"/>
        <property name="fromName" value="GreatSchools"/>
    </bean>

    <bean id="emailVerificationEmail" class="gs.web.community.registration.EmailVerificationEmail">
        <property name="fromEmail" value="gs-batch@greatschools.org"/>
        <property name="fromName" value="GreatSchools"/>
        <property name="verificationEmailSubject" value="Please verify your email for GreatSchools"/>
        <property name="verificationEmailPartTwoSubject" value="Reminder: Please verify your email for GreatSchools"/>
        <property name="verificationEmailChangedEmailSubject" value="Please verify your new email for GreatSchools"/>
    </bean>

    <bean id="emailVerificationReviewOnlyEmail" class="gs.web.community.registration.EmailVerificationReviewOnlyEmail">
        <property name="fromEmail" value="gs-batch@greatschools.org"/>
        <property name="fromName" value="GreatSchools"/>
        <property name="verificationEmailSubject" value="Verify your email to complete your review"/>
        <property name="verificationEmailPartTwoSubject" value="Don't forget to complete your school review!"/>
    </bean>

    <bean id="forgotPasswordEmail" class="gs.web.community.registration.ForgotPasswordEmail">
        <property name="subject" value="GreatSchools reset password link"/>
        <property name="fromEmail" value="gs-batch@greatschools.org"/>
        <property name="fromName" value="GreatSchools"/>
    </bean>

    <bean id="mySchoolListHelper" class="gs.web.community.MySchoolListHelper">
        <property name="userDao" ref="userDao"/>
    </bean>

    <!-- factory bean for user session information -->
    <bean id="sessionContext" class="gs.web.util.context.SessionContext"
          scope="prototype">
        <!-- NOTE: not autowired for performance reasons. AJP 3/2006 -->
        <property name="propertyDao" ref="propertyDao"/>
        <property name="userDao" ref="userDao"/>
        <property name="sessionContextUtil" ref="sessionContextUtil"/>
    </bean>

    <bean id="sessionContextUtil" class="gs.web.util.context.SessionContextUtil">
        <property name="omnitureSubCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="OmnitureTracking"/>
                <property name="cookieDomain" value=".greatschools.org"/>

            </bean>
        </property>
        <property name="stateCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="STATE3"/>
                <property name="cookieDomain" value=".greatschools.org"/>
                <!--
                    The Java site uses a cookie to track the user's locale.

                    On the perl site it is tracked in the URL like always.

                    When one site calls the other, they must communicate in the other site's language.
                    It's clear that when the java site calls perl, it passes the state in the URL.
                    The perl site to tell the java site that it's in MA, it doesn't set the cookie,
                    but pass state=MA in the URL, which coaxes the java site to set the cookie.
                    The cookies aren't set on the perl side.

                    There will be one additional cookie, "has the user searched?",
                    which will be used on both sites to determine how to draw the state popup.
                -->
            </bean>
        </property>
        <property name="newMemberCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="isMember"/>
            </bean>
        </property>
        <property name="memberCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="MEMBER"/>
            </bean>
        </property>
        <property name="memberIdCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="MEMID"/>
            </bean>
        </property>
        <property name="communityCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
            </bean>
        </property>
        <property name="hasSearchedCookieGenerator">
            <!-- has the user searched in a specific state? -->
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="HAS_SEARCHED"/>
            </bean>
        </property>
        <property name="sessionCacheCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="SESSION_CACHE"/>
            </bean>
        </property>
        <property name="tempMsgCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="TMP_MSG"/>
            </bean>
        </property>
        <property name="cityIdCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="CITYID"/>
            </bean>
        </property>
        <property name="sitePrefCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="site_pref"/>
                <property name="cookieDomain" value=".greatschools.org"/>
            </bean>
        </property>
        <property name="kindercareLeadGenCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="kindercare"/>
                <property name="cookieDomain" value=".greatschools.org"/>
                <property name="cookieMaxAge" value="-1"/>
            </bean>
        </property>
        <property name="searchResultsCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="mostRecentSearchResults"/>
                <property name="cookieDomain" value=".greatschools.org"/>
            </bean>
        </property>
        <property name="care2PromoCookieGenerator">
            <bean class="org.springframework.web.util.CookieGenerator">
                <property name="cookieName" value="care2"/>
                <property name="cookieDomain" value=".greatschools.org"/>
            </bean>
        </property>
    </bean>

    <bean id="pathwaysMap"
          class="java.util.HashMap">
        <constructor-arg>
            <map>
                <entry key="pathway1">
                    <value>/modperl/go</value>
                </entry>
                <entry key="pathway3">
                    <value>/content/summerReading.page</value>
                </entry>
                <entry key="pathway4">
                    <value>/modperl/go</value>
                </entry>
                <entry key="search_single">
                    <value>/search/search.page</value>
                </entry>
                <entry key="search_double">
                    <value>/cgi-bin/search_switch</value>
                </entry>
                <entry key="default">
                    <value>/modperl/go</value>
                </entry>
            </map>
        </constructor-arg>
    </bean>

    <bean id="anchorListModelFactory" class="gs.web.util.list.AnchorListModelFactory"/>

    <bean id="versionProperties"
          class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="location">
            <value>classpath:version.properties</value>
        </property>
    </bean>

    <bean id="cmsFeatureEmbeddedLinkResolver" class="gs.web.content.cms.CmsContentLinkResolver"/>
    
    <bean id="backToSchoolChecklist" class="gs.web.backToSchool.BackToSchoolChecklist"
          scope="prototype">
        <property name="userDao" ref="userDao"/>
    </bean>

    <bean id="reviewHelper" class="gs.web.school.review.ReviewHelper"/>
    
    <bean id="reviewService" class="gs.web.school.review.ReviewService">
        <property name="reviewDao" ref="reviewDao"/>
    </bean>
    
    <bean id="ratingHelper" class="gs.web.school.RatingHelper">
        <property name="ratingsConfigDao" ref="ratingsConfigDao"/>
        <property name="testManager" ref="testManager"/>
    </bean>

    <bean id="nearbySchoolsHelper" class="gs.web.school.NearbySchoolsHelper">
        <property name="reviewDao" ref="reviewDao"/>
    </bean>
    
    <bean id="looseSolrSchoolSearchService" class="gs.web.search.LooseSchoolSearchServiceSolrImpl" init-method="init">
    </bean>

    <bean id="solrCmsCategorySearchService" class="gs.web.search.CmsCategorySearchServiceSolrImpl" init-method="init">
    </bean>

    <bean id="solrCmsFeatureSearchService" class="gs.web.search.CmsFeatureSearchServiceSolrImpl" init-method="init">
    </bean>

    <bean id="solrSchoolSearchService" class="gs.data.search.services.SchoolSearchServiceSolrImpl">
    </bean>

    <bean id="solrCitySearchService" class="gs.data.search.services.CitySearchServiceSolrImpl">

    </bean>

    <bean id="solrDistrictSearchService" class="gs.data.search.services.DistrictSearchServiceSolrImpl">
        <property name="queryParser" ref="preSolrSchoolSearchQueryParser" />
    </bean>

</beans>