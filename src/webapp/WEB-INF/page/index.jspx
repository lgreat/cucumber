<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:content="urn:www.greatschools.org/taglib/content"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:promo="urn:jsptagdir:/WEB-INF/tags/promo"
          xmlns:gsweb="gstaglib"
          xmlns:cache="http://jakarta.apache.org/taglibs/cache-1.0"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
        >
<jsp:directive.page import="gs.web.util.PageHelper"/>
<jsp:useBean id="communityUtil" class="gs.data.util.CommunityUtilBean"/>

<html lang="en">

<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html; charset=UTF-8"/>
<jsp:directive.page import="gs.web.util.context.SessionContext"/>
<jsp:directive.page import="gs.web.util.context.SessionContextUtil"/>

<jsp:scriptlet>
    SessionContext sessionContext = SessionContextUtil.getSessionContext(request);
    request.setAttribute("communityHost", sessionContext.getSessionContextUtil().getCommunityHost(request));
    request.setAttribute("showExtendedFooter", true);
</jsp:scriptlet>

<gsml:url var="stateWidgetUrl" value="/miniSelectAState.page"/>

<head>
    <title>GreatSchools - Public and Private School Ratings, Reviews and Parent Community</title>

    <meta name="description"
          content="Compare K-12 school ratings nationwide to find the best schools. View parent ratings, reviews and test scores and choose the right preschool, elementary, middle or high school for public or private education."/>
    <meta name="keywords"
          content="school ratings, public schools, public school ratings, private schools, private school ratings, charter schools, charter school ratings, school reviews, school rankings, test scores, preschool, elementary school, middle school, high school, parent community, education resource, find school, great schools, greatschools"/>

    <pageHelper:setPathway pathway="HOME"/>

    <jsp:scriptlet>
        PageHelper.hideLeaderboard(request);
    </jsp:scriptlet>

    <script type="text/javascript" charset="utf-8">
        function textSwitch(el, target, replace) {
            if (el.value == replace) {
                el.value = target;
            }
        }
    </script>

    <!-- The function showLatestTools() is for GS-6999. Only show the last list item (4th bullet) in
         The Latest Tools module if no ad slot is targeted within that module. Do this by checking for
         the presence of the element google_ads_div_Homepage_185x28 and only make the last list item
         visible if it is not there. -->
    <script type="text/javascript" language="javascript">
        function hoverHome() {
            if (getState() != '') {
                return;
            }
            if (document.getElementById('GlobalNav_ResearchButton')) {
                var link = document.getElementById('GlobalNav_ResearchButton');
                link.onclick = function () {
                    toggleStateSelector(this);
                    return false;
                }
            }
        }
        function toggleStateSelector(thisItem) {
            if (thisItem) {
                showStateWidget('${stateWidgetUrl}', 250, 300);
            }
        }
        function showLatestTools() {
            if (document.getElementById('google_ads_div_Homepage_185x28') == null) {
                var listItem = document.getElementById('latestToolsLast1');
                if (listItem != null) {
                    listItem.style.display = 'block';
                }
            }
        }
    </script>

    <![CDATA[
    <script type="text/javascript" language="javascript">
    <!--
        function findAndCompareCheck(queryId, stateSelectorId, pathwaysId) {
            var returnVal = true;
            var queryVal = document.getElementById(queryId).value;
            var stateVal = document.getElementById(stateSelectorId).value;

            var noSearchTerms = (queryVal == 'Enter school, city or district');
            var noState = (stateVal == ("-" + "-") || stateVal == "");

            if (noSearchTerms && noState) {
                // show state laumcher hover
                showStateWidget('${stateWidgetUrl}', 250, 300);
                returnVal = false;
            } else if (!noSearchTerms && noState) {
                // show javascript alert
                alert("Please select a state.");
                returnVal = false;
            } else if (!noSearchTerms && !noState) {
                // go to search page
                document.getElementById(pathwaysId).value = 'search_single';
                returnVal = true;
            } else if (noSearchTerms && !noState) {
                // go to R and C page
                document.getElementById(pathwaysId).value = 'pathway4';
                returnVal = true;
            }
            return returnVal;
        }
        -->
    </script>
    ]]>

    <meta name="verify-v1" content="8wIYiSgpVxmFXAqa0o9m/kbv8p0enMoVmBn0d7Tq3z8="/>
</head>

<gsml:body adPageName="splash">
<!--<pageHelper:externalCss file="/res/css/splash.css"/>-->
<pageHelper:externalCss file="/res/css/home/module_base.css"/>
<pageHelper:externalCss file="/res/css/home/blue_module.css"/>
<pageHelper:externalCss file="/res/css/home/adbox.css"/>
<pageHelper:externalCss file="/res/css/carousel/carousel.css"/>
<!--must match subversion numbers in Template.pm-->
<pageHelper:externalCss file="/res/css/submodal/submodal.css"/>
<pageHelper:externalJavascript file="/res/js/submodal/submodal.js"/>
<pageHelper:externalJavascript file="/res/js/AC_RunActiveContent.js"/>
<pageHelper:externalJavascript file="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"/>
<pageHelper:externalJavascript file="/res/js/carousel/carousel.js"/>
<pageHelper:addOnLoadHandler handler="hoverHome();showLatestTools();"/>
<pageHelper:addOnLoadHandler handler="initPopUp('newsletterHover');"/>

<pageHelper:externalJavascript file="http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.2/prototype.js"/>

<c:set var="showAd"
       value="${!requestScope.pageHelper.adFree and !requestScope.pageHelper.adServedByCobrand}"/>


<div id="mainGS" class="col">

    <div id="carousel">
        <div id="image">
            <c:forEach items="${homepage.featureLinks}" var="featureLink" varStatus="status">
                <c:choose>
                    <c:when test="${featureLink.newWindow}">
                        <c:set var="featureLinkTarget" value="_blank"/>
                    </c:when>
                    <c:otherwise>
                        <c:set var="featureLinkTarget" value="_self"/>
                    </c:otherwise>
                </c:choose>
                <a href="${featureLink.url}" target="${featureLinkTarget}">
                    <img src="${homepage.featureLinks[status.index].imageUrl}"
                         width="584"
                         height="288"
                         alt="${homepage.featureLinks[status.index].imageAltText}"/>
                </a>
            </c:forEach>
        </div>
        <!--image -->
        <div id="banner"><!--do not collapse --></div>
        <!--banner -->
        <div id="info">
            <c:forEach items="${homepage.featureLinks}" var="featureLink" varStatus="status">
                <c:choose>
                    <c:when test="${featureLink.newWindow}">
                        <c:set var="featureLinkTarget" value="_blank"/>
                    </c:when>
                    <c:otherwise>
                        <c:set var="featureLinkTarget" value="_self"/>
                    </c:otherwise>
                </c:choose>

                <h2 class="headline">
                    <a href="${featureLink.url}"
                       target="${featureLinkTarget}">${featureLink.title}</a>
                </h2>

                <p>
                    <a class="text3"
                       href="${featureLink.url}"
                       target="${featureLinkTarget}">${featureLink.description}</a>&amp;nbsp;
                    <a class="link"
                       href="${featureLink.url}"
                       target="${featureLinkTarget}">${featureLink.linkText}</a>&amp;nbsp;
                    <span class="alertdblarrow">&amp;raquo;</span>
                </p>
            </c:forEach>

            <c:if test="${fn:length(homepage.featureLinks) gt 1}">
                <div id="nav">
                    <ul>
                        <li id="prev" class="prev-position"><!--do not collapse --></li>
                    </ul>
                    <ul id="buttons">
                        <c:forEach items="${homepage.featureLinks}" var="featureLink" varStatus="status">
                            <li id="${status.index + 1}" class="off">${status.index + 1}</li>
                        </c:forEach>
                    </ul>
                    <ul>
                        <li id="next" class="next-position"><!--do not collapse --></li>
                    </ul>
                </div>
                <!--nav -->
            </c:if>
        </div>
        <!--info -->
    </div>
    <!-- carousel -->

    <div class="mod">
        <div class="mod_hd">
            <h3>Raise Your Hand</h3>
        </div>
        <div class="mod_bd">
            <!--do not collapse-->
        </div>
    </div>

</div>

<div id="sidebarGS" class="col">
    <div id="find-compare">

        <div id="find" class="clearfix">
            <div id="bigArrow-f4891d"><!--do not collapse--></div>
            <div id="bigArrow-fc6"><!--do not collapse--></div>
            <h3 id="find-title" class="title2bold-333">Start here: <span class="title2-333">Find a school</span></h3>
            <h3 class="title2bold">Start here: <span class="title2">Find a school</span></h3>
            <br class="spacer_10"/>
            <gsweb:form method="get"
                        action="/stateLauncher.page"
                        onsubmit="return findAndCompareCheck('q', 'splashStateSelector', 'p')">
                <input name="p" id="p" type="hidden" value="search_single"/>
                <input name="type" type="hidden" value="school"/>
                <c:if test="${requestScope.context.cobrand == 'charterschoolratings'}">
                    <input type="hidden" name="st" value="charter"/>
                </c:if>
                <input type="text" value="Enter school, city or district" name="q" id="q" size="21"
                       class="text2 fltlft"
                       onfocus="textSwitch(this, '', 'Enter school, city or district');"
                       onblur="textSwitch(this, 'Enter school, city or district', '');"/>
                <gsweb:stateSelector usingLongNames="false" state="${requestScope.context.state}"
                                     useNoState="${not requestScope.context.hasSearched}"
                                     styleId="splashStateSelector"
                                     styleClass="text2 fltlft"
                                     noStateLabel="--"/>
                <button class="btn25 fltlft" type="submit" onclick="s_objectID='splash_schools_go';">
                    <span class="lftDoor25">
                        <span class="rtDoor25">GO</span>
                    </span>
                </button>
            </gsweb:form>
            <br class="clearfloat"/>

        </div>
        <div id="compare" class="clearfix">
            <school:compareNearZipCode/>
        </div>
    </div>

    <div>
    <c:choose>
        <c:when test="${showAd}">
            <ad:Homepage_300x250/>
        </c:when>
        <c:otherwise>
            <div class="adBox">
                <div class="wrapper-outer">
                    <div class="wrapper-inner">
                        <div class="wrapper-content">
                            <a href="/content/healthyKids.page"><img id="adFreeHouseAd"
                                                                     src="/res/img/home/GS_boxad_healthy2.jpg"
                                                                     alt="Healthy Kids: No more couch potatoes!"/></a>
                        </div>
                    </div>
                </div>
            </div>
        </c:otherwise>
    </c:choose>
    </div>

    <!--<div class="mod">
        <div class="mod_hd">
            <h3>My Stuff</h3>
        </div>
        <div class="mod_bd">

        </div>
    </div>-->

    <jsp:include page="/content/cms/mostPopularContent.module?style=reskin2010"/>

    <div class="mod">
        <div class="mod_hd">
            <h3>GreatSchools Blog</h3>
        </div>
        <div id="gs-blog" class="mod_bd">
            <cache:cache scope="application" name="blog" key="bill3">
                <content:blogFeed atomUrl="http://feeds2.feedburner.com/GreatschoolsBlog"
                                  defaultTitle="GreatSchools blog"
                                  defaultUrl="http://blogs.greatschools.org/greatschoolsblog"
                                  type="splashBlog"
                                  showDate="true"
                        />
            </cache:cache>
        </div>
    </div>
</div>



<mod:tracking pageName="splash" hier1="Home,Splash"/>
</gsml:body>
</html>
</jsp:root>
