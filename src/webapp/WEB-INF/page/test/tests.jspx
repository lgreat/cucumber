<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
          xmlns="http://www.w3c.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:promo="urn:jsptagdir:/WEB-INF/tags/promo"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:link="urn:www.greatschools.net/taglib/link"
          xmlns:search="urn:jsptagdir:/WEB-INF/tags/search"
          xmlns:gsweb="gstaglib"
          xmlns:display="urn:jsptld:http://displaytag.sf.net"
        >
    <html lang="en">

    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

    <jsp:directive.page contentType="text/html"/>

    <head>
        <title>Title page</title>
        <style>
            div#subjects, div#dataTypes {
                float:right;
                margin-left: 3ex;
                margin-bottom: 1ex;
                width: 30ex;
                padding: 2ex;
                clear: right;
                background-color: cornsilk;
            }
            #contentGS h1 {
                font-size: x-large;
            }
            #contentGS h2 {
                font-size: small;
                margin-bottom: 3ex;
            }
            #contentGS h3 {
                font-weight: bold;
                padding-bottom: 1ex;
                color: #666;
            }

            table#testDataSets tr th {
                background-color: cornsilk;
            }
            table#testDataSets tr td {
                padding: 3px 20px 3px 20px;
                text-align: center;
            }
        </style>
    </head>

    <gsml:body adPageName="modal" pageLayout="research">

        <div id="subjects">
            <h3>${requestScope.context.state} Subjects:</h3>
            <ul>
                <c:forEach var="s" items="${requestScope.subjectNames}">
                    <li>${s}</li>
                </c:forEach>
            </ul>
        </div>
        <div id="dataTypes">

            <h3>${requestScope.context.state} Data types:</h3>
            <ul>
                <c:forEach var="s" items="${requestScope.dataTypes}">
                    <li>${s.name} - ${s.description}</li>
                </c:forEach>
            </ul>
        </div>

        <h1>${requestScope.context.state.longName} Tests ${requestScope.yearStr}</h1>
        <h2>
            <a href="tests.page?year=${year - 1}">&lt; Last Year</a> &#160;
            <a href="tests.page?year=${year + 1}">Next Year &gt;</a>
        </h2>

        <h3>${requestScope.context.state} Test Data Sets:</h3>

        <table id="testDataSets">
            <tr>
                <td>ID</td>
                <td>Data Type</td>
                <td>Level</td>
                <td>Subject</td>
                <td>Breakdown</td>
            </tr>
            <c:forEach var="testInfo" items="${requestScope.testInfo}">
                <tr>
                    <th colspan="6">Grade ${testInfo.grade}</th>
                </tr>

                <c:forEach var="dataSet" items="${testInfo.testDataSets}">
                    <tr>
                        <td>${dataSet.id}</td>
                        <td>${dataSet.dataTypeId}</td>
                        <td>${dataSet.levelCode}</td>
                        <td>${dataSet.subjectId}</td>
                        <td>${dataSet.breakdownId}</td>
                    </tr>
                </c:forEach>
            </c:forEach>
        </table>


    </gsml:body>
    </html>
</jsp:root>