<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:content="urn:www.greatschools.net/taglib/content"
          xmlns:footer="urn:jsptagdir:/WEB-INF/tags/content"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsweb="gstaglib"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:cache="http://jakarta.apache.org/taglibs/cache-1.0"
          xmlns:link="urn:www.greatschools.net/taglib/link"
          version="2.0" >
<pageHelper:setPathway pathway="RESEARCH_COMPARE"/>
<jsp:directive.page contentType="text/html; charset=UTF-8"/>
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<html lang="en">
<c:set var="stateOrNull" value="${requestScope.context.state}" />
<c:set var="stateAbbrev" value="${requestScope.context.stateOrDefault.abbreviation}" />
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>GreatSchools Test Landing Page</title>
    <pageHelper:externalJavascript file="/res/js/prototype.js"/>
    <pageHelper:externalCss file="/res/css/content/research.css"/>
    <![CDATA[
    <script type="text/javascript">
        function adjustLeftColIE6() {
            if(navigator.userAgent.toLowerCase().indexOf('msie 6') != -1) {
                var rightcol = document.getElementById('right');
                var rightHeight = rightcol.scrollHeight;
                var leftcol = document.getElementById('leftcol');
                leftcol.style.height = (rightHeight-30)+'px';
            }
        }

        function changeCity(citySelect, state) {
            var url = '/test/schoolsInCity.page';
            var pars = {state : state,
                        city : citySelect.value };
            $('schools').innerHTML = '<select name="city" class="selectCity"><option value="">Loading ...</option></select>';
            var myAjax = new Ajax.Updater (
                    'schools',
                    url,
            {
                method: 'get',
                parameters: pars
            });
        }
    </script>
    ]]>
</head>

<pageHelper:addOnLoadHandler handler="adjustLeftColIE6()" />
<gsml:body adPageName="research" >

<div id="main">
<table id="right" cellspacing="0" cellpadding="0" class="content" border="0">
    <tr>
        <td style="width: 9px;" valign="top">
            <img style="width: 9px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/>
        </td>
        <td style="width: 651px" valign="top">
            <table width="651" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td colspan="3">
                        <h1 id="stateSchools">
                            ${display_name}
                        </h1>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <gsml:img style="height: 5px;" alt="" src="/res/img/header/clear_pix.gif" />
                    </td>
                </tr>
                <tr>
                    <!-- Compare Box -->
                    <td valign="top">
                        <div class="middleTitle">
                            <img src="/res/img/content/research/t_compare.gif" width="93" height="19" alt="Compare ${requestScope.context.state.longName} Schools" border="0"/>
                        </div>
                        <div class="compareBox">
                            <label id="cityLabel"><span class="required">*</span>City</label>
                            <span id="city">
                                <select name="city" tabindex="10" onchange="changeCity(this, '${stateAbbrev}');">
                                    <option selected="selected" value="">Choose city</option>
                                    <c:forEach var="cityOption" items="${cities}">
                                        <![CDATA[<option value="${cityOption.name}">${cityOption.name}</option>]]>
                                    </c:forEach>
                                </select>
                            </span>
                            <div id="schools"></div>
                        </div>
                    </td>
                    <td>
                        <img style="width: 6px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/>
                    </td>
                    <!-- Find Box -->
                    <td valign="top">
                        <div class="middleTitle">
                            <img src="/res/img/content/research/t_find.gif" width="41" height="19" alt="Find ${requestScope.context.state.longName} Schools" border="0"/>
                        </div>
                        <div class="findBox">
                            ${info}
                        </div>
                    </td>
                </tr>
            </table>

<table width="649" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td valign="top" colspan="6"><img style="height: 14px;" alt=""
                                          src="http://www.greatschools.net/res/img/header/clear_pix.gif"/></td>
    </tr>
    <tr>
        <td valign="top" colspan="6" class="blueDot"><img style="height: 1px;" alt=""
                                                          src="http://www.greatschools.net/res/img/header/clear_pix.gif"/>
        </td>
    </tr>
    <tr>
        <td valign="top" colspan="6"><img style="height: 6px;" alt=""
                                          src="http://www.greatschools.net/res/img/header/clear_pix.gif"/></td>
    </tr>
    <tr>
        <td valign="middle" align="center">
            <gsml:img id="map" src="/res/img/content/research/map/map_${requestScope.context.state.abbreviationLowerCase}.gif"
                      alt="${not empty stateOrNull ? stateOrNull.longName : 'Nationwide'} Schools"/>
        </td>
        <td valign="top">
        </td>
        <td valign="top" class="blueDotVert">
            <img style="width: 1px; height: 153px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/></td>
        <td valign="top">
            <img style="width: 27px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/>
        </td>
        <td valign="top">
            <img style="width: 305px; height: 5px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/><br/>
            <content:researchAndCompareNewsBlurb state="${requestScope.context.state}"/>
        </td>
        <td valign="top"><img style="width: 30px;" alt=""
                              src="http://www.greatschools.net/res/img/header/clear_pix.gif"/></td>
    </tr>
    <tr>
        <td valign="top" colspan="6">
            <img style="height: 6px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/>
        </td>
    </tr>
    <tr>
        <td valign="top" colspan="6" class="blueDot">
            <img style="height: 1px;" alt="" src="http://www.greatschools.net/res/img/header/clear_pix.gif"/>
        </td>
    </tr>
</table>

<div class="blueDot"></div>

</td>
</tr>
</table>

<div id="leftcol" class="content border10">
    <table width="173" cellpadding="0" cellspacing="0" border="0">
        <tr>
            <td id="editorPhoto">
                <div class="lisaDashedBorder">
                    <div class="lisa" title="Photo of GreatSchools Senior Editor, Lisa Rosenthal">Photo of GreatSchools Senior Editor, Lisa Rosenthal</div>
                </div>
            </td>
            <td id="editorText">
                <span class="photoName">Lisa Rosenthal</span><br />
                <span class="photoCaption">Senior Editor,<br />GreatSchools</span>
            </td>
        </tr>
        <tr>
            <td>
                <ul>
                    <c:forEach var="anchor" items="${links}">
                        <li><a href="${anchor.href}">${anchor.contents}</a></li>
                    </c:forEach>
                </ul>
            </td>
        </tr>
    </table>
</div>
</div>

<mod:tracking pageName="Test Landing" hier1="test,landing"/>
</gsml:body>
</html>
</jsp:root>