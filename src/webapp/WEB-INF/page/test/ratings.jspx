<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
          xmlns="http://www.w3c.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:promo="urn:jsptagdir:/WEB-INF/tags/promo"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:link="urn:www.greatschools.net/taglib/link"
          xmlns:search="urn:jsptagdir:/WEB-INF/tags/search"
          xmlns:gsweb="gstaglib"
          xmlns:display="urn:jsptld:http://displaytag.sf.net"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:spring="http://www.springframework.org/tags"
        >
<html lang="en">

<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html"/>

<jsp:scriptlet>
    gs.web.util.PageHelper.setAdServerControlledFooterAd(request, true);
</jsp:scriptlet>


<head>
    <title>Rating page</title>
</head>

<spring:bind path="ratingsCmd.school">
    <c:set var="school" value="${status.value}"/>
</spring:bind>

<spring:bind path="ratingsCmd.ratingsDisplay">
    <c:set var="ratingsDisplay" value="${status.value}"/>
</spring:bind>

<spring:bind path="ratingsCmd.overallRating">
    <c:set var="overallRating" value="${status.value}"/>
</spring:bind>

<c:set var="ratingImagePath" value="/res/img/school/ratings/ratings_0${overallRating}.gif"/>
<c:if test="${overallRating == 10}">
    <c:set var="ratingImagePath" value="/res/img/school/ratings/ratings_${overallRating}.gif"/>
</c:if>

<c:set var="hasError" value="false"/>

<pageHelper:externalCss file="/res/css/school/ratings/ratings.css"/>
<gsml:body adPageName="ratings" pageLayout="research">
<div class="marginGS" id="marginGS">

    <spring:hasBindErrors name="ratingsCmd">
        <c:set var="hasError" value="true"/>
      <ul>
        <c:forEach var="errMsgObj" items="${errors.allErrors}">
           <li>
              <spring:message code="${errMsgObj.code}" text="${errMsgObj.defaultMessage}"/>
           </li>
        </c:forEach>
     </ul>
    </spring:hasBindErrors>

    <c:if test="${hasError eq 'false'}">
    <school:profile school="${school}">
        <div class="ratingSummaryWrapper">
            <div class="ratingSummaryContent">
                <gsml:img src="${ratingImagePath}" alt="ratings" style="float:left;padding-right:20px;"/>
                <h2>What do these ratings mean?</h2>

                <p>These ratings provide a quick overview of how students<br/>
                    in this school performed on standardized tests.
                </p>
                <br/>
                <p>
                    A "10" means that the group is in the top 10% for test scores<br/>
                    when compared to students in the same group statewide.<br/>
                    A "1" means that the group is in the bottom 10%.
                </p>
            </div>
        </div>

        <div style="padding-top:15px;">
            <div style="float:left;width:498px;">
                <school:ratingTable ratingsDisplay="${ratingsDisplay}" overallRating="${overallRating}"/>
                <br/>

                <div id="legendWrapper">
                    <div id="legend">
                        <div style="float:left;">
                            <h2 id="testScoreTrend">Test Score Trend</h2>
                            <p>Based on changed between<br/>spring 2005 and spring 2006</p>
                        </div>
                        <div style="float:left;border-left: dotted 1px #66cccc;padding-left:36px; height:100%;">
                            <ul>
                                <li>Strong improvement</li>
                                <li>Some improvement</li>
                                <li>No change</li>
                                <li>Some decline</li>
                                <li>Strong decline</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div style="float:right;">
                <ad:x48/>

                <div id="moreResources">
                    <h2>More Resources</h2>
                    <ul>
                        <li>More About GreatSchools Ratings</li>
                        <!--<li>Compare with GreatSchools Ratings<br/> from nearby schools</li>-->
                        <li>See this school's performance data</li>
                    </ul>
                </div>
            </div>
        </div>
   </school:profile>
    </c:if>
</div>
</gsml:body>
</html>
</jsp:root>