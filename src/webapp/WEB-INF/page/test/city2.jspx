<?xml version="1.0" encoding="UTF-8"?>
<jsp:root
        xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
        xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
        xmlns:spring="http://www.springframework.org/tags"
        xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
        xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
        xmlns:promo="urn:jsptagdir:/WEB-INF/tags/promo"
        xmlns:search="urn:jsptagdir:/WEB-INF/tags/search"
        xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
        xmlns:map="urn:jsptagdir:/WEB-INF/tags/map"
        xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
        >
<html lang="en">
<c:set var="stateAbbrev" value="${requestScope.context.stateOrDefault.abbreviation}"/>
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html"/>

<head>
    <![CDATA[
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
        <style type="text/css">
#mapContainer {
    margin: .3em;
    border: 1px solid #00c;
    background-color: #eee;
    padding: .0em;
}
#map, #mapContainer {
    width: 330px; height: 200px;
    width: 500px; height: 330px;
    width: 600px; height: 400px;
    width: 700px; height: 400px;
    width: 350px; height: 350px;
}
.statsModule {
    font-size: small;
    margin: .3em;
}
.statsModule h3 {
    color: #eb7a31;
    font-size: medium;
    text-align: left;
}

.statsModule table {
            padding-top: 1em;
			width: 100%;
        }

.statsModule .census td,
.statsModule .census th {
            border-bottom: 1px dotted #ddd;
            font-size: small;
            font-weight: normal;
            padding: .4em 1em .5em 1em;
            text-align: left;
}
.statsModule .census td.empty {
    border-width: 0;
}
.statsModule .census td {
        }
.statsModule .census th{
padding-left: 0;
        }
.statsModule .census thead th{
            text-align: left;
            font-weight: normal;
            padding: 0 1em .3em 1em;
            color: #555;
            font-size: x-small;
            font-weight: bold;
            border-bottom: 1px solid #ddd;
        }
.statsModule .better { color: green; font-weight: bold; }
.statsModule .worse { color: red; ; font-weight: bold;}

.statsModule .climate th {
    font-weight: normal;
}

div#nearbyCities {
    border: 1px solid #f60;
    margin: .5em;
    padding: .3em;
}
div#nearbyCities h3 {
    display: inline;
    color: #888;
    padding-right: 1em;
    text-weight: bold;
}
div#nearbyCities ul {
    display: inline;
}
div#nearbyCities li {
    display: inline;
    padding: .5em;
    font-size: small;
}

        </style>
            ]]>
    <c:set var="city">${param["city"]}</c:set>
    <title>${city} Schools</title>
</head>

<gsml:body adPageName="city">
    <div id="nearbyCities">
        <jsp:include page="/geo/nearbyCities.module?city=${city}&amp;count=6&amp;more=true"/>
    </div>

    <div style="margin: .5em">
        <table width="100%">
            <tr>
                <td width="33%" style="vertical-align:top">
                    <gsml:box tableClass="shade3" tableWidth="100%">
                    <jsp:include page="/school/review/recentParentReviews.module?city=${city}&amp;state=${stateAbbrev}"/>
                    </gsml:box>
                    <gsml:box tableClass="shade3" tableWidth="100%">

                    <div class="hotTopics">
                        <h3>Most Popular Articles</h3>
                        <jsp:include page="/promo/featuredArticles.module?position=HOT_TOPIC&amp;count=7"/>
                    </div>
                    </gsml:box>
                </td>
                <td width="66%" style="vertical-align:top">
                    <gsml:box tableClass="shade3" tableWidth="100%">
                        <table width="100%" cellpadding="0" cellspacing="0"><tr><td
                                style="width:50%; vertical-align: top">
                            <c:if test="${not empty schoolBreakdown.results}">
                                <gsml:list model="${schoolBreakdown}"/>
                            </c:if>
                            <br />
                            <br />
                            <c:if test="${not empty districts.results}">
                            <gsml:list model="${districts}"/>
                            </c:if>
                        </td><td style="width: 50%">
                            <div id="mapContainer">
                                <div id="map">&#160;</div>
                            </div>
                            <map:setup/>
                            <map:schools functionName="createMap" id="map" lon="${lon}" lat="${lat}" scale="${scale}"
                                         schools="${schools}"/>
                            <pageHelper:addOnLoadHandler handler="createMap()"/>
                        </td>
                        </tr></table>
                    </gsml:box>
                    <gsml:box tableClass="shade3" tableWidth="100%">
                        <jsp:include page="/geo/cityStats.module?city=${city}&amp;state=${stateAbbrev}"/>
                    </gsml:box>

                </td>
            </tr>
        </table>

    </div>

</gsml:body>
</html>
</jsp:root>