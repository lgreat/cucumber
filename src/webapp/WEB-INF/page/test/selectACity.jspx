<?xml version="1.0" encoding="UTF-8"?>
<jsp:root
        xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
        xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
        xmlns:spring="http://www.springframework.org/tags"
        xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
        xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
        xmlns:promo="urn:jsptagdir:/WEB-INF/tags/promo"
        xmlns:search="urn:jsptagdir:/WEB-INF/tags/search"
        xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
        xmlns:map="urn:jsptagdir:/WEB-INF/tags/map"
        xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
        >
    <html lang="en">
    <c:set var="stateAbbrev" value="${requestScope.context.stateOrDefault.abbreviation}"/>
    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

    <jsp:directive.page contentType="text/html"/>

    <head>
        <![CDATA[
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
        <style type="text/css">
#mapContainer {
    margin: .3em;
    border: 1px solid #00c;
    background-color: #eee;
    padding: .0em;
}
#map, #mapContainer {
    width: 550px; height: 500px;
    float:right;
}
div#nearbyCities {
    margin: .5em 1em .5em 1em;
    padding: .3em 1em .3 1em;
}
div#nearbyCities h3 {
    color: #eb7a31;
    font-size: medium;
    font-weight: 700;
    text-align: left;
    padding-bottom: 5px;
}
div#nearbyCities li {
font-size: small;
display: list-item;
border-top: 1px dotted #999;
padding: 3px 0 3px 0;
xlist-style-position: outside;
xline-height: 1.5em;
xmargin-left: 1.5em;
}
li.town {
font-weight: 100;
xlist-style-image: url(res/img/geo/town.gif);
}
li.city {
font-weight: 500;
xlist-style-image: url(res/img/geo/city.gif);
}
li.bigCity {
font-weight: 900;
xlist-style-image: url(res/img/geo/bigCity.gif);
}

        </style>
            ]]>
        <c:set var="city">${param["city"]}</c:set>
        <title>Select a City Near ${city}</title>
    </head>

    <gsml:body adPageName="city">

        <div style="margin: .5em">
		<table width="100%" cellpadding="0" cellspacing="0">
            <tr>

                <td style="width:33%; vertical-align: top">
                <div id="nearbyCities">
                    <gsml:list />
                </div>
                 </td>

                <td style="width:66%; vertical-align: top">
                    <div id="mapContainer">
                        <div id="map">&#160;</div>
                    </div>
                    <map:setup/>
                    <map:cities functionName="createMap"
                                id="map"
                                lon="${cityObject.lon}"
                                lat="${cityObject.lat}"
                                scale="7"
                                cities="${cities}"/>
                    <pageHelper:addOnLoadHandler handler="createMap()"/>
                </td>

            </tr></table>

        </div>

    </gsml:body>
    </html>
</jsp:root>