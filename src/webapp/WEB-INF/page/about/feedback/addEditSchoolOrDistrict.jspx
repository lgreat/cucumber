<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
          xmlns="http://www.w3c.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:content="urn:www.greatschools.org/taglib/content"
          xmlns:cache="http://jakarta.apache.org/taglibs/cache-1.0"
          xmlns:about="urn:jsptagdir:/WEB-INF/tags/about"
          xmlns:gsweb="gstaglib"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:form="http://www.springframework.org/tags/form"
        >
<html lang="en">
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html"/>
<pageHelper:hideFooterAd/>
<pageHelper:externalJavascript file="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"/>
<c:set var="state" value="${requestScope.context.stateOrDefault.abbreviation}"/>

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="Description" content="Add or edit your school or district on the GreatSchools web site"/>
<title>Add or edit your school or district on the GreatSchools web site</title>
<script type="text/javascript">
<![CDATA[
//<!--
var $j = jQuery;

function showWhatIsNecessary(clear){
    do_radio_school_district(clear); //show sections based on school or district
    doAddEditSections(clear); //show sections based on add or edit
    doSchoolTypeSections();   //show sections based on school type
    doPKOnly();  // show fields for pk-only schools
    showSchoolDistrictFields();
    showWhenApplicable();
    //do_radio_school_district(1);
    //do_add_edit($("#addEditSchoolOrDistrictCommand_state").val(),clear);
    //doSchoolTypeSections();
    //doPKOnly();

}

function showSchoolDistrictFields(){
    if($('input:radio[name=schoolOrDistrict]:checked').val() == 'district'
            && $("#addEditSchoolOrDistrictCommand_districtId").val() > 0){
        $("#schoolDistrictFields").show();
        $("#schoolDistFieldsDisplayed").val("true");
    }else if($('input:radio[name=schoolOrDistrict]:checked').val() == 'school'
            && $("#addEditSchoolOrDistrictCommand_schoolId").val() > 0){
        $("#schoolDistrictFields").show();
        $("#schoolDistFieldsDisplayed").val("true");
    }else if($('input:radio[name=addEdit]:checked').val() == 'add'){
        $("#addEditSchoolOrDistrictCommand_schoolId").val("");
        if($('input:radio[name=schoolType]:checked').val() == 'public'
                && $("#addEditSchoolOrDistrictCommand_districtId").val() > 0){
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }else if($('input:radio[name=schoolType]:checked').val() == 'charter'
                && $("#addEditSchoolOrDistrictCommand_county").val() != ""){
                //&& $("#addEditSchoolOrDistrictCommand_districtId").val() > 0){
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }else if($('input:radio[name=schoolType]:checked').val() == 'private'
                && $("#addEditSchoolOrDistrictCommand_county").val() != ""){
            $("#addEditSchoolOrDistrictCommand_districtId").val("");
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }else{
            $("#schoolDistrictFields").hide();
            $("#schoolDistFieldsDisplayed").val("false");
        }
    }else{
        $("#schoolDistrictFields").hide();
        $("#schoolDistFieldsDisplayed").val("false");
    }
    //if($('input:radio[name=addEdit]:checked').val() == 'add' || $('input:radio[name=addEdit]:checked').val() == 'edit'){
        //$("#schoolDistrictFields").show();
    //}
}

function doPKOnly(){
    var warngrades = ":";
    var values = $('input:checkbox:checked.gradecheck').map(function () {
        warngrades += this.value + ":";
    }).get();
    if(warngrades == ":PK:" || warngrades == ":PK:KG:") {
        $("#headOfficialSection").hide();
        $("#div_preschool_only").show();
        if($('input:radio[name=addEdit]:checked').val() == 'add'){
            $("#enrollmentLabel").html("Capacity <span class=\"required\">*</span>");
        }else{
            $("#enrollmentLabel").html("Capacity");
        }
    }else{
        $("#headOfficialSection").show();
        $("#div_preschool_only").hide();
        if($('input:radio[name=addEdit]:checked').val() == 'add'){
            $("#enrollmentLabel").html("Enrollment <span class=\"required\">*</span>");
        }else{
            $("#enrollmentLabel").html("Enrollment");
        }
    }
}

function doSchoolTypeSections(){
    if($('input:radio[name=schoolType]:checked').val() == 'private'){
        $("#district_list").hide();
        $("#privateSection1").show();
        if($('input:radio[name=addEdit]:checked').val() == 'add'){
            $("#div_choose_state").show();
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
            $("#school_list").hide();
            $("#city_list").hide();
            $("#district_list").hide();
            $("#county_list").show();
        }
        if($('input:radio[name=addEdit]:checked').val() == 'edit'){
            $("#school_list").show();
            $("#city_list").show();
            $("#district_list").hide();
            $("#county_list").hide();
        }
    }
    if($('input:radio[name=schoolType]:checked').val() == 'public'){
        $("#districtLabel").html("District <em class=\"sprite i-required requiredIndicator1\"><!-- do not collapse --></em>");
        $("#privateSection1").hide();
        $("#div_choose_state").show();
        if($('input:radio[name=addEdit]:checked').val() == 'add'){
            $("#school_list").hide();
            $("#city_list").hide();
            $("#district_list").show();
            $("#county_list").show();
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }
        if($('input:radio[name=addEdit]:checked').val() == 'edit'){
            $("#school_list").show();
            $("#city_list").show();
            $("#district_list").hide();
            $("#county_list").hide();
        }
    }
    if($('input:radio[name=schoolType]:checked').val() == 'charter'){
        $("#districtLabel").html("District");
        $("#privateSection1").hide();
        $("#div_choose_state").show();
        if($('input:radio[name=addEdit]:checked').val() == 'add'){
            $("#school_list").hide();
            $("#city_list").hide();
            $("#district_list").show();
            $("#county_list").show();
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }
        if($('input:radio[name=addEdit]:checked').val() == 'edit'){
            $("#school_list").show();
            $("#city_list").show();
            $("#district_list").hide();
            $("#county_list").hide();
        }

    }
}



function doAddEditSections(clear){
    if(clear == "1"){
        clear_values();
    }
    if($('input:radio[name=addEdit]:checked').val() == 'edit'
            && $('input:radio[name=schoolOrDistrict]:checked').val() == 'school'){
        $("#isSchoolOpen").show();
        $("#openQuestion").html("Is this school closing? <span class=\"required\">*</span>");
        $("#whenOpenQuestion").html("When will this school close?" + " <span class=\"required\">*</span>");
        $("#div_choose_state").show();
        $("#div_school_type").hide();
        $("#school_list").show();
        $("#city_list").show();
        $("#district_list").hide();
        $("#county_list").hide();
        $("#lowerCounty").show();
        $("#category").val("edit_school");
    }

    if($('input:radio[name=schoolOrDistrict]:checked').val() == 'district'){
        $("#isSchoolOpen").hide();
        $("#whenOpen").hide();
        $("#div_choose_state").show();
        $("#div_school_type").hide();
        $("#school_list").hide();
        $("#city_list").hide();
        $("#district_list").show();
        $("#county_list").show();
        $("#category").val("edit_district");
    }

    if($('input:radio[name=addEdit]:checked').val() == 'add'){
        if($('input:radio[name=schoolType]:checked').val() == 'public'
                || $('input:radio[name=schoolType]:checked').val() == 'charter'){
            $("#div_choose_state").show();
        }
        $("#isSchoolOpen").show();
        $("#openQuestion").html("Is this school open yet? <span class=\"required\">*</span>");
        $("#whenOpenQuestion").html("When will this school open?" + " <span class=\"required\">*</span>");
        $("#div_school_type").show();
        $("#school_list").hide();
        $("#city_list").hide();
        $("#district_list").show();
        $("#county_list").show();
        $("#lowerCounty").hide();
        $("#schoolDistrictFields").show();
        $("#schoolDistFieldsDisplayed").val("true");
        $("#category").val("add_school");
    }
}

function do_radio_school_district(clear){
    if(clear == "1"){
        clear_values();
    }
    if($('input:radio[name=schoolOrDistrict]:checked').val() == 'school'){
        if($('input:radio[name=addEdit]:checked').val() == 'edit'){
            $("#lowerCounty").show();
        }
        $("#div_radio_add_edit").show();
        $("#school_list").show();
        $("#city_list").show();
        $("#enrollmentSection").show();
        $("#div_school_only_1").show();
        $("#district_list").hide();
        $("#county_list").hide();
        $("#detailsLabel").html("School Details");
        $("#entityName").html("School Name");
        $("#category").val("edit_school");
        $("#verificationNote").html("Please provide a website that will help us verify your role at the school, such as a homepage or faculty page.");
        $("#webSiteLabel").html("School web site");

    }
    if($('input:radio[name=schoolOrDistrict]:checked').val() == 'district'){
        $("#div_choose_state").show();
        $("#div_school_type").hide();
        $("#enrollmentSection").hide();
        $("#div_radio_add_edit").hide();
        $("#school_list").hide();
        $("#city_list").hide();
        $("#district_list").show();
        $("#county_list").show();
        $("#div_school_only_1").hide();
        $("input[name=addEdit][value=edit]").prop('checked', true);
        $("#detailsLabel").html("District Details");
        $("#entityName").html("District Name");
        $("#lowerCounty").hide();
        $("#category").val("edit_district");
        $("#verificationNote").html("Please provide a website that will help us verify your role at the district, such as a homepage or faculty page.");
        $("#webSiteLabel").html("District web site");
        do_add_edit($("#addEditSchoolOrDistrictCommand_state").val());
    }
}


function doSchoolType(schoolType){
    //removeAttr IS BAD! It makes it not work on some browsers!!!

   // $("input[name=schoolType][value=private]").removeAttr('checked');
   // $("input[name=schoolType][value=public]").removeAttr('checked');
   // $("input[name=schoolType][value=charter]").removeAttr('checked');
    $("input[name=schoolType][value=private]").prop('checked', false);
    $("input[name=schoolType][value=public]").prop('checked', false);
    $("input[name=schoolType][value=charter]").prop('checked', false);
    if(schoolType == "private"){
        //$("input[name=schoolType][value=private]").attr('checked', 'checked');
        $("input[name=schoolType][value=private]").prop('checked', true);
    }
    if(schoolType == "public"){
        //$("input[name=schoolType][value=public]").attr('checked', 'checked');
        $("input[name=schoolType][value=public]").prop('checked', true);
    }
    if(schoolType == "charter"){
        //$("input[name=schoolType][value=charter]").attr('checked', 'checked');
        $("input[name=schoolType][value=charter]").prop('checked', true);
    }
    doSchoolTypeSections();
}

function doPreschoolYesNo(bilingual,specialEd,computers,extendedCare){
    $("select[name=bilingual]").val(bilingual);
    $("select[name=specialEd]").val(specialEd);
    $("select[name=computers]").val(computers);
    $("select[name=extendedCare]").val(extendedCare);
}



function doGradesForEntity(gradestring){
    var array =  "PK,KG,1,2,3,4,5,6,7,8,9,10,11,12".split(',');
    $.each(array, function(index, value) {
        $("input[name=grades][value=" + value + "]").prop('checked', false);
    });

    array = gradestring.split(',');
    $.each(array, function(index, value) {
        $("input[name=grades][value=" + value + "]").prop('checked', true);
    });
    doPKOnly();
}

function doPKSubtypes(pksubtypes){
    var array =  "kiddie_academy,rainbow_child,kids_r_us,primrose,american_child_care,employer_corporate_sponsored,childrens_discovery,federal_based,family_day_residence,military,head_start,hospital_centers,tutor_time,kindercare,la_petite_academy,new_horizon,other_chain,bright_horizons,childtime_learning_center,independent,college_university_based,salvation_army,childrens_world,sunshine_house,ymca_ywca,goddard".split(',');
    $.each(array, function(index, value) {
        $("input[name=preschoolSubtype][value=" + value + "]").prop('checked', false);
    });

    array = pksubtypes.split(',');
    $.each(array, function(index, value) {
        $("input[name=preschoolSubtype][value=" + value + "]").prop('checked', true);
    });
}

function doConnection(){
    if($("#submitterConnectionToSchool").val() == "Other"){
        $("#submitterConnectionToSchoolTextSection").show();
    }else{
        $("#submitterConnectionToSchoolTextSection").hide();
    }

}

function clear_values(){
    doGradesForEntity( ""  );
    doSchoolType("");

    $("#verificationUrl").val("");
    $("#name").val("");
    $("#street").val("");
    $("#streetLine2").val("");
    $("#city").val("");
    $("#Zipcode").val("");
    $("#enrollment").val("");
    $("#phone").val("");
    $("#fax").val("");
    $("#webSite").val("");
    $("#headOfficialName").val("");
    $("#headOfficialEmail").val("");
    $("#startTime").val("");
    $("#endTime").val("");
    $("#affiliation").val("");
    $("#association").val("");
    $("select[name=gender]").val("");

    $("select[name=lowAge]").val("");
    $("select[name=highAge]").val("");

    doPreschoolYesNo("","","","");
    doPKSubtypes("");
    $("#addEditSchoolOrDistrictCommand_cityName").val("");
    $("#addEditSchoolOrDistrictCommand_schoolId").val("");
    $("#addEditSchoolOrDistrictCommand_schoolId").html("<option value=''> -- Choose School -- </option>");
    $("#addEditSchoolOrDistrictCommand_districtId").val("");
    $("#addEditSchoolOrDistrictCommand_districtId").html("<option value=''> -- Choose District -- </option>");
    $("#addEditSchoolOrDistrictCommand_county").val("");
    $("#schoolDistrictFields").hide();
    $("#schoolDistFieldsDisplayed").val("false");
    $("#div_choose_state").hide();

    /*var $radios = $('input:radio[name=applicable]');
    if($radios.is(':checked') === false) {
        $radios.filter('[value=now]').prop('checked', true);
    } */

    $('input:radio[name=applicable]').filter('[value=now]').prop('checked', true);

    $("select[name=open]").val("");
    //if($('input:radio[name=schoolOrDistrict]:checked').val() == 'school'){
        //if($('input:radio[name=addEdit]:checked').val() == 'edit'){
    //$('input:radio[name=applicable]:checked').prop('checked', true);
    //$("#applicable").val("now");
    $("#applicableSeasonSelect").val("");
    $("#applicableYearSelect").val("");
    $("#whenOpen").val("");
    $("#openSeasonSelect").val("");
    $("#openYearSelect").val("");
    $("#whenOpen").hide();
    $("#applicableSeasonYear").hide();

}


//nChange="doWhenOpen();" styleId="openSelect"

/*
 <input type="radio" name="whenApplicable" id="whenApplicableNow" onclick="showWhenApplicable()" value="now">Now</input>
 <input type="radio" name="whenApplicable" id="whenApplicableLater" onclick="showWhenApplicable()" value="later">Later</input>
 <br/>
 <form:select path="applicableSeason">
 <form:option value="" label="-Select Season-"/>
 <form:options items="${requestScope.applicableSeason}" itemValue="value" itemLabel="name" id='applicableSeasonSelect'/>
 </form:select>

 <form:select path="applicableYear" id="applicableYearSelect">

 */

function showWhenApplicable(){
    if($('input:radio[name=applicable]:checked').val() == 'later'){
        //$("#applicableSeason").show();
        //$("#applicableYear").show();
        $("#applicableSeasonYear").show();

    }else{
        //$("#applicableSeason").hide();
        //$("#applicableYear").hide();
        $("#applicableSeasonSelect").val("");
        $("#applicableYearSelect").val("");
        $("#applicableSeasonYear").hide();
    }
}
function doWhenOpen(){
    if($('input:radio[name=schoolOrDistrict]:checked').val() == 'school'){
        $("#isSchoolOpen").show();
    }else{
        $("#isSchoolOpen").hide();
    }
    if($('input:radio[name=addEdit]:checked').val() == 'edit'){
        $("#openQuestion").val("Is this school closing?");
        if($("#openSelect").val() == "Yes"){
            $("#whenOpenQuestion").val("When will this school close?" + " <span class=\"required\">*</span>");
            $("#whenOpen").show();
        }else{
            $("#whenOpen").hide();
        }
    }else if($('input:radio[name=addEdit]:checked').val() == 'add'){
        $("#openQuestion").val("Is this school open yet?");
        if($("#openSelect").val() == "No"){
            $("#whenOpenQuestion").val("When will this school open?" + " <span class=\"required\">*</span>");
            $("#whenOpen").show();
        }else{
            $("#whenOpen").hide();
        }
    }
}
function do_add_edit(state,clear){
    if(clear == "1"){
        clear_values();
    }


    $("#addEditSchoolOrDistrictCommand_state").val(state);

    $("#addEditSchoolOrDistrictCommand_state").change(function() {
        $("#addEditSchoolOrDistrictCommand_schoolId").val("");
        $("#addEditSchoolOrDistrictCommand_districtId").val("");
        $("#addEditSchoolOrDistrictCommand_schoolId").html("<select>- Choose School -</select>");
        $j.ajax({
            url: '/community/registrationAjax.page',
            dataType: 'text',
            data: ({
                'state' : $("#addEditSchoolOrDistrictCommand_state").val(),
                'type' : 'cityOptions'
            }),
            success: function(data) {
                $("#addEditSchoolOrDistrictCommand_cityName").html(data);
            }
        });
        $j.ajax({
            url: '/community/registrationAjax.page',
            dataType: 'text',
            data: ({
                'state' : $("#addEditSchoolOrDistrictCommand_state").val(),
                'type' : 'county'
            }),
            success: function(data) {
                $("#addEditSchoolOrDistrictCommand_county").html(data);
                //$("#addEditSchoolOrDistrictCommand_county").html(data);
            }
        });
    });

    $("#addEditSchoolOrDistrictCommand_county").change(function() {
        /*alert($("#addEditSchoolOrDistrictCommand_county").val()
                + ":" + $("#addEditSchoolOrDistrictCommand_districtId").val()
                + ":" + $("#addEditSchoolOrDistrictCommand_schoolId").val()
        );     */
        $j.ajax({
            url: '/test/districtsInCity.page',
            dataType: 'text',
            data: ({
                state : $("#addEditSchoolOrDistrictCommand_state").val(),
                county : $("#addEditSchoolOrDistrictCommand_county").val(),
                printOptionsOnly: 'true',
                chooseDistrictLabel: '- Choose County -'
            }),
            success: function(data) {
                $("#addEditSchoolOrDistrictCommand_districtId").html(data);
                if(data == "no districts"){
                    $("#district_list").hide();
                }else{
                    if($('input:radio[name=schoolType]:checked').val() != 'private'){
                        $("#district_list").show();
                    }
                }
                if($('input:radio[name=schoolType]:checked').val() == 'private' || $('input:radio[name=schoolType]:checked').val() == 'charter' || $("#addEditSchoolOrDistrictCommand_state").val() == "HI"){
                    $("#schoolDistrictFields").show();
                    $("#schoolDistFieldsDisplayed").val("true");
                }
            }
        });
    });

    $("#addEditSchoolOrDistrictCommand_cityName").change(function() {
        $j.ajax({
            url: '/test/schoolsInCity.page',
            dataType: 'text',
            data: ({
                state : $("#addEditSchoolOrDistrictCommand_state").val(),
                city : $("#addEditSchoolOrDistrictCommand_cityName").val(),
                printOptionsOnly: 'true',
                includePrivateSchools: 'true',
                chooseSchoolLabel: '- Choose School -'
            }),
            success: function(data) {
                $("#addEditSchoolOrDistrictCommand_schoolId").html(data);
            }
        });

        $j.ajax({
            url: '/test/districtsInCity.page',
            dataType: 'text',
            data: ({
                state : $("#addEditSchoolOrDistrictCommand_state").val(),
                city : $("#addEditSchoolOrDistrictCommand_cityName").val(),
                printOptionsOnly: 'true',
                chooseDistrictLabel: '- Choose District -'
            }),
            success: function(data) {
                $("#addEditSchoolOrDistrictCommand_districtId").html(data);
                if(data == "no districts"){
                    $("#district_list").hide();
                }
            }
        });

        $("#city").val($("#addEditSchoolOrDistrictCommand_cityName").val());
    });

    $("#addEditSchoolOrDistrictCommand_schoolId").change(function() {
        $j.ajax({
            cache: false,
            url: '/test/entityInfo.page?nocache='+Math.random(),
            dataType: 'text',
            data: ({
                'state' : $("#addEditSchoolOrDistrictCommand_state").val(),
                'id' : $("#addEditSchoolOrDistrictCommand_schoolId").val() ,
                'entityType' : $('input:radio[name=schoolOrDistrict]:checked').val()
            }),
            success: function(data) {
                var obj = jQuery.parseJSON(data);
                doGradesForEntity( obj.grades  );
                doSchoolType(obj.schoolType);

                $("#name").val(obj.name);
                $("#street").val(obj.street);
                $("#streetLine2").val(obj.streetLine2);
                $("#city").val(obj.city);
                $("#Zipcode").val(obj.Zipcode);
                $("#addEditSchoolOrDistrictCommand_county1").val(obj.county);
                $("#enrollment").val(obj.enrollment);
                $("#phone").val(obj.phone);
                $("#fax").val(obj.fax);
                $("#webSite").val(obj.webSite);
                $("#headOfficialName").val(obj.headOfficialName);
                $("#headOfficialEmail").val(obj.headOfficialEmail);
                $("#startTime").val(obj.startTime);
                $("#endTime").val(obj.endTime);
                $("#affiliation").val(obj.affiliation);
                $("#association").val(obj.association);
                $("select[name=gender]").val(obj.gender);

                $("select[name=lowAge]").val(obj.lowAge);
                $("select[name=highAge]").val(obj.highAge);

                doPreschoolYesNo(obj.bilingual,obj.specialEd,obj.computers,obj.extendedCare);
                doPKSubtypes(obj.preschoolSubtype);
                $("#schoolDistrictFields").show();
                $("#schoolDistFieldsDisplayed").val("true");

            }
        });
        if($("#addEditSchoolOrDistrictCommand_schoolId").val() == ""){
            $("#schoolDistrictFields").hide();
            $("#schoolDistFieldsDisplayed").val("false");
        }else{
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }

    });


    $("#addEditSchoolOrDistrictCommand_districtId").change(function() {
        if($('input:radio[name=schoolOrDistrict]:checked').val() == 'district'){
            $j.ajax({
                cache: false,
                url: '/test/entityInfo.page?nocache='+Math.random(),
                dataType: 'text',
                data: ({
                    'state' : $("#addEditSchoolOrDistrictCommand_state").val(),
                    'id' : $("#addEditSchoolOrDistrictCommand_districtId").val() ,
                    'entityType' : $('input:radio[name=schoolOrDistrict]:checked').val()
                }),
                success: function(data) {
                    var obj = jQuery.parseJSON(data);

                    doGradesForEntity( obj.grades  );

                    $("#name").val(obj.name);
                    $("#street").val(obj.street);
                    $("#streetLine2").val(obj.streetLine2);
                    $("#city").val(obj.city);
                    $("#Zipcode").val(obj.Zipcode);
                    $("#addEditSchoolOrDistrictCommand_county").val(obj.county);
                    $("#enrollment").val(obj.enrollment);
                    $("#phone").val(obj.phone);
                    $("#fax").val(obj.fax);
                    $("#webSite").val(obj.webSite);
                    $("#headOfficialName").val(obj.headOfficialName);
                    $("#headOfficialEmail").val(obj.headOfficialEmail);
                    $("#schoolDistrictFields").show();
                    $("#schoolDistFieldsDisplayed").val("true");
                }
            });
        }

        if($("#addEditSchoolOrDistrictCommand_districtId").val() == ""){
            $("#schoolDistrictFields").hide();
            $("#schoolDistFieldsDisplayed").val("false");
        }else{
            $("#schoolDistrictFields").show();
            $("#schoolDistFieldsDisplayed").val("true");
        }


    });
    //doAddEditSections();
    doAddEditSections(clear);
}



$(document).ready(function(){

    document.getElementById('formAddEdit').reset();
    do_radio_school_district();
    do_add_edit($("#addEditSchoolOrDistrictCommand_state").val());
    showSchoolDistrictFields();
    showWhenApplicable();
    doWhenOpen();
    doPKOnly();
    if ($('#addEditSchoolOrDistrictCommand_schoolId').val() != '') {
        // if a school is pre-selected, force an ajax call to fetch the details
        $('#addEditSchoolOrDistrictCommand_schoolId').trigger('change');
    } else if ($('#addEditSchoolOrDistrictCommand_districtId').val() != '') {
        $('#addEditSchoolOrDistrictCommand_districtId').trigger('change');
    }
    //var county=  $("#addEditSchoolOrDistrictCommand_county").val();
    //$("#addEditSchoolOrDistrictCommand_county").val("");
    //$("#addEditSchoolOrDistrictCommand_county").val(county);
    //$("#addEditSchoolOrDistrictCommand_county").trigger("change");
    //alert($("#addEditSchoolOrDistrictCommand_county").val() + ":" + $("#districtId").val())
    //$("#addEditSchoolOrDistrictCommand_districtId").trigger("change");


    Recaptcha.create(
            "6LdG4wkAAAAAAHVSQPDpiPPjz4w5PB28eZj8yhlL",
            "addEdit_captcha",
            {
                theme: "white"
            });

});

jQuery(document).ready(function() {
    jQuery('#startTime').ptTimeSelect();
    jQuery('#endTime').ptTimeSelect();

});



//-->
]]>
</script>

<pageHelper:externalCss file="/res/css/about/feedback/addEditSchoolOrDistrict.css"/>
</head>

<gsml:body adPageName="addEditSchoolOrDistrict" pageLayout="nocol">

<div class="content">

<div class="pageTitle">
    <h2>Add or edit your school or district on the GreatSchools web site</h2>
</div>

<form:form action="/about/feedback/addEditSchoolOrDistrict.page" method="post"    commandName="addEditSchoolOrDistrictCommand"
           id="formAddEdit"
           onsubmit="addEdit_challenge.value = Recaptcha.get_challenge(); addEdit_response.value = Recaptcha.get_response();">




<div class="field">
    <div class="fieldLabel">Your name <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.submitterName">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="submitterName" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Your email address <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.submitterEmail">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="submitterEmail" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Re-enter your email for verification <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.submitterEmailConfirm">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="submitterEmailConfirm" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Your connection to the school <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.submitterConnectionToSchool">
            <form:select path="submitterConnectionToSchool" onchange="doConnection();">
                <form:option value="" label="- Choose one -"/>
                <form:options items="${requestScope.submitterConnectionToSchool}" itemValue="value" itemLabel="name"/>
            </form:select>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="submitterConnectionToSchool" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field" id="submitterConnectionToSchoolTextSection">
    <div class="fieldLabel">Your connection to the school <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.submitterConnectionToSchoolText">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="submitterConnectionToSchoolText" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="personalInfoMessage">
    Your personal information is confidential and will only be used in case we need to contact you
    to follow up on the school you submit.<br/>
    Please see our
    <link:privacyPolicy target="_blank">Privacy Policy</link:privacyPolicy> for more information.
</div>
<!--  do_radio_school_district(1) -->
<div class="field" id="div_radio_school_district">
    <div class="fieldLabel">Is this a school or district? <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.schoolOrDistrict">
            <c:forEach var="myTc" items="${requestScope.schoolOrDistrict}">
                <gsml:radio name="${status.expression}" value="${myTc}"
                            onclick="showWhatIsNecessary(1)"
                            checked="${myTc == status.value}"/> ${myTc}
            </c:forEach>

        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="schoolOrDistrict" useImage="true" styleClass="warning"/>
    </div>
</div>
<!--  do_add_edit('${state}',1) -->
<div class="field" id="div_radio_add_edit">
    <div class="fieldLabel">What would you like to do? <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.addEdit">
            <c:forEach var="myTc" items="${requestScope.addEdit}">
                <gsml:radio name="${status.expression}" value="${myTc}" onclick="showWhatIsNecessary(1)"
                            checked="${myTc == status.value}"/> ${myTc}
            </c:forEach>

        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="addEdit" useImage="true" styleClass="warning"/>
    </div>
</div>
<!-- doSchoolTypeSections() -->
<div class="field" id="div_school_type">
    <div class="fieldLabel">What type of school is it? <span class="required">*</span></div>
    <div class="fieldInput">

        <spring:bind path="addEditSchoolOrDistrictCommand.schoolType">
            <c:forEach var="myTc" items="${requestScope.schoolType}">
                <gsml:radio name="${status.expression}" value="${myTc.value}" onclick="showWhatIsNecessary()"
                            checked="${myTc.value == status.value}"/> ${myTc.key}
            </c:forEach>

        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="schoolType" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field" id="div_choose_state">

    <fieldset class="fieldset1 bg-ebebeb">
        <legend class="legend1">
            <span class="legend1-position" id="details_label">School Details</span>
        </legend>
        <ol class="formlist1">

            <form:hidden path="challenge" id="addEdit_challenge"/>
            <form:hidden path="response" id="addEdit_response"/>
            <form:hidden path="category" id="category" value="add_edit"/>
            <form:hidden path="schoolDistFieldsDisplayed" id="schoolDistFieldsDisplayed" value="false"/>

            <li class="fl1-item">
                <form:label cssClass="label1 text2bold" path="state" for="addEditSchoolOrDistrictCommand.state">
                    State <em class="sprite i-required requiredIndicator1"><!-- do not collapse --></em>
                </form:label>
                <form:select path="state" id="addEditSchoolOrDistrictCommand_state">
                    <form:option value="" label="- Choose state -"/>
                    <form:options items="${requestScope.stateOptions}" itemValue="value" itemLabel="name"/>
                </form:select>
                <form:errors path="state">
                    <c:forEach items="${messages}" var="message"> 
                        <strong class="errorMessage1 formErrorText">
                            <span class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
                        </strong>
                    </c:forEach>
                </form:errors>
            </li>

            <li class="fl1-item" id="city_list">
                <form:label cssClass="label1 text2bold" path="cityName" for="addEditSchoolOrDistrictCommand.cityName">
                    City <em class="sprite i-required requiredIndicator1"><!-- do not collapse --></em>
                </form:label>
                <form:select path="cityName" id="addEditSchoolOrDistrictCommand_cityName">
                    <form:option value="" label="- Choose city -"/>
                    <form:options items="${requestScope.cityOptions}" itemValue="value" itemLabel="name"/>
                </form:select>
                <form:errors path="cityName">
                    <c:forEach items="${messages}" var="message"> 
                        <strong class="errorMessage1 formErrorText">
                            <span class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
                        </strong>
                    </c:forEach>
                </form:errors>
            </li>

            <li class="fl1-item" id="school_list">
                <form:label cssClass="label1 text2bold" path="schoolId" for="addEditSchoolOrDistrictCommand.schoolId">
                    School <em class="sprite i-required requiredIndicator1"><!-- do not collapse --></em>
                </form:label>
                <form:select path="schoolId" id="addEditSchoolOrDistrictCommand_schoolId">
                    <form:option value="" label="- Choose School -"/>
                    <form:options items="${requestScope.schoolOptions}" itemValue="value" itemLabel="name"/>
                </form:select>
                <form:errors path="schoolId">
                    <c:forEach items="${messages}" var="message"> 
                        <strong class="errorMessage1 formErrorText">
                            <span class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
                        </strong>
                    </c:forEach>
                </form:errors>
            </li>

            <li class="fl1-item" id="county_list">
                <form:label cssClass="label1 text2bold" path="county" for="addEditSchoolOrDistrictCommand.county">
                    County <em class="sprite i-required requiredIndicator1"><!-- do not collapse --></em>
                </form:label>
                <form:select path="county" id="addEditSchoolOrDistrictCommand_county">
                    <form:option value="" label="- Choose county -"/>
                    <form:options items="${requestScope.countyOptions}" itemValue="value" itemLabel="name"/>
                </form:select>
                <form:errors path="county">
                    <c:forEach items="${messages}" var="message"> 
                        <strong class="errorMessage1 formErrorText">
                            <span class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
                        </strong>
                    </c:forEach>
                </form:errors>
            </li>

            <li class="fl1-item" id="district_list">
                <form:label cssClass="label1 text2bold" path="districtId" for="addEditSchoolOrDistrictCommand.districtId" id="districtLabel">
                    District <em class="sprite i-required requiredIndicator1"><!-- do not collapse --></em>
                </form:label>
                <form:select path="districtId" id="addEditSchoolOrDistrictCommand_districtId">
                    <form:option value="" label="- Choose District -"/>
                    <form:options items="${requestScope.districtOptions}" itemValue="value" itemLabel="name"/>
                </form:select>
                <form:errors path="districtId">
                    <c:forEach items="${messages}" var="message"> 
                        <strong class="errorMessage1 formErrorText">
                            <span class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
                        </strong>
                    </c:forEach>
                </form:errors>
            </li>
        </ol>
    </fieldset>
</div>

<div id="schoolDistrictFields">

<div class="field">
    <div class="fieldLabel">Verification web site</div>
    <div class="fieldInput">
        <spring:bind path="verificationUrl">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput"/>
        </spring:bind>
        <div class="addEditHint" id="verificationNote">Please provide a website that will help us verify your role at the school, such as a homepage or faculty page.</div>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="verificationUrl" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field" id="whenApplicable">
    <div class="fieldLabel">When are these changes applicable?</div>
    <div class="fieldInput">
        <spring:bind path="applicable">
            <c:forEach var="myTc" items="${requestScope.applicable}">
                <gsml:radio name="${status.expression}" value="${myTc.value}" onclick="showWhenApplicable()"
                            checked="${myTc.value == status.value}"/> ${myTc.key}
            </c:forEach>

        </spring:bind>
        <!--
        <input type="radio" name="applicable" value="later" onclick="showWhenApplicable()" /> Later
        <input type="radio" name="applicable" value="now" onclick="showWhenApplicable()" selected="selected"/> Now
        -->
        <!-- <input type="radio" name="whenApplicable" id="whenApplicableNow" onclick="showWhenApplicable()" value="now">Now</input>
        <input type="radio" name="whenApplicable" id="whenApplicableLater" onclick="showWhenApplicable()" value="later">Later</input>   -->
        <div id="applicableSeasonYear">
        <form:select path="applicableSeason" id='applicableSeasonSelect'>
            <form:option value="" label="-Select Season-"/>
            <form:options items="${requestScope.applicableSeason}" itemValue="value" itemLabel="name"/>
        </form:select>

        <form:select path="applicableYear" id="applicableYearSelect">
            <form:option value="" label="-Select Year-"/>
            <form:options items="${requestScope.applicableYear}" itemValue="value" itemLabel="name" />
        </form:select>
        </div>
    </div>
</div>



<div class="field" id="isSchoolOpen">
    <div class="fieldLabel" id="openQuestion">Is this school open yet?</div>
    <div class="fieldInput">
        <spring:bind path="open">
            <gsweb:yesNoSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true" onChange="doWhenOpen();" styleId="openSelect"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="open" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field" id="whenOpen">
    <div class="fieldLabel" id="whenOpenQuestion">When will this school open? <span class="required">*</span></div>
    <div class="fieldInput">
        <form:select path="openSeason" id='openSeasonSelect'>
            <form:option value="" label="-Select Season-"/>
            <form:options items="${requestScope.openSeason}" itemValue="value" itemLabel="name"/>
        </form:select>

        <form:select path="openYear" id="openYearSelect">
            <form:option value="" label="-Select Year-"/>
            <form:options items="${requestScope.openYear}" itemValue="value" itemLabel="name"/>
        </form:select>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="openSeason" useImage="true" styleClass="warning"/>
    </div>
</div>

<!--  doPKOnly() -->
<div id="div_grades">
    <div class="field">
        <div class="fieldLabel">Grades <span class="required">*</span></div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.grades">
                <c:forEach var="myTc" items="${requestScope.gradesList}">
                    <c:set var ="checked" value ="false"/>
                    <c:forEach items="${status.value}" var="s">
                        <c:if test="${s == myTc}"><c:set var ="checked" value ="true"/></c:if>
                    </c:forEach>
                    <gsml:checkbox name="${status.expression}" value="${myTc}"
                                   checked="${checked}" onclick="showWhatIsNecessary();" styleClass="gradecheck"/> ${myTc}
                </c:forEach>

            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="grades" useImage="true" styleClass="warning"/>
        </div>
    </div>
</div>

<div class="field">
    <div class="fieldLabel"><span id="entityName">Name</span> <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.name">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="name"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="name" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Street address <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.street">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="street"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="street" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Street line 2</div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.streetLine2">
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="streetLine2"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="streetLine2" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">City <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.city"><!--  -->
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="city"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="city" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Zipcode <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.Zipcode"><!--  -->
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="Zipcode"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="Zipcode" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field" id="lowerCounty">
    <div class="fieldLabel">County <span class="required">*</span></div>
    <div class="fieldInput">
        <form:select path="county1" id="addEditSchoolOrDistrictCommand_county1">
            <form:option value="" label="- Choose county -"/>
            <form:options items="${requestScope.countyOptions}" itemValue="value" itemLabel="name"/>
        </form:select>
        <form:errors path="county1">
            <c:forEach items="${messages}" var="message"> 
                <strong class="errorMessage1 formErrorText">
                    <span class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
                </strong>
            </c:forEach>
        </form:errors>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="county1" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field" id="enrollmentSection">
    <div class="fieldLabel" id="enrollmentLabel">Enrollment</div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.enrollment"><!--  -->
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="enrollment"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="enrollment" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Phone <span class="required">*</span></div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.phone"><!--  -->
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="phone"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="phone" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Fax</div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.fax"><!--  -->
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="fax"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="fax" useImage="true" styleClass="warning"/>
    </div>
</div>

<div class="field">
    <div class="fieldLabel" id="webSiteLabel">School web site</div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.webSite"><!--  -->
            <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="webSite"/>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="webSite" useImage="true" styleClass="warning"/>
    </div>
</div>

<div id="headOfficialSection">
    <div class="field">
        <div class="fieldLabel">Head official name</div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.headOfficialName"><!--  -->
                <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="headOfficialName"/>
            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="headOfficialName" useImage="true" styleClass="warning"/>
        </div>
    </div>

    <div class="field">
        <div class="fieldLabel">Head official email</div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.headOfficialEmail"><!--  -->
                <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="headOfficialEmail"/>
            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="headOfficialEmail" useImage="true" styleClass="warning"/>
        </div>
    </div>
</div>

<div id="div_school_only_1">
    <div class="field">
        <div class="fieldLabel">Start time</div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.startTime"><!--  -->
                <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="startTime"/>
            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="startTime" useImage="true" styleClass="warning"/>
        </div>
    </div>

    <div class="field">
        <div class="fieldLabel">End time</div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.endTime"><!--  -->
                <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="endTime"/>
            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="endTime" useImage="true" styleClass="warning"/>
        </div>
    </div>


    <div id="privateSection1">
        <div class="field">
            <div class="fieldLabel">Affiliation</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.affiliation"><!--  -->
                    <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="affiliation"/>
                </spring:bind>
            </div>
            <div class="fieldNote">
                <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="affiliation" useImage="true" styleClass="warning"/>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Association</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.association"><!--  -->
                    <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="association"/>
                </spring:bind>
            </div>
            <div class="fieldNote">
                <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="association" useImage="true" styleClass="warning"/>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Gender</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.gender">
                    <select name="gender">
                        <option value="">--</option>
                        <option value="coed">Coed</option>
                        <option value="all_female">All female</option>
                        <option value="all_male">All male</option>
                    </select>
                </spring:bind>
            </div>
            <div class="fieldNote">
                <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="gender" useImage="true" styleClass="warning"/>
            </div>
        </div>

    </div>

    <div id="div_preschool_only">

        <div class="field">
            <div class="fieldLabel">Lowest age served <span class="required">*</span></div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.lowAge">
                    <gsweb:lowestAgeServedSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true"/>
                </spring:bind>
            </div>
            <div class="fieldNote">
                <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="lowAge" useImage="true" styleClass="warning"/>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Highest age served <span class="required">*</span></div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.highAge">
                    <gsweb:highestAgeServedSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true"/>
                </spring:bind>
            </div>
            <div class="fieldNote">
                <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="highAge" useImage="true" styleClass="warning"/>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Bilingual education offered</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.bilingual">
                    <gsweb:yesNoSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true"/>
                </spring:bind>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Special education programs offered</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.specialEd">
                    <gsweb:yesNoSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true"/>
                </spring:bind>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Computers present in the classroom</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.computers">
                    <gsweb:yesNoSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true"/>
                </spring:bind>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Extended care available</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.extendedCare">
                    <gsweb:yesNoSelector name="${status.expression}" selectedValue="${status.value}" useNoResponse="true"/>
                </spring:bind>
            </div>
        </div>

        <div class="field">
            <div class="fieldLabel">Which type of preschool is it?</div>
            <div class="fieldInput">
                <spring:bind path="addEditSchoolOrDistrictCommand.preschoolSubtype">
                    <c:forEach var="myTc" items="${requestScope.preschoolSubtype}">
                        <c:set var ="checked" value ="false"/>
                        <c:forEach items="${status.value}" var="s">
                            <c:if test="${s == myTc}"><c:set var ="checked" value ="true"/></c:if>
                        </c:forEach>
                        <gsml:checkbox name="${status.expression}" value="${myTc}"
                                       checked="${checked}" styleClass="pksubtype"/> ${psMap[myTc]}  <br/>
                    </c:forEach>

                </spring:bind>
            </div>
            <div class="fieldNote">
                <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="preschoolSubtype" useImage="true" styleClass="warning"/>
            </div>
        </div>
    </div>
</div>
<div id="computerInfo">
    <div class="field">
        <div class="fieldLabel">Operating system</div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.operatingSystem"><!--  -->
                <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="operatingSystem"/>
            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="operatingSystem" useImage="true" styleClass="warning"/>
        </div>
    </div>

    <div class="field">
        <div class="fieldLabel">Browser</div>
        <div class="fieldInput">
            <spring:bind path="addEditSchoolOrDistrictCommand.browser"><!--  -->
                <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="browser"/>
            </spring:bind>
        </div>
        <div class="fieldNote">
            <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="browser" useImage="true" styleClass="warning"/>
        </div>
    </div>
</div>

<div class="field">
    <div class="fieldLabel">Enter Comments or Questions Here</div>
    <div class="fieldInput">
        <spring:bind path="addEditSchoolOrDistrictCommand.contactNotes"><!--  -->
            <!-- <input type="text" name="${status.expression}" value="${status.value}" class="textInput" id="contactNotes"/>   -->
            <textarea type="text" name="${status.expression}" id="contactNotes">${status.value}</textarea>
        </spring:bind>
    </div>
    <div class="fieldNote">
        <gsml:errorMessage command="addEditSchoolOrDistrictCommand" field="contactNotes" useImage="true" styleClass="warning"/>
    </div>
</div>



</div>




<div><p>&amp;nbsp;</p></div>
<li class="fl1-item">
    <div class="captcha" id="addEdit_captcha">
        <!-- no collapse -->
    </div>
    <form:errors path="response">
        <c:forEach items="${messages}" var="message"> 
            <strong class="captcha errorMessage1 formErrorText"><span
                    class="sprite i-alert"><!-- do not collapse --></span>&amp;nbsp;${message}
            </strong>
        </c:forEach>
    </form:errors>
</li>

<div id="submitButton">
    <input type="image" name="_submit" value="Submit" alt="Submit" src="/res/img/button/btn_submit.gif"/>
</div>



</form:form>

<p>
    We thoroughly validate information submitted through this form.
    If we cannot verify the accuracy of the information, the changes will not be made.
    There is no charge to submit changes.
</p>






</div>
<mod:tracking pageName="${pageName}"
              hier1="Home,ContactUs,${pageName}"/>

</gsml:body>
</html>
</jsp:root>
