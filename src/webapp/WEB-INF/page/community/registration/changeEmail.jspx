<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsweb="gstaglib"
          xmlns="http://www.w3.org/1999/xhtml" version="2.0">
    <jsp:directive.page import="gs.web.util.context.SessionContextUtil"/>
    <jsp:directive.page contentType="text/html"/><html>
  <pageHelper:setPathway pathway="COMMUNITY_LANDING"/>
  <head>
      <title>Change Email - GreatSchools</title>
  </head>
  <gsml:body adPageName="changeEmail">
      <![CDATA[
      <!--[if IE]>
        <style type="text/css">
          #outline ul li .errorText {
            top: 8px;
          }
        </style>
      <![endif]-->
      ]]>

      <div id="mainGS" class="col">
          <div class="spacer_10"><!-- do not collapse --></div>

              <div class="smallAlertText">
                  <link:home>Home</link:home> &amp;gt; <a href="/account/">My Account</a>
              </div>

          <div class="spacer_10"><!-- do not collapse --></div>

          <div id="topicContentGS" class="clearfix">

              <div id="topicbarGS" class="col">
                  <div class="mod">
                      <div class="navmod_hd">
                          <h5>Manage my account</h5>
                      </div>
                      <div class="navmod_bd">
                          <ul class="text2">
                              <li>Update Email Address</li>
                              <li><link:resetPassword>Change My Password</link:resetPassword></li>
                              <li><link:newsletterManagement>Manage Newsletters</link:newsletterManagement></li>
                              <li><link:mySchoolList>Edit My School List</link:mySchoolList></li>
                          </ul>
                      </div>
                  </div>

              </div>
              <!-- end #topicbarGS -->

              <div id="topicMainGS" class="col">
                  <div id="changeEmail">
                      <h3 class="title2-d61">Update email address</h3>

                      <div class="spacer_5"><!-- do not collapse --></div>
                      <p class="text3">Please enter a new email address for your account in the form below. Keep in mind that you'll need to verify your new email before you're able to sign in again.</p>

                      <gsweb:form action="/community/changeEmail.page" method="post">
                          <fieldset class="changeEmail">
                              <ul>
                                  <li>
                                      <label class="text2bold">Current email address:</label>
                                      <span class="text2-777">${requestScope.context.email}</span>
                                  </li>
                                  <li>
                                      <label for="newEmailField" class="text2bold">New email address:</label>
                                      <spring:bind path="emailCmd.newEmail">
                                          <input id="newEmailField" class="text2" type="text" name="${status.expression}"
                                                 value="${status.value}" tabindex="2"/>
                                      </spring:bind>
                                      <!-- hack because the built in email validator rejects the field named "email" -->
                                      <spring:hasBindErrors name="emailCmd">
                                          <spring:bind path="emailCmd.email">
                                              <c:if test="${status.errorMessage gt '' or status.errorCode gt ''}">
                                                  <gsml:img src="/res/img/bullet/icon_warning_12x12.gif"
                                                            alt="Error" styleClass="errorImage"/>

                                                  <p class="errorText"><spring:message code="${status.errorCode}"
                                                                                       text="${status.errorMessage}"/>
                                                  </p>
                                              </c:if>
                                          </spring:bind>
                                          <spring:bind path="emailCmd.newEmail">
                                              <c:if test="${status.errorMessage gt '' or status.errorCode gt ''}">
                                                  <gsml:img src="/res/img/bullet/icon_warning_12x12.gif"
                                                            alt="Error" styleClass="errorImage"/>

                                                  <p class="errorText"><spring:message code="${status.errorCode}"
                                                                                       text="${status.errorMessage}"/>
                                                  </p>
                                              </c:if>
                                          </spring:bind>
                                      </spring:hasBindErrors>
                                  </li>
                                  <li>
                                      <label for="confirmNewEmailField" class="text2bold">Re-type email address:</label>
                                      <spring:bind path="emailCmd.confirmNewEmail">
                                          <!-- disable browser auto-complete for this field -->
                                          <input id="confirmNewEmailField" class="text2" type="text" name="${status.expression}"
                                                 value="${status.value}" tabindex="3" autocomplete="off"/>
                                      </spring:bind>
                                  </li>
                              </ul>
                          </fieldset>
                          <fieldset class="submit">

                              <button type="submit" id="submitButton" name="submit" value="Submit"
                                      class="btn25 fltlft" tabindex="5">
                                  <span class="lftDoor25"><span class="rtDoor25">Save</span></span>
                              </button>
                              <button type="cancel" id="cancelButton" name="cancel" value="Cancel"
                                      class="btn25 fltlft" tabindex="4">
                                  <span class="lftDoor25"><span class="rtDoor25">Cancel</span></span>
                              </button>

                          </fieldset>

                      </gsweb:form>
                  </div>
                  <!-- end changeEmail -->

              </div>
              <!-- end #topicMainGS -->

          </div>
          <!-- end #topicContentGS -->

      </div>
      <!-- end mainGS -->

      <div id="sidebarGS" class="col">
          <!-- do not collapse -->
      </div>
      <!-- end sidebarGS-->

      <mod:tracking pageName="Update Email Address"
                    hier1="Account,Update Email Address"/>
  </gsml:body>
</html>
</jsp:root>