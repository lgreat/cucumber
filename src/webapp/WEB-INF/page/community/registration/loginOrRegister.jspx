<?xml version="1.0" encoding="UTF-8"?>
<jsp:root
        xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions"
        xmlns:spring="http://www.springframework.org/tags"
        xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
        xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
        xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
        xmlns:gsweb="gstaglib"
        xmlns:link="urn:www.greatschools.net/taglib/link"
        >
    <html lang="en">
    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

    <jsp:directive.page contentType="text/html"/>
    <pageHelper:setPathway pathway="99"/>
    <head>
        <![CDATA[
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
            ]]>
        <title>Join &amp;amp; Sign In - GreatSchools</title>
        <pageHelper:externalCss file="/res/css/community/registration/loginOrRegister.css"/>
        <script type="text/javascript">
            function rollover() {
                document.getElementById('joinImage').src = '/res/img/community/registration/join_yellow.gif';
            }
            function rollout() {
                document.getElementById('joinImage').src = '/res/img/community/registration/join_pink.gif';
            }
        </script>
    </head>

    <gsml:body adPageName="login">

    <![CDATA[
    <!--[if IE]>
        <style type="text/css">
            #rememberMe input {
                top: 0;
                left: 90px;
            }
        </style>
    <![endif]-->
    ]]>

    <div id="outline"><!-- creates darker blue outer outline -->
        <div id="newuser">
            <h2>New User?</h2>
            <h3><link:registration email="${loginCmd.email}" redirect="${loginCmd.redirect}">Join our community!</link:registration></h3>

            <link:registration styleId="joinText" email="${loginCmd.email}" redirect="${loginCmd.redirect}">
                Join the GreatSchools community and connect with<br/>
                parents who are passionate about education! <strong>It's free!</strong>
            </link:registration>

            <link:registration email="${loginCmd.email}"
                               redirect="${loginCmd.redirect}">
                <gsml:img src="/res/img/community/registration/motherdaughter_sh.jpg"
                          id="newuserImage" alt="Photo of mom and daughter"
                          onmouseover="rollover();" onmouseout="rollout();"/>
                <gsml:img src="/res/img/community/registration/join_pink.gif"
                          id="joinImage" alt="Join"
                          rollover="/res/img/community/registration/join_yellow.gif"/>
            </link:registration>
        </div>
        <!-- end: newuser -->
        <div id="returninguser">
            <h2>Returning User?</h2>

            <c:set var="messageClass" value=""/>
            <c:if test="${param.message ne null and param.message gt ''}">
                <c:set var="messageClass" value="hasMessage"/>
                <p id="infoMessage">${gsweb:escapeHtml(param.message)}</p>
            </c:if>

            <h3>Yes! I'm already a member</h3>

            <gsweb:form action="/community/loginOrRegister.page" method="post">
                <spring:bind path="loginCmd.redirect">
                    <input type="hidden" name="${status.expression}" value="${status.value}"/>
                </spring:bind>

                <gsml:errorMessage command="loginCmd" styleClass="warning" useImage="true"/>

                <ul id="returninguserForm" class="${messageClass}">
                    <li id="emailAddress">
                        <label>Email address</label>
                        <spring:bind path="loginCmd.email">
                            <input type="text" name="${status.expression}" value="${status.value}"/>
                        </spring:bind>
                    </li>
                    <li id="password">
                        <label>Password</label>
                        <spring:bind path="loginCmd.password">
                            <input type="password" name="${status.expression}" value="${status.value}"/>
                        </spring:bind>
                    </li>
                    <li id="rememberMe">
                        <label class="checkboxLabel" for="rememberMeBox">Keep me logged in</label>
                        <gsml:checkbox name="loginCmd.rememberMe"
                                       checked="${loginCmd.rememberMe}"
                                       styleClass="checkbox" styleId="rememberMeBox"/>
                    </li>
                    <li id="goButton">
                        <gsml:inputImage src="/res/img/community/registration/gobutton.gif"
                                         alt="Sign in"/>
                    </li>
                    <li id="forgotPassword">
                        <c:choose>
                            <c:when test="${loginCmd.email != null and loginCmd.email != ''}">
                                <link:forgotPassword email="${loginCmd.email}" title="Forgot password">Forgot password?</link:forgotPassword>
                            </c:when>
                            <c:otherwise>
                                <link:forgotPassword title="Forgot password">Forgot Password?</link:forgotPassword>
                            </c:otherwise>
                        </c:choose>
                    </li>
                </ul>
            </gsweb:form>
        </div>
        <gsml:img src="/res/img/community/registration/vertical_dots.jpg"
                  alt="Vertical dot divider"
                  id="verticalDots"/>
        <!-- end: returninguser -->
    </div>
    <!-- end: outline -->

    <mod:tracking pageName="Login or Register"
                  pageType="account"
                  hier1="Account,Registration,Login"/>
    </gsml:body>
    </html>
</jsp:root>