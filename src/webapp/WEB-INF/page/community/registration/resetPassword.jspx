<!--
  Created by IntelliJ IDEA.
  User: UrbanaSoft
  Date: Jun 15, 2006
  Time: 9:21:58 AM
  To change this template use File | Settings | File Templates.
-->
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsweb="gstaglib"
          xmlns="http://www.w3.org/1999/xhtml" version="2.0">
    <jsp:directive.page contentType="text/html"/><html>
  <head>
      <title>Reset Password</title>
      <style type="text/css">
           label.form, input.form {
                margin-bottom: 10px;
                display: block;
                width: 120px;
                float: left;
            }

            label.form {
                text-align: right;
                padding-right: 20px;
            }

          h2.intro {
              font-size: large;
          }
          div.error {
                color: red;
                display:block;
                padding:8px;
            }
      </style>
  </head>
  <body>
    <h2 class="intro">Reset Password:</h2>
    <c:if test="${userCmd.email != null and userCmd.email != ''}">
        <!-- this gets skipped if the page can't determine the account.
        That pretty much only happens if the URL sent to the user is malformed somehow or the
         user is mucking with the URL themselves. In any case, an error message will be generated
         and displayed below -->
        <p>Please choose a new password for the account '${userCmd.email}':</p>
    </c:if>
    <br/><br/>
    <gsweb:form action="/community/resetPassword.page" method="post">
        <spring:hasBindErrors name="userCmd">
            <div class="error">
                <ul>
                    <c:forEach var="errMsgObj" items="${errors.allErrors}">
                        <li>
                            <spring:message code="${errMsgObj.code}" text="${errMsgObj.defaultMessage}"/>
                        </li>
                    </c:forEach>
                </ul>
            </div>
        </spring:hasBindErrors>


        <c:if test="${userCmd.email != null and userCmd.email != ''}">
            <c:if test="${not (param.id gt '') }">
                <label for="oldPassword" class="form">Old password:</label>
                <input id="oldPassword" class="form" type="password" name="oldPassword"/>

                <br style="clear: left;"/>
            </c:if>

            <label for="password" class="form">New password:</label>
            <spring:bind path="userCmd.password">
                <input id="password" class="form" type="password" name="password" value="${userCmd.password}"/>
            </spring:bind>

            <br style="clear: left;"/>

            <label for="confirmPassword" class="form">Confirm password:</label>
            <spring:bind path="userCmd.confirmPassword">
                <input id="confirmPassword" class="form" type="password" name="confirmPassword" value="${userCmd.confirmPassword}"/>
            </spring:bind>

            <input id="id" type="hidden" name="id" value="${param.id}"/>
            <br style="clear:left;"/>

            <input class="form" type="submit" value="Change password" name="submit"/>
            <c:if test="${not (param.id gt '') }">
                <input class="form" type="submit" value="Cancel" name="cancel"/>
            </c:if>
        </c:if>
    </gsweb:form>
  </body>
</html>
</jsp:root>