<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsweb="gstaglib"
          xmlns="http://www.w3.org/1999/xhtml" version="2.0"
          xmlns:cms="urn:jsptagdir:/WEB-INF/tags/content/cms">
<jsp:directive.page import="gs.web.util.context.SessionContextUtil"/>
<jsp:directive.page contentType="text/html"/><html>
  <pageHelper:setPathway pathway="COMMUNITY_LANDING"/>

  <c:choose>
      <c:when test="${param.id gt ''}">
          <c:set var="titleText" value="Reset My Password - GreatSchools"/>
          <c:set var="headerText" value="Reset My Password"/>
      </c:when>
      <c:otherwise>
          <c:set var="titleText" value="Change My Password - GreatSchools"/>
          <c:set var="headerText" value="Change My Password"/>
      </c:otherwise>
  </c:choose>

  <head>
      <title>${titleText}</title>
  </head>
  <body>


      <div id="mainGS" class="col">
          <div class="spacer_10"><!-- do not collapse --></div>

          <div class="smallAlertText">
              <link:home>Home</link:home> &amp;gt; <link:userAccount>My Account</link:userAccount>
          </div>

          <div class="spacer_10"><!-- do not collapse --></div>

          <div id="topicContentGS" class="clearfix">

              <div id="topicbarGS" class="col">
                  <div class="mod">
                      <div class="navmod_hd">
                          <h5>Manage my account</h5>
                      </div>
                      <div class="navmod_bd">
                          <ul class="text2">
                              <li><link:changeEmail>Update Email Address</link:changeEmail></li>
                              <li>Change My Password</li>
                              <li><link:newsletterManagement>Manage Newsletters</link:newsletterManagement></li>
                              <li><link:mySchoolList>Edit My School List</link:mySchoolList></li>
                          </ul>
                      </div>
                  </div>

              </div>
              <!-- end #topicbarGS -->

              <div id="topicMainGS" class="col">
                  <div id="changePassword">
                      <h3 class="title2-d61">${headerText}</h3>

                      <div class="spacer_5"><!-- do not collapse --></div>


      <c:if test="${not (param.id gt '') }">
          <p class="text3">Please enter a new password for your account in the form below.</p>
      </c:if>

      <gsweb:form action="/community/resetPassword.page" method="post">
          <fieldset>
          <input type="hidden" name="id" value="${param.id}"/>
          <ul>
              <c:if test="${not (param.id gt '') }">
                  <li id="oldPassword">
                      <label for="oldPasswordInput" class="text2bold">Current password:</label>
                      <spring:bind path="passwordCmd.oldPassword">
                        <input id="oldPasswordInput" class="text2" type="password" name="${status.expression}"
                               value="${passwordCmd.oldPassword}" tabindex="2"/>
                      </spring:bind>
                      <spring:hasBindErrors name="passwordCmd">
                          <spring:bind path="passwordCmd.oldPassword">
                              <c:if test="${status.errorMessage gt '' or status.errorCode gt ''}">
                                  <gsml:img src="/res/img/bullet/icon_warning_12x12.gif"
                                            alt="Error" styleClass="errorImage"/>
                                  <p class="errorText"><spring:message code="${status.errorCode}" text="${status.errorMessage}"/></p>
                              </c:if>
                          </spring:bind>
                      </spring:hasBindErrors>
                  </li>
              </c:if>

              <li id="newPassword">
                  <label for="newPasswordInput" class="text2bold">New password:</label>
                  <spring:bind path="passwordCmd.newPassword">
                      <input id="newPasswordInput" class="text2" type="password" name="${status.expression}"
                             value="${passwordCmd.newPassword}" tabindex="3"/>
                  </spring:bind>
                  <spring:hasBindErrors name="passwordCmd">
                      <spring:bind path="passwordCmd.newPassword">
                          <c:if test="${status.errorMessage gt '' or status.errorCode gt ''}">
                              <gsml:img src="/res/img/bullet/icon_warning_12x12.gif"
                                        alt="Error" styleClass="errorImage"/>
                              <p class="errorText"><spring:message code="${status.errorCode}" text="${status.errorMessage}"/></p>
                          </c:if>
                      </spring:bind>
                  </spring:hasBindErrors>
              </li>

              <li id="confirmPassword">
                  <label for="confirmPasswordInput" class="text2bold">Re-enter new password:</label>
                  <spring:bind path="passwordCmd.newPasswordConfirm">
                      <input id="confirmPasswordInput" class="text2" type="password" name="${status.expression}"
                             value="${status.value}" tabindex="4"/>
                  </spring:bind>
              </li>

                              </ul>
                          </fieldset>
                          <fieldset class="submit">

                              <button type="submit" id="submitButton" name="Submit" value="Submit"
                                      class="btn25 fltlft" tabindex="6">
                                  <span class="lftDoor25"><span class="rtDoor25">Save</span></span>
                              </button>
                              <button type="cancel" id="cancelButton" name="Cancel" value="Cancel"
                                      class="btn25 fltlft" tabindex="5">
                                  <span class="lftDoor25"><span class="rtDoor25">Cancel</span></span>
                              </button>

                          </fieldset>

<!--              <li id="buttons">
                  <gsml:inputImage src="/res/img/community/registration/savebutton.gif"
                                   alt="Save" id="submitButton" name="submit" tabIndex="6"/>
                  <gsml:inputImage src="/res/img/community/registration/cancel.gif"
                                   id="cancelButton" alt="Cancel" name="cancel" tabIndex="5"/>
              </li>
          </ul>-->
      </gsweb:form>

                  </div>
                  <!-- end changePassword -->

              </div>
              <!-- end #topicMainGS -->

          </div>
          <!-- end #topicContentGS -->

      </div>
      <!-- end mainGS -->

      <cms:communitySidebar content="${requestScope.discussionBoard}" searchType="community"/>

  <mod:tracking pageName="Change Password"
                hier1="Account,Change Password"/>
  </body>
</html>
</jsp:root>