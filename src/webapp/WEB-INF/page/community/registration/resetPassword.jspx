<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsweb="gstaglib"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns="http://www.w3.org/1999/xhtml" version="2.0"
          xmlns:cms="urn:jsptagdir:/WEB-INF/tags/content/cms">
<jsp:directive.page import="gs.web.util.context.SessionContextUtil"/>
<jsp:directive.page contentType="text/html"/><html>
  <pageHelper:setPathway pathway="COMMUNITY_LANDING"/>
  <ad:setSlotPrefix slotPrefix="MyAccount"/>
  <pageHelper:hideAllAds/>

  <c:choose>
      <c:when test="${param.id gt ''}">
          <c:set var="titleText" value="Reset My Password - GreatSchools"/>
          <c:set var="headerText" value="Reset My Password"/>
      </c:when>
      <c:otherwise>
          <c:set var="titleText" value="Change My Password - GreatSchools"/>
          <c:set var="headerText" value="Change My Password"/>
      </c:otherwise>
  </c:choose>

  <head>
      <title>${titleText}</title>
  </head>
  <body>


  <div class="grid_16">

      <div class="smallAlertText mvm">
          <link:home>Home</link:home> &amp;gt; <link:userAccount>My Account</link:userAccount>
      </div>

          <div class="alpha grid_5">
              <div class="mod">
                  <div class="navmod_hd">
                      <h5>Manage my account</h5>
                  </div>
                  <div class="navmod_bd">
                      <ul class="text2 none">
                          <li><link:changeEmail>Update Email Address</link:changeEmail></li>
                          <li>Change My Password</li>
                          <li><link:newsletterManagement>Manage Emails &amp;amp; Newsletters</link:newsletterManagement></li>
                          <li><link:mySchoolList>Edit My School List</link:mySchoolList></li>
                      </ul>
                  </div>
              </div>

          </div>
          <!-- end #topicbarGS -->

          <div class="grid_11 omega">
              <div id="changePassword">
                  <h1>${headerText}</h1>

                  <div class="spacer_5"><!-- do not collapse --></div>


                  <c:if test="${not (param.id gt '') }">
                      <p class="text3">Please enter a new password for your account in the form below.</p>
                  </c:if>

                  <gsweb:form action="/community/resetPassword.page" method="post">
                      <fieldset>
                          <input type="hidden" name="id" value="${param.id}"/>
                          <ul class="none">
                              <c:if test="${not (param.id gt '') }">
                                  <li id="oldPassword">
                                      <label for="oldPasswordInput" class="text2bold">Current password:</label>
                                      <spring:bind path="passwordCmd.oldPassword">
                                          <input id="oldPasswordInput" class="text2" type="password"
                                                 name="${status.expression}"
                                                 value="${passwordCmd.oldPassword}" tabindex="2"/>
                                      </spring:bind>

                                  </li>
                                  <!--<li>-->
                                      <spring:hasBindErrors name="passwordCmd">
                                          <spring:bind path="passwordCmd.oldPassword">
                                              <c:if test="${status.errorMessage gt '' or status.errorCode gt ''}">
                                                  <p class="formErrorText">
                                                      <span class="sprite i-alert"><!-- alert icon --></span>&amp;nbsp;<spring:message
                                                          code="${status.errorCode}" text="${status.errorMessage}"/>
                                                  </p>
                                              </c:if>
                                          </spring:bind>
                                      </spring:hasBindErrors>
                                  <!--</li>-->
                              </c:if>

                              <li id="newPassword">
                                  <label for="newPasswordInput" class="text2bold">New password:</label>
                                  <spring:bind path="passwordCmd.newPassword">
                                      <input id="newPasswordInput" class="text2" type="password"
                                             name="${status.expression}"
                                             value="${passwordCmd.newPassword}" tabindex="3"/>
                                  </spring:bind>

                              </li>

                              <li id="confirmPassword">
                                  <label for="confirmPasswordInput" class="text2bold">Re-enter new password:</label>
                                  <spring:bind path="passwordCmd.newPasswordConfirm">
                                      <input id="confirmPasswordInput" class="text2" type="password"
                                             name="${status.expression}"
                                             value="${status.value}" tabindex="4"/>
                                  </spring:bind>
                              </li>

                              <!--<li>-->
                                  <spring:hasBindErrors name="passwordCmd">
                                      <spring:bind path="passwordCmd.newPassword">
                                          <c:if test="${status.errorMessage gt '' or status.errorCode gt ''}">
                                              <p class="formErrorText">
                                                  <span class="sprite i-alert"><!-- alert icon --></span>&amp;nbsp;<spring:message
                                                      code="${status.errorCode}" text="${status.errorMessage}"/>
                                              </p>
                                          </c:if>
                                      </spring:bind>
                                  </spring:hasBindErrors>
                              <!--</li>-->

                          </ul>
                      </fieldset>
                      <fieldset class="submit">

                          <button class="button-1 fltlft mrm" type="submit" id="submitButton" name="Submit" value="Submit" tabindex="6">Save</button>

                          <link:userAccount styleId="cancelButton" styleClass="button-1 fltlft">Cancel</link:userAccount>

                      </fieldset>

                      <input type="hidden" name="redirectParam" value="${param.redirect}"/>

                  </gsweb:form>

              </div>
              <!-- end changePassword -->

          </div>
          <!-- end #topicMainGS -->

  </div>
  <!-- end mainGS -->

      <cms:communitySidebar content="${requestScope.discussionBoard}" searchType="community"/>

  <mod:tracking pageName="Change Password"
                hier1="Account,Change Password"/>
  </body>
</html>
</jsp:root>