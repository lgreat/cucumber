<!--
  Created by IntelliJ IDEA.
  User: UrbanaSoft
  Date: Jun 15, 2006
  Time: 4:29:17 PM
  To change this template use File | Settings | File Templates.
-->
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:link="urn:www.greatschools.net/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns="http://www.w3.org/1999/xhtml" version="2.0"
          xmlns:gsweb="gstaglib">
<jsp:directive.page contentType="text/html"/><html>
  <head>
      <title>Registration Successful!</title>
      <pageHelper:externalJavascript file="/res/js/prototype.js"/>
      <pageHelper:externalJavascript file="/res/js/autoassist.js"/>
      <pageHelper:externalCss file="/res/css/community/autoassist.css"/>
      <pageHelper:externalJavascript file="/res/js/registrationSuccess.js"/>
      <style type="text/css">
          h2.header {
              font-size: large;
              margin-bottom: 5px;
          }

          label.familyInput, label.familySelect, input.family, select.family {
              margin-right: 15px;
              margin-bottom: 10px;
              display: block;
              float: left;
          }

          label.familyInput, label.familySelect {
              margin-top: 10px;
              text-align: center;
          }

          label.childname {
              width: 154px;
          }

          label.schoolname {
              width: 254px;
          }

          label.familySelect, select.family {
              width: 50px;
          }

          input.childname {
              width: 150px;
          }

          input.schoolname {
              width: 250px;
          }

          label.form, input.form, select.form {
               margin-bottom: 10px;
               display: block;
               width: 150px;
               float: left;
           }

          input.interests, label.interests {
              display: block;
              float: left;
              margin-top: 10px;
          }

          label.interests {
              margin-left: 10px;
          }

          input.other, label.other {
              margin-top: 10px;
          }

          label.other {
              margin-right: 10px;
          }

          input.other {
              width: 250px;
          }

          input.private {
              margin-right: 7px;
          }

          label.private {
              padding: 7px 0px 0px 20px;
              text-align: left;
              display: block;
              float: left;
          }

          label.textarea {
              padding-bottom: 5px;
          }

          .privacy {
               font-size: smaller;
               margin-left: 11.5em;
               color: #666666;
               margin-top:0;
               clear:left;
           }
          div.error {
                color: red;
                display:block;
                padding:8px;
            }
          p.intro {
              margin-bottom: 30px;
              font-size: medium;
          }

          .previous p {
              margin-bottom: 10px;
          }
          .previous input, .previous label, .previous select {
              margin-right: 15px;
              margin-bottom: 10px;
              display: block;
              float: left;
          }
          .previous label.schoolname {
              width: 258px;
          }
          .previous label.state, .previous select {
              width: 50px;
          }
          .previous .schoolname {
              width: 250px;
          }
          .previous label {
              text-align: center;
          }


      </style>
  </head>
  <body>
    <h2 class="header">Thanks for registering, and welcome to the Greatschools Network!</h2>
    <c:if test="${email > ''}">
        <p>A confirmation email has been sent to you at: ${email}</p>
        <p>Click the link in that email to confirm your address and fully activate
        your account.</p>
    </c:if>
  <hr/>
  <p class="intro">Take a minute to fill out your profile - it is an opportunity to share a little
  about yourself with others in the GreatSchools Network.</p>

  <gsweb:form action="/community/registrationSuccess.page" method="post">

      <spring:hasBindErrors name="followUpCmd">
          <spring:bind path="followUpCmd.id">
              <c:if test="${status.errorMessage > ''}">
                  <div class="error">
                    ${status.errorMessage}
                  </div>
              </c:if>
          </spring:bind>
      </spring:hasBindErrors>

      <h2 class="header">My Family</h2>
      <label class="familyInput childname">Child name</label>
      <label class="familySelect">Grade</label>
      <label class="familyInput schoolname">School</label>
      <label class="familySelect">State</label>
      <!-- Default to always show one row -->
      <c:set var="loopTimes" value="1"/>
      <c:if test="${followUpCmd.userProfile.numSchoolChildren gt 1}">
          <c:set var="loopTimes" value="${followUpCmd.userProfile.numSchoolChildren}"/>
      </c:if>
      <c:forEach var="child" begin="1" end="${loopTimes}">
          <br style="clear: left;"/>
          <!-- Default values -->
          <c:set var="nameVal" value="Child #${child}"/>
          <c:set var="gradeVal" value=""/>
          <c:set var="schoolIdVal" value=""/>
          <c:set var="stateVal" value="${followUpCmd.userProfile.state}"/>
          <c:set var="schoolVal" value=""/>
          <!-- override default values if set. Also show error message if exists -->
          <c:if test="${followUpCmd.numStudents ge child}">
              <spring:hasBindErrors name="followUpCmd">
                  <spring:bind path="followUpCmd.students[${child-1}]">
                      <c:if test="${status.errorMessage > ''}">
                          <div class="error">
                              ${status.errorMessage}
                          </div>
                          <input type="hidden" name="ignoreError${child}"/>
                      </c:if>
                  </spring:bind>
              </spring:hasBindErrors>
              <c:set var="nameVal" value="${followUpCmd.students[child-1].name}"/>
              <c:set var="gradeVal" value="${followUpCmd.students[child-1].grade}"/>
              <c:set var="schoolVal" value="${followUpCmd.schoolNames[child-1]}"/>
              <c:set var="schoolIdVal" value="${followUpCmd.students[child-1].schoolId}"/>
              <c:if test="${followUpCmd.students[child-1].state != null}">
                  <c:set var="stateVal" value="${followUpCmd.students[child-1].state}"/>
              </c:if>
          </c:if>
          <input class="family childname" id="childname${child}" type="text" name="childname${child}" value="${nameVal}"/>
          <gsweb:gradeSelector name="grade${child}" styleClass="family" grade="${gradeVal}" useNoGrade="true"/>
          <input class="family schoolname" id="school${child}" type="text" name="school${child}" value="${schoolVal}"/>
          <input type="hidden" id="schoolId${child}" name="schoolId${child}" value="${schoolIdVal}"/>
          <gsweb:stateSelector name="state${child}" styleId="state${child}" state="${stateVal}" styleClass="family"/>

          <!-- Show remove button for last row shown if more than 1 row is shown -->
          <c:if test="${child == followUpCmd.userProfile.numSchoolChildren and child gt 1}">
              <input class="form" type="submit" value="Remove this child" name="removeChild"/>
          </c:if>
      </c:forEach>
      <br style="clear: left;"/>
      <input class="form" type="submit" value="Add another child" name="addChild"/>
      <br style="clear: left;"/>
      <hr/>

      <h2 class="header">My Interests</h2>
      <p>I am interested in (check all that apply)</p>

      <!-- To add/remove interests from this list, see UserProfile -->
      <gsweb:interestsList styleClass="interests" interestChoices="${followUpCmd.interestsAsList}"/>

      <spring:hasBindErrors name="followUpCmd">
          <spring:bind path="followUpCmd.otherInterest">
              <c:if test="${status.errorMessage > ''}">
                  <div class="error">
                    ${status.errorMessage}
                  </div>
              </c:if>
          </spring:bind>
      </spring:hasBindErrors>
      <label for="otherInterest" class="other">Other</label>
      <spring:bind path="followUpCmd.userProfile.otherInterest">
        <input class="other" id="otherInterest" name="otherInterest" value="${followUpCmd.userProfile.otherInterest}" type="text"/>
      </spring:bind>

      <br style="clear: left;"/>
      <hr/>

      <h2 class="header">Previous Schools</h2>
      <div class="previous">
          <p>I've been a parent of a child at these schools in the past</p>
          <gsweb:previousSchoolsList schoolValues="${followUpCmd.subscriptions}" schoolNames="${followUpCmd.previousSchoolNames}"/>
      </div>

      <h2 class="header">A little about me</h2>
      <div class="error">
          <spring:bind path="followUpCmd.aboutMe">
                ${status.errorMessage}
          </spring:bind>
      </div>
      <label for="aboutMe" class="textarea">I'm proud of my kids because (3000 characters or less):</label>
      <spring:bind path="followUpCmd.userProfile.aboutMe">
          <textarea id="aboutMe" rows="5" cols="75" name="aboutMe">${followUpCmd.userProfile.aboutMe}</textarea>
      </spring:bind>
      <br style="clear: left;"/>

      <spring:bind path="followUpCmd.userProfile.private">
          <label class="private">
              <gsml:checkbox name="${status.expression}" styleClass="private" checked="${status.value}"/>
              Check the box if you wish for this to be private.
          </label>
      </spring:bind>

      <br style="clear: left;"/>
      <br style="clear: left;"/>

      <spring:bind path="followUpCmd.user.id">
          <input id="id" type="hidden" name="id" value="${followUpCmd.user.id}"/>
      </spring:bind>

      <c:choose>
          <c:when test="${idString != null}">
              <input type="hidden" name="marker" value="${idString}"/>
          </c:when>
          <c:otherwise>
              <input type="hidden" name="marker" value="${followUpCmd.marker}"/>
          </c:otherwise>
      </c:choose>

      <input class="form" type="submit" value="Submit" name="submit"/>
      <div class="privacy">By submitting, I agree to the <link:termsOfUse>Terms of Service</link:termsOfUse></div>
      <div class="privacy">We won't sell or share your address. <gsml:popupWindow width="800" height="600" left="50" top="50"
              href="/about/privacyStatement.page?state=$STATE">GreatSchools Privacy Policy</gsml:popupWindow></div>
  </gsweb:form>
  </body>
</html>
</jsp:root>