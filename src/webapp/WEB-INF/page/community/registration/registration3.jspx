<!--
  Created by IntelliJ IDEA.
  User: UrbanaSoft
  Date: Jun 15, 2006
  Time: 4:29:17 PM
  To change this template use File | Settings | File Templates.
-->
<jsp:root
        xmlns:jsp="http://java.sun.com/JSP/Page"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:spring="http://www.springframework.org/tags"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
        xmlns:gsweb="gstaglib"
        xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
        version="2.0">
<jsp:directive.page contentType="text/html"/><html>
  <head>
      <title>Registration Successful!</title>
      <pageHelper:externalCss file="/res/css/community/registration/registration.css"/>
  </head>
  <body>
    <h2 class="newsletterIntro">${newsletterCmd.user.firstName}, your profile has been updated!</h2>

    <div class="newsletterForm">
    <gsweb:form action="/community/registration3.page" method="post">
        <spring:hasBindErrors name="newsletterCmd">
            <div class="error">
                <ul>
                    <c:forEach var="errMsgObj" items="${errors.allErrors}">
                        <li>
                            <spring:message code="${errMsgObj.code}" text="${errMsgObj.defaultMessage}"/>
                        </li>
                    </c:forEach>
                </ul>
            </div>
        </spring:hasBindErrors>

        <c:if test="${newsletterCmd.numStudents gt 0}">
            <c:if test="${newsletterCmd.numStudentSchools gt 0}">
                <c:choose>
                    <c:when test="${newsletterCmd.numStudentSchools eq 1}">
                        <c:set var="childWord" value="child"/>
                        <c:set var="attendWord" value="attends"/>
                    </c:when>
                    <c:otherwise>
                        <c:set var="childWord" value="children"/>
                        <c:set var="attendWord" value="attend"/>
                    </c:otherwise>
                </c:choose>
                <div class="mystats">
                    <c:choose>
                        <c:when test="${newsletterCmd.allMss}">
                            <p class="intro">
                                Did you know that GreatSchools can send you free monthly updates about
                                the schools your ${childWord} ${attendWord}?
                            </p>
                            <label>
                                <gsml:checkbox name="allMss" checked="true"/>
                                It's FREE - Sign me up!
                            </label>
                        </c:when>
                        <c:when test="${newsletterCmd.availableMssSubs gt 0}">
                            <p class="intro">
                                Did you know that GreatSchools can send you free monthly updates about
                                the schools your ${childWord} ${attendWord}? Choose up to
                                ${newsletterCmd.availableMssSubs}!
                            </p>
                            <c:forEach var="school" items="${newsletterCmd.studentSchools}">
                                <div class="schools">
                                    <label>
                                        <gsml:checkbox name="${school.databaseState}${school.id}" checked="true"/>
                                        Yes, send me free monthly updates and stats for ${school.name}
                                    </label>
                                </div>
                            </c:forEach>
                        </c:when>
                    </c:choose>
                </div>
            </c:if>
            <c:if test="${newsletterCmd.hasGradeNewsletter}">
                <hr/>
                <p class="intro">
                    GreatSchools can also help you track your child's learning grade-by-grade with
                    the free monthly newsletters that parents rave about:
                    <c:if test="${newsletterCmd.hasK eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="gradeK" checked="${newsletterCmd.subK}"/>
                                Send me information about Kindergarten
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasFirst eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="grade1" checked="${newsletterCmd.subFirst}"/>
                                Send me information about 1st Grade
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasSecond eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="grade2" checked="${newsletterCmd.subSecond}"/>
                                Send me information about 2nd Grade
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasThird eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="grade3" checked="${newsletterCmd.subThird}"/>
                                Send me information about 3rd Grade
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasFourth eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="grade4" checked="${newsletterCmd.subFourth}"/>
                                Send me information about 4th Grade
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasFifth eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="grade5" checked="${newsletterCmd.subFifth}"/>
                                Send me information about 5th Grade
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasMiddle eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="gradeMiddle" checked="${newsletterCmd.subMiddle}"/>
                                Send me information about Middle School
                            </label>
                        </div>
                    </c:if>
                    <c:if test="${newsletterCmd.hasHigh eq true}">
                        <div class="grades">
                            <label>
                                <gsml:checkbox name="gradeHigh" checked="${newsletterCmd.subHigh}"/>
                                Send me information about High School
                            </label>
                        </div>
                    </c:if>
                </p>
            </c:if> <!-- end has grade newsletter -->
        </c:if> <!-- end has students -->
        <div class="advisor">
            <label>
                <gsml:checkbox name="advisor" checked="${newsletterCmd.subAdvisor}"/>
                Please also send me tips and advice in the bi-monthly Parent Advisor.
            </label>
        </div>

        <spring:bind path="newsletterCmd.user.id">
            <input type="hidden" name="${status.expression}" value="${status.value}"/>
        </spring:bind>
        <spring:bind path="newsletterCmd.marker">
            <input type="hidden" name="${status.expression}" value="${status.value}"/>
        </spring:bind>
        <div class="submit">
            <gsml:inputImage src="/res/img/button/btn_free_sign_up.gif" alt="Sign me up!"/>
        </div>

        <p class="noThanks">
            <a href="#">No thanks, I'm all finished</a>
        </p>
    </gsweb:form>
    </div>
</body>
</html>
</jsp:root>