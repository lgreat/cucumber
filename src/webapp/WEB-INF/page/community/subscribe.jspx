<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
    xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:spring="http://www.springframework.org/tags"
    xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
    >
    <html lang="en">

        <jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

        <jsp:directive.page contentType="text/html"/>

        <head>
            <![CDATA[
            <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
            <link rel="stylesheet" href="res/css/community/subscribe.css"></link>
            ]]>
            <title>Subscribe to ${subCmd.subscriptionProduct.longName}</title>
        </head>
        <body>

            <jsp:include page="/header/moveChoose.module"/>

            <gsml:boxRecessed>
                <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" id="header">
                    <tr>
                        <td align="center" width="30%">
                            <img src="res/img/pixel.gif" alt=""/>
                        </td>
                        <td align="center" width="*" nowrap="nowrap" id="active">Step 1:
                            <br/>
                  Become a member
                        </td>
                        <td align="center">
                            <img src="res/img/wizard_dottedarrow.gif" width="100" height="10" alt="arrow"/>
                        </td>
                        <td align="center" nowrap="nowrap">Step 2:
                            <br/>
                  Get Started
                        </td>
                        <td style="text-align: right; vertical-align: top; font-size: 80%" width="30%">
            Contact
                            <br/>
                            <a href="http://${requestScope.context.hostName}/cgi-bin/feedback_faq/${subCmd.state.abbreviation}?fbtype=subentry"
                                >Customer Support</a>
                        </td>
                    </tr>
                </table>
                <gsml:url value="/subscribe.page" var="form_submit"/>
                <form action="${form_submit}"
                    id="subscribe"
                    name="subscribe"
                    method="post"
                    onsubmit="var s=getElementById('Submit');s.value='Processing...';s.disabled=true;s.enabled=false; return true;"
                    >
                    <table width="100%" border="0" cellpadding="0" cellspacing="0" id="main">
                        <tr valign="top">
                            <td width="41%">
                                <spring:bind path="subCmd">
                                    <c:if test="${status.error}">
                                        <c:forEach items="${status.errorMessages}" var="error">
                                            <div class="error">
                                                <c:out value="${error}" escapeXml="false"/>
                                            </div>
                                        </c:forEach>
                                    </c:if>
                                    <c:if test="${!status.error}">
                                        An annual membership fee of ${subCmd.subscriptionPrice} gives you
                                        unlimited access to all exclusive membership content.
                                        <a href="http://${requestScope.context.hostName}/cgi-bin/conversion/$STATE/overview">
                                            Learn More
                                        </a>
                                        <div style="align:center">
                                            <img src="res/img/conv_pic2.gif" alt="photo of family" width="165" height="230" vspace="8" border="0"/>
                                        </div>
                                        <b>Please note:</b> Membership content
                is available for the following states:
                ${subscriptionStates}. Information about
                private schools is very limited in all states.
                                    </c:if>
                                </spring:bind>
                            </td>
                            <td width="59%">
                                <b>Becoming a member is easy. First, enter your personal
                information</b>


                                <spring:bind path="subCmd.state">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>
                                <spring:bind path="subCmd.url">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>
                                <spring:bind path="subCmd.urlLabel">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>
                                <spring:bind path="subCmd.host">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>

                                <div class="formrow">
                                    <span class="label">First Name</span>
                                    <spring:bind path="subCmd.user.firstName">
                                        <input
                                            id="firstName"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Last Name</span>
                                    <spring:bind path="subCmd.user.lastName">
                                        <input id="lastName"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Street Address</span>
                                    <spring:bind path="subCmd.user.address.street">
                                        <input id="street"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">City</span>
                                    <spring:bind path="subCmd.user.address.city">
                                        <input id="city"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">State</span>
                                    <spring:bind path="subCmd.user.address.state">
                                        <input id="state"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Zip - 5 digits</span>
                                    <spring:bind path="subCmd.user.address.zip">
                                        <input id="zip"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Email address</span>
                                    <spring:bind path="subCmd.user.email">
                                        <input id="email"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <b>Review and agree to the terms of the member agreement</b>
                                <div class="formrow">
                                    <spring:bind path="subCmd.agree">
                                        <span class="label">
                                            <c:choose>
                                                <c:when test="${status.value == 'x'}">
                                                    <input id="${status.expression}"
                                                        name="${status.expression}"
                                                        type="checkbox"
                                                        value="x"
                                                        checked="checked"/>
                                                </c:when>
                                                <c:otherwise>
                                                    <input id="${status.expression}"
                                                        name="${status.expression}"
                                                        type="checkbox"
                                                        value="x"/>
                                                </c:otherwise>
                                            </c:choose>
                                        </span>
                                        <span class="labelright">I agree to the terms of the
                                            <a href="http://www.greatschools.net/content/insider/subscriber.html"
                                                target="issues"
                                                onclick="window.open('','issues','width=400,height=300,scrollbars=yes')">member agreement</a>
                                        </span>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                    <br/>
                                    <br/>
                                </div>
                                <b>Enter your payment information</b>
                                <br/>
                                ${subCmd.subscriptionPrice} will be charged to your credit card.
                                <div class="formrow">
                                    <span class="label">Credit Card Type</span>
                                    <spring:bind path="subCmd.creditCardType">
                                        <select id="creditCardType"
                                            name="${status.expression}">
                                            <c:choose>
                                                <c:when test="${status.value == 'visa' || status.value == ''}">
                                                    <option value="visa" selected="selected">Visa</option>
                                                </c:when>
                                                <c:otherwise>
                                                    <option value="visa">Visa</option>
                                                </c:otherwise>
                                            </c:choose>
                                            <c:choose>
                                                <c:when test="${status.value == 'mc'}">
                                                    <option value="mc" selected="selected">Mastercard</option>
                                                </c:when>
                                                <c:otherwise>
                                                    <option value="mc">Mastercard</option>
                                                </c:otherwise>
                                            </c:choose>
                                            <c:choose>
                                                <c:when test="${status.value == 'amex'}">
                                                    <option value="amex" selected="selected">American Express</option>
                                                </c:when>
                                                <c:otherwise>
                                                    <option value="amex">American Express</option>
                                                </c:otherwise>
                                            </c:choose>
                                        </select>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Credit Card Number</span>
                                    <spring:bind path="subCmd.creditCardNumber">
                                        <input id="creditCardNumber"
                                            name="${status.expression}"
                                            type="text"
                                            maxlength="16"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Expiration (MM/YY)</span>
                                    <spring:bind path="subCmd.expirationMonth">
                                        <input id="expirationMonth"
                                            name="${status.expression}"
                                            type="text"
                                            size="2" maxlength="2"
                                            value="${status.value}"/>
                                    </spring:bind>
                                    /
                                    <spring:bind path="subCmd.expirationYear">
                                        <input id="expirationYear"
                                            name="${status.expression}"
                                            type="text"
                                            size="4" maxlength="4"
                                            value="${status.value}"/>
                                    </spring:bind>

                                    <spring:bind path="subCmd.expirationMonth">
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                    <spring:bind path="subCmd.expirationYear">
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>
                            </td>
                        </tr>
                    </table>


                    <table width="100%" border="0" cellpadding="0" cellspacing="0" id="footer">
                        <tr>
                            <td width="50%">
                                <img src="res/img/pixel.gif" alt=""/>
                            </td>
                            <td width="50%" align="right">
                                <input name="Submit" type="submit" id="Submit" value="Submit"/>
                            </td>
                        </tr>
                    </table>

                </form>

            </gsml:boxRecessed>
			<![CDATA[
			<script src="https://seal.verisign.com/getseal?host_name=secure.greatschools.net&size=S&use_flash=YES&use_transparent=YES&lang=en"></script>
            ]]>
            <jsp:include page="/footer/copyright.module?state=${requestScope.context.stateOrDefault.abbreviation}"/>

            <gsml:fireclick pageType="conversion" pageName="subscribe"
                extraJavascriptVariable="var fc_track='payment'; var fc_prod_add='${subCmd.subscriptionProduct.longName}';" />

        </body>
    </html>
</jsp:root>