<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          xmlns:search="urn:jsptagdir:/WEB-INF/tags/search"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school">

    <jsp:output doctype-root-element="html" doctype-system="about:legacy-compat"/>
    <jsp:output omit-xml-declaration="true" />
    <jsp:directive.page contentType="text/html; charset=UTF-8"/>

    <head>
        <meta name="decorator" content="emptyDecorator"/>
    </head>

    <c:set var="totalResults" value="${page.pager.totalItems}"/>


    <search:schoolSearchResultsMobileList/>

    <c:set var="pageMap" value="${page.map}"/>

    <script type="text/javascript">
        require(GS.requireConfig, ['mobileSearchResults'], function(mobileSearchResults) {
            GS.log('mobile-search-results loaded', mobileSearchResults);

            var page = {};
            page['isFirstPage'] = ${pageMap.isFirstPage};
            page['isLastPage'] = ${pageMap.isLastPage};
            page['offset'] = ${pageMap.offset};
            page['pageNumber'] = ${pageMap.pageNumber};
            page['lastOffsetOnPage'] = ${pageMap.lastOffsetOnPage};
            page['firstOffset'] = ${pageMap.firstOffset};
            page['lastOffset'] = ${pageMap.lastOffset};
            page['firstPageNumber'] = ${pageMap.firstPageNumber};
            page['lastPageNumber'] = ${pageMap.lastPageNumber};
            page['pageSize'] = ${pageMap.pageSize};
            page['totalResults'] = ${totalResults};

            mobileSearchResults.reset(page);
        });
    </script>

</jsp:root>