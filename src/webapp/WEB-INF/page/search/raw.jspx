<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:gsweb="gstaglib"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns="http://www.w3.org/1999/xhtml" version="2.0">
    <jsp:directive.page contentType="text/html"/>
    <html>
    <head>
        <title>GS Raw Search</title>
        <style type="text/css">
            ul {
                margin-top:0px;
            }

            td {
                border-bottom:1px solid #BBBBBB;
                vertical-align:top;
                padding:3px 5px 3px 5px;
            }

            td.id, td.state {
                width:50px;
                text-align:center;
            }
        </style>
        <script type="text/javascript">
            function showExplanation(d) {
                var e = $('ex'+d);
                e.toggle();
                return false;
            }
        </script>
        <script type="text/javascript" src="/res/js/prototype.js" ></script>

    </head>
    
    <body onload="document.getElementById('qfield').focus()">
    <center>
        <gsweb:form action="/search/raw.page" method="get">
            <input id="qfield" type="text" name="q" size="70" value="${param.q}"/>
            <c:out value=" " escapeXml="true"/>
            <input type="submit" value="search"/>
            <c:out value=" " escapeXml="true"/>
            <select name="analyzer">
                <![CDATA[<option ]]>
                <c:if test="${param.analyzer eq 'standard'}">
                    selected
                </c:if>
                <![CDATA[ value="standard">Standard Analyzer</option>
                <option ]]>
                <c:if test="${param.analyzer eq 'gs'}">
                    selected
                </c:if>
                <![CDATA[ value="gs">GSAnalyzer</option> ]]>
            </select>
        </gsweb:form>


        <c:if test="${not empty param.q}">
            <c:out value="total results: ${total}" escapeXml="true"/>
        </c:if>

        <hr/>
        <c:if test="${not empty results}">
            <table cellspacing="0">
                <tr>
                    <th>#</th>
                    <th>Type</th>
                    <th>State</th>
                    <th>ID</th>
                    <th>Result</th>
                    <th>Score</th>
                </tr>
                <c:forEach items="${results}" var="result">
                    <tr>
                        <td><c:out value="${result.number}" escapeXml="true"/></td>
                        <td><c:out value="${result.type}" escapeXml="true"/></td>
                        <td class="state"><c:out value="${result.state}" escapeXml="true"/></td>
                        <td class="id"><c:out value="${result.id}" escapeXml="true"/></td>
                        <td><c:out value="${result.val}" escapeXml="true"/></td>
                        <td>
                            <a href="#" onclick="return showExplanation('${result.number}')"><c:out value="${result.score}"/></a>
                            <div id="ex${result.number}" style="display:none;" class="explanation"><c:out value="${result.explanation}" escapeXml="false"/></div>
                        </td>
                    </tr>
                </c:forEach>
            </table>
        </c:if>
    </center>
    </body>
    </html>
</jsp:root>