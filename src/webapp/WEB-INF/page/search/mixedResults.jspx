<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
          xmlns="http://www.w3c.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:search="urn:jsptagdir:/WEB-INF/tags/search"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsweb="gstaglib">

<html lang="en">
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html"/>

<pageHelper:setPathway pathway="1"/>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"/>
    <title>
        <c:out value="${title}" escapeXml="false"/>
    </title>
</head>

<gsml:body adPageName="search">
    <pageHelper:externalCss file="/res/css/search/mixedResults.css"/>

    <table id="main" width="100%" style="margin: 0 10px 0 10px">

        <tr>
            <td class="leftColumn">
                <pageHelper:externalCss file="/res/css/mod/browseState.css"/>
                <mod:browseState state="${requestScope.context.stateOrDefault}"/>
            </td>

            <td valign="top" class="middleColumn">
                <div id="resultsheader">
                    <table width="100%">
                        <tr>
                            <td align="left">
                                ${heading1}
                            </td>
                            <td align="right">
                                <c:if test="${total gt 0}">
                                    <c:set var="page" value="${(param.p > 0) ? (param.p-1) : 0}"/>
                                    <c:set var="px" value="${(page * 10)}"/>
                                    <c:out value="${px + 1} - ${(total lt px + 10) ? total : px + 10} of ${total}"/>
                                </c:if>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="cityDistrictRollup">
                    <c:if test="${not empty filteredCities and not empty filteredCities.results}">
                        <div id="filtered">
                            <gsml:list model="${filteredCities}"/>
                        </div>
                    </c:if>

                    <c:if test="${not empty cities and not empty cities.results}">
                        <div class="city">
                            <gsml:list model="${cities}"/>
                        </div>
                    </c:if>

                    <c:if test="${not empty districts and not empty districts.results}">
                        <div class="district">
                            <gsml:list model="${districts}"/>
                        </div>
                    </c:if>
                </div>

                <gsweb:mainResults results="${mainResults}"
                                   total="${total}"
                                   debug="${param.debug}">
                    <c:if test="${not empty noResultsExplanation}">
                        <div class="noResultsExplanation">
                            <h4>${noResultsExplanation}</h4>
                        </div>
                    </c:if>

                    <div id="searchFooter">
                        <c:if test="${showSuggestions}">
                            <h4>Suggestions:</h4>
                            <ul>
                                <li>Make sure all words are spelled correctly.</li>
                                <li>Try different or fewer key words.</li>
                                <li>Try more general key words.</li>
                            </ul>
                        </c:if>
                        <c:if test="${showQueryAgain}">
                            <c:if test="${showWhatStateTheySearchedIn}">
                                <p id="searchagain">You searched in ${requestScope.context.stateOrDefault.longName}.</p>
                            </c:if>
                            <search:searchControl rememberQuery="true"
                                                  showStates="${showQueryAgain}"
                                                  showLinks="true"
                                                  fieldLength="${requestScope.context.cobranded ? 20 : 30}"/>
                        </c:if>
                    </div>
                </gsweb:mainResults>

            </td>
            <td class="rightColumn" align="center">
                <ad:x33/>
            </td>

        </tr>

    </table>

    <mod:tracking pageName="mixed:${total gt 0 ? (empty param.p ? '1' : param.p) : 'noresults'}"
                  pageType="search"
                  constraint="${param.type}"
                  hier1="search,mixed,page${total gt 0 ? (empty param.p ? '1' : param.p) : 'noresults'}"/>
</gsml:body>
</html>
</jsp:root>