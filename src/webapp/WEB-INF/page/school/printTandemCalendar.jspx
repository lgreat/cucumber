<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          version="2.0" xmlns:decorator="http://www.opensymphony.com/sitemesh/decorator">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <jsp:directive.page contentType="text/html"/>
    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>


    <c:set var="tandemTileMSBranding" value="${context.turnOnMicroSoftCampaign}" scope="request" />
    <c:set var="hasTandemBranding" value="${tandemTileMSBranding}" />

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="decorator" content="minimalDecoratorWithAdsAndJs"/>

        <title>Printable Calendar for ${schoolName}</title>
        <script type="text/javascript">
                    var hasTandemBranding = '${tandemTileMSBranding}';
                    var ncesCode = '${school.ncesCode}';
                </script>
        <pageHelper:addCss-v1/>
        <link rel="stylesheet" type="text/css" href="/res/css/98_print/print_tandem.css" />

        <gsml:javascript src="/res/js/hogan.js"/>
        <gsml:javascript src="/res/js/school/calendar.js"/>

        <ad:setSlotPrefix slotPrefix="School_Profile_Page"/>
        <ad:enableGptAsynchronousMode />
    </head>


    <gsml:body adPageName="printTandemCalendar" pageLayout="nocol">

        <script type="text/javascript">
            var ncesCode = '${school.ncesCode}';

            $(function() {
                GS.school.calendar.loadEventsFromDomAndFillCalendarList();
                $("#js-school-calendar-list").find("tr:eq(1)").hide();
            });
        </script>

        <div style="display:none" id="js-calendardata">${data}</div>

        <c:if test="${tandemTileMSBranding}">
            <c:set value="MSBranding" var="cssClass"></c:set>
        </c:if>
        <div class="${cssClass}">
            <div class="hd clearfix">
                <div class="fl">Upcoming events at</div>
                <div class="fr">
                    <span class="vam">POWERED BY</span>
                    <c:choose>
                        <c:when test="${tandemTileMSBranding}">
                            <img src="/res/img/tandem/tandem_logo_orange.png" alt="Powered by Tandem" width="83" class="vam"/>
                        </c:when>
                        <c:otherwise>
                            <img src="/res/img/tandem/tandem_logo_yellow.png" alt="Powered by Tandem" width="83" class="vam"/>
                        </c:otherwise>
                    </c:choose>
                </div>
            </div>
            <div class="bd clearfix">
                <div class="title">${schoolName}</div>
                <div class="fl" style="width: 64%">
                    <table id="js-school-calendar-list" class="">
                        <tr>
                            <th width="20%">Date</th>
                            <th width="80%">Title</th>
                        </tr>
                        <!-- the template node must wrap the actual template html. the tr node will get cloned -->
                        <tbody id="js-calendar-list-event-template" class="tandemPrint">
                        <tr>
                            <td class="default_bold" width="20%">{{date}}</td>
                            <td class="default" width="80%">{{title}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="fr" style="width:320px; padding-right: 20px;">
                    <c:choose>
                        <c:when test="${tandemTileMSBranding}">
                            <ad:AboveFold_Culture_300x600 />
                        </c:when>
                        <c:otherwise>
                        <div class="gs-ad">
                            <img src="/res/img/tandem/GSAd_300x600.png" alt="GS AD"/>
                            <div class="writeReview">
                                Write a review about<br/>
                                <span class="schoolName">${schoolName}</span><br/>
                                on GreatSchools today!
                            </div>
                        </div>
                        </c:otherwise>
                    </c:choose>
                </div>
            </div>
            <div class="ft clearfix">
                <div class="fl">
                    <c:if test="${tandemTileMSBranding}">
                        <img src="/res/img/tandem/microsoft_logo.png" alt="Mircosoft logo" width="134"/>
                    </c:if>
                </div>
                <div class="fr" style="padding-right: 20px;">
                    <img src="/res/img/tandem/gs_logo.png" alt="GS logo" width="167"/>
                </div>
            </div>
        </div>
        <script>
            var refreshableCultureBranding = ['School_Profile_Page_AboveFold_Culture_300x600'];
            GS.ad.refreshAds(refreshableCultureBranding);
        </script>
    </gsml:body>
    </html>
</jsp:root>