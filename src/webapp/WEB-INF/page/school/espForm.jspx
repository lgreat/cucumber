<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsweb="gstaglib"
          version="2.0" >
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <jsp:directive.page contentType="text/html"/>
    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>ESP Form</title>
        <style type="text/css">
            .espFormWrapper {
                border: 1px solid #D1E9F3;
                margin-top: 15px;
            }
            .espFormWrapper dd {
                line-height: 38px;
                margin: 0 15px;
            }
            .espFormBody {
                padding:25px;
            }
            #js_espFormNav ul {
                position: relative;
            }
            #js_espFormNav li {
                width: 80px;
                padding: 0 3px;
                display: block;
                float: left;
                border: 1px solid #ccc;
            }
            #js_espFormNav li.selected {
                font-weight: bold;
            }
            #js_espFormNav li.completed {
                border: 1px solid #00ff00;
            }
        </style>
        <script type="text/javascript">
            var GS = GS || {};
            GS.espForm = GS.espForm || {};
            GS.espForm.currentPage = ${page};
            GS.espForm.maxPage = ${maxPage};
            GS.espForm.percentComplete = {};
            //<c:forEach items="${percentComplete}" var="perc" varStatus="status">
                GS.espForm.percentComplete[${perc.key}]=${perc.value};
            //</c:forEach>
        </script>
        <pageHelper:externalJavascript file="/res/js/history.min.js"/>
        <pageHelper:externalJavascript file="/res/js/school/espForm.js"/>
    </head>

    <gsml:body adPageName="school/esp" pageLayout="nocol">
        <div class="container_24">
            <div class="grid_24">
                <h2>Your School Profile</h2>
                <p>Select a section to complete your School Profile. You may save, continue and edit your profile at any time.</p>

                <c:if test="${stateLocked}">
                    <p>Note: We are in the process of loading data for this State. You will be unable to
                        edit certain fields until the load is complete.</p>
                </c:if>

                <div id="espFormNavWrapper">
                    <div id="js_espFormNav" class="fltrt">
                        <ul>
                            <li class="${(page eq 1)?'selected':''} ${(percentComplete[1] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="1">
                                    School basics
                                </link:schoolEspForm>
                            </li>
                            <li class="${(page eq 2)?'selected':''} ${(percentComplete[2] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="2">
                                    Instructional model
                                </link:schoolEspForm>
                            </li>
                            <li class="${(page eq 3)?'selected':''} ${(percentComplete[3] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="3">
                                    Apply &amp;amp; enroll
                                </link:schoolEspForm>
                            </li>
                            <li class="${(page eq 4)?'selected':''} ${(percentComplete[4] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="4">
                                    Programs &amp;amp; resources
                                </link:schoolEspForm>
                            </li>
                            <li class="${(page eq 5)?'selected':''} ${(percentComplete[5] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="5">
                                    Enrichment &amp;amp; extras
                                </link:schoolEspForm>
                            </li>
                            <li class="${(page eq 6)?'selected':''} ${(percentComplete[6] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="6">
                                    School culture
                                </link:schoolEspForm>
                            </li>
                            <li class="${(page eq 7)?'selected':''} ${(percentComplete[7] ge 100)?'completed':''}">
                                <link:schoolEspForm school="${school}" page="7">
                                    Contact info
                                </link:schoolEspForm>
                            </li>
                            <c:if test="${maxPage eq 8}">
                                <li class="${(page eq 8)?'selected':''} ${(percentComplete[8] ge 100)?'completed':''}">
                                    <link:schoolEspForm school="${school}" page="8">
                                        Student info
                                    </link:schoolEspForm>
                                </li>
                            </c:if>
                        </ul>
                    </div>
                    <dl class="gradient-3 grid_8">
                        <dd class="bottom">
                            <div id="espFormSchoolInfo">
                                <p>${school.name}</p>
                                <p>${school.city}, ${school.databaseState}</p>
                                <p>
                                    <link:schoolProfileOverview school="${school}">View profile</link:schoolProfileOverview>
                                    |
                                    <link:schoolEspDashboard>Back to Dashboard</link:schoolEspDashboard>
                                </p>
                            </div>
                        </dd>
                    </dl>
                </div>
                <div id="js_pageContainer" class="clearLft">
                    <div id="js_pageWrapper-1" class="js_pageWrapper ${(page eq 1)?'':'hidden'}">
                        <school:espFormPage1 maxPage="${maxPage}"/>
                    </div>
                    <div id="js_pageWrapper-2" class="js_pageWrapper ${(page eq 2)?'':'hidden'}">
                        <school:espFormPage2 maxPage="${maxPage}"/>
                    </div>
                    <div id="js_pageWrapper-3" class="js_pageWrapper ${(page eq 3)?'':'hidden'}">
                        <school:espFormPage3 maxPage="${maxPage}"/>
                    </div>
                    <div id="js_pageWrapper-4" class="js_pageWrapper ${(page eq 4)?'':'hidden'}">
                        <school:espFormPage4 maxPage="${maxPage}"/>
                    </div>
                    <div id="js_pageWrapper-5" class="js_pageWrapper ${(page eq 5)?'':'hidden'}">
                        <school:espFormPage5 maxPage="${maxPage}"/>
                    </div>
                    <div id="js_pageWrapper-6" class="js_pageWrapper ${(page eq 6)?'':'hidden'}">
                        <school:espFormPage6 maxPage="${maxPage}"/>
                    </div>
                    <div id="js_pageWrapper-7" class="js_pageWrapper ${(page eq 7)?'':'hidden'}">
                        <school:espFormPage7 maxPage="${maxPage}"/>
                    </div>
                    <c:if test="${school.type.schoolTypeName == 'private'}">
                        <div id="js_pageWrapper-8" class="js_pageWrapper ${(page eq 8)?'':'hidden'}">
                            <school:espFormPage8 maxPage="${maxPage}"/>
                        </div>
                    </c:if>
                </div>
                <c:if test="${espSuperuser}">
                    <br/>
                    <link:schoolEspDashboard defaultState="${school.databaseState}" defaultCity="${school.city}" defaultSchoolId="${school.id}">Back to Dashboard</link:schoolEspDashboard>
                </c:if>
            </div>
        </div>

        <div style="display:none;">
            <mod:tracking school="${school}" pageName="ESP Form Page ${page}" hier1="ESP"/>
        </div>
    </gsml:body>
    </html>
</jsp:root>