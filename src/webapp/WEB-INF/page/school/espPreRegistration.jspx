<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:form="http://www.springframework.org/tags/form"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          version="2.0">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
<c:set var="pageTitle" value="GreatSchools Official School Profile - Register"/>
<jsp:directive.page contentType="text/html"/>
<pageHelper:externalJavascript file="/res/js/school/espPreRegistration.js"/>
<head>
    <title>${pageTitle}</title>
</head>

<gsml:body adPageName="OSP/preRegistration" pageLayout="nocol">
    <c:if test="${user.emailValidated}">
        <c:set var="isReadOnly" value="true"/>
        <c:set var="doNotShowPassword" value="true"/>
    </c:if>
    <form:form commandName="espRegistrationCommand">
        <div>
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <label for="js_email">Email address</label>
                </div>
                <div class="grid_6">
                    <input name="email" id="js_email"
                           value="${user.email}"
                           readonly="true"/>
                </div>
            </div>
        </div>


        <div id="js_firstNameDiv">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="firstName" for="js_firstName">First name</form:label>
                </div>
                <div class="grid_6">
                    <form:input path="firstName" cssClass="text input_6" id="js_firstName"
                                value="${user.firstName}"/>
                </div>

                <div class="grid_5 omega">

                    <div class="js_firstName invalid error" style="display: none;">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-alert img"><!-- do not collapse --></span>

                            <div class="bk"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="js_lastNameDiv">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="lastName" for="js_lastName">Last name</form:label>
                </div>
                <div class="grid_6">
                    <form:input path="lastName" cssClass="text input_6" id="js_lastName"
                                value="${user.lastName}"/>
                </div>

                <div class="grid_5 omega">

                    <div class="js_lastName invalid error" style="display: none;">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-alert img"><!-- do not collapse --></span>

                            <div class="bk"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div id="js_screenNameDiv">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="screenName" for="js_screenName">Username</form:label>
                </div>
                <div class="grid_6">
                    <form:input path="screenName" cssClass="text input_6" id="js_screenName"
                                value="${user.userProfile eq null ? '' :user.userProfile.screenName}"
                                readonly="${isReadOnly}"/>

                    <p class="hint">6-14 characters (e.g. jjohnson)</p>
                </div>

                <div class="grid_5 omega">
                    <div class="js_screenName success" style="display: none">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-success img"><!-- do not collapse --></span>

                            <div class="bk">Username is available</div>
                        </div>
                    </div>

                    <div class="js_screenName invalid error"
                         style="display: none;">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-alert img"><!-- do not collapse --></span>

                            <div class="bk"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="js_passwordDiv" style="${doNotShowPassword ? 'display:none' : ''}">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="password" for="js_password">Password</form:label>
                </div>
                <div class="grid_6">
                    <form:password path="password" cssClass="text input_6" id="js_password"/>

                    <p class="hint">6-14 characters</p>
                </div>

                <div class="grid_5 omega">

                    <div class="js_password invalid error"
                         style="display: none;">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-alert img"><!-- do not collapse --></span>

                            <div class="bk"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="js_confirmPasswordDiv" style="${doNotShowPassword ? 'display:none' : ''}">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="confirmPassword" for="js_confirmPassword">Retype password</form:label>
                </div>
                <div class="grid_6">
                    <form:password path="confirmPassword" cssClass="text input_6" id="js_confirmPassword"/>
                </div>

                <div class="grid_5 omega">
                    <div class="js_confirmPassword success" style="display: none;">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-success img"><!-- do not collapse --></span>

                            <div class="bk">Password match confirmed</div>
                        </div>
                    </div>

                    <div class="js_confirmPassword invalid error"
                         style="display: none;">
                        <div class="mediaExt1-1">
                            <span class="iconx16 i-16-alert img"><!-- do not collapse --></span>

                            <div class="bk"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="lal clearfix">
            <div class="alpha grid_4">
                <form:label path="jobTitle" for="js_jobTitle">Your title</form:label>
            </div>
            <div class="grid_5">
                <school:espJobTitle valueToPreselect="${membership.jobTitle}"/>
            </div>

            <div class="prefix_1 grid_5 omega">
                <div class="js_jobTitle invalid error" style="display: none;">
                    <div class="mediaExt1-1">
                        <span class="iconx16 i-16-alert img"><!-- do not collapse --></span>

                        <div class="bk">Please specify your job title.</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="">
            <input class="button-1" type="submit" value="Continue Â»" id="js_submit"/>
        </div>
    </form:form>

    <div style="display:none;">
        <mod:tracking pageName="OSP Pre-Registration" hier1="ESP"/>
    </div>
</gsml:body>
</html>
</jsp:root>