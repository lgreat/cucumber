<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:form="http://www.springframework.org/tags/form"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          version="2.0">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
<jsp:directive.page contentType="text/html"/>
<pageHelper:externalJavascript file="/res/js/school/espRegistration.js"/>
<pageHelper:externalJavascript file="/res/js/school/espPreRegistration.js"/>
<head>
    <title>Official School Profile - Register</title>
</head>

<gsml:body adPageName="OSP/preRegistration" pageLayout="nocol">

    <div class="spacer_20"><!-- do not collapse --></div>
    <!--<div class="container_24">-->
    <div class="slStylesV1-0 slFormsV1-0">

    <c:if test="${user.emailValidated}">
        <c:set var="isReadOnly" value="true"/>
        <c:set var="doNotShowPassword" value="true"/>
    </c:if>

    <div class="grid_24">
        <h1>Complete your school official's account</h1>
    </div>



    <div class="grid_16">

        <p>Welcome! You have been pre-approved for a school official‘s account. This gives you special editor’s access to the GreatSchools FREE Official School Profile so you can raise the visibility of your school. Complete the following registration form to get started.</p>

    <div class="mod form">
    <div class="inner">
    <div class="bd">

        <form:form commandName="espRegistrationCommand" onsubmit="return false;">

            <fieldset>
            <legend>Your account</legend>
            <hr class="legend"/>

        <input type="hidden" name="membershipId" value="${membership.id}"></input>
        <div>
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <label>Email address</label>
                </div>
                <div class="grid_6">
                    <input name="email" class="text input_6"
                           value="${user.email}"
                           readonly="true"/>
                    <p class="hint">Your email address has been pre-approved and you may not change it at this time. For assistance, please <link:contactUs feedbackType="esp">contact us</link:contactUs>.</p>
                </div>
            </div>
        </div>

        <div id="js_screenNameDiv">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="screenName" for="js_screenName">Username</form:label>
                </div>
                <div class="grid_6">
                    <form:input path="screenName" cssClass="text input_6" id="js_screenName"
                                value="${user.userProfile eq null ? '' :user.userProfile.screenName}"
                                readonly="${isReadOnly}"/>

                    <p class="hint">6-14 characters (e.g. jjohnson)</p>
                </div>

                <div class="grid_5 omega">
                    <div class="js_screenName success" style="display: none">
                        <div class="media">
                            <span class="iconx16 i-16-success img mrs"><!-- do not collapse --></span>

                            <div class="bd">Username is available</div>
                        </div>
                    </div>

                    <div class="js_screenName invalid error"
                         style="display: none;">
                        <div class="media">
                            <span class="iconx16 i-16-alert img mrs"><!-- do not collapse --></span>

                            <div class="bd"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="js_passwordDiv" style="${doNotShowPassword ? 'display:none' : ''}">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="password" for="js_password">Password</form:label>
                </div>
                <div class="grid_6">
                    <form:password path="password" cssClass="text input_6" id="js_password"/>

                    <p class="hint">6-14 characters</p>
                </div>

                <div class="grid_5 omega">

                    <div class="js_password invalid error"
                         style="display: none;">
                        <div class="media">
                            <span class="iconx16 i-16-alert img mrs"><!-- do not collapse --></span>

                            <div class="bd"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="js_confirmPasswordDiv" style="${doNotShowPassword ? 'display:none' : ''}">
            <div class="lal clearfix">
                <div class="alpha grid_4">
                    <form:label path="confirmPassword" for="js_confirmPassword">Retype password</form:label>
                </div>
                <div class="grid_6">
                    <form:password path="confirmPassword" cssClass="text input_6" id="js_confirmPassword"/>
                </div>

                <div class="grid_5 omega">
                    <div class="js_confirmPassword success" style="display: none;">
                        <div class="media">
                            <span class="iconx16 i-16-success img mrs"><!-- do not collapse --></span>

                            <div class="bd">Password match confirmed</div>
                        </div>
                    </div>

                    <div class="js_confirmPassword invalid error"
                         style="display: none;">
                        <div class="media">
                            <span class="iconx16 i-16-alert img mrs"><!-- do not collapse --></span>

                            <div class="bd"><!-- error msg goes here --></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            </fieldset>

            <fieldset>
            <legend> Your school</legend>
            <hr class="legend"/>
            </fieldset>

            <div class="nal clearfix">
                <div class="alpha prefix_4 grid_6 suffix_5 omega">
                    <p class="loud small">
                        ${membership.school.name}<br/>
                        <c:if test="${membership.school.physicalAddress.street ne null}">
                            ${membership.school.physicalAddress.street}<br/>
                        </c:if>
                        ${membership.school.city}, ${membership.school.databaseState} ${membership.school.zipcode}
                    </p>
                </div>
            </div>

            <fieldset>
            <legend>Your contact info</legend>
            <hr class="legend"/>

                <div id="js_firstNameDiv">
                    <div class="lal clearfix">
                        <div class="alpha grid_4">
                            <form:label path="firstName" for="js_firstName">First name</form:label>
                        </div>
                        <div class="grid_6">
                            <form:input path="firstName" cssClass="text input_6" id="js_firstName"
                                        value="${user.firstName}"/>
                        </div>

                        <div class="grid_5 omega">

                            <div class="js_firstName invalid error" style="display: none;">
                                <div class="media">
                                    <span class="iconx16 i-16-alert img mrs"><!-- do not collapse --></span>

                                    <div class="bd"><!-- error msg goes here --></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="js_lastNameDiv">
                    <div class="lal clearfix">
                        <div class="alpha grid_4">
                            <form:label path="lastName" for="js_lastName">Last name</form:label>
                        </div>
                        <div class="grid_6">
                            <form:input path="lastName" cssClass="text input_6" id="js_lastName"
                                        value="${user.lastName}"/>
                        </div>

                        <div class="grid_5 omega">

                            <div class="js_lastName invalid error" style="display: none;">
                                <div class="media">
                                    <span class="iconx16 i-16-alert img mrs"><!-- do not collapse --></span>

                                    <div class="bd"><!-- error msg goes here --></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

        <div class="lal clearfix">
            <div class="alpha grid_4">
                <form:label path="jobTitle" for="js_jobTitle">Your title</form:label>
            </div>
            <div class="grid_5">
                <school:espJobTitle valueToPreselect="${membership.jobTitle}"/>
            </div>

            <div class="prefix_1 grid_5 omega">
                <div class="js_jobTitle invalid error" style="display: none;">
                    <div class="media">
                        <span class="iconx16 i-16-alert img mrs"><!-- do not collapse --></span>

                        <div class="bd">Please specify your job title.</div>
                    </div>
                </div>
            </div>
        </div>

                <div class="nal clearfix">
                    <p class="mumbo">By joining GreatSchools, you agree to our
                        <gsml:popupWindow width="1025" height="600" left="50" top="50"
                                          title="GreatSchools Terms of Use"
                                          href="/terms/?state=$STATE">GreatSchools Terms of Use</gsml:popupWindow>
                        and
                        <gsml:popupWindow width="1025" height="600" left="50" top="50"
                                          title="GreatSchools Community Standards"
                                          href="/terms/?state=$STATE#communityStandards">Community Guidelines</gsml:popupWindow>.
                    </p>
                </div>

        <div class="">
            <input class="button-1" type="submit" value="Submit request" id="js_submit"/>
        </div>

        </fieldset>

    </form:form>

        </div>
        </div>
        </div>

    </div>
    <div class="grid_8">

        <div class="mod standard_3-1">
            <div class="outer">
                <div class="inner">
                    <div class="hd">
                        <h4 class="">Five reasons to create an Official School Profile</h4>
                    </div>
                    <div class="bd small bottom">
                        <ol start="1" type="1">
                            <li>Give your school more visibility -- get noticed by more families.</li>
                            <li>Publish changes to your school’s profile immediately.</li>
                            <li>Highlight your school’s unique qualities and strengths.</li>
                            <li>Add photos and videos that bring your school profile to life.</li>
                            <li>Boost enrollment.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        </div>

    </div>
    <!--</div>-->

    <div class="spacer_60"><!-- do not collapse --></div>

    <div style="display:none;">
        <mod:tracking pageName="OSP Preapproval Reg Page" hier1="ESP"/>
    </div>
</gsml:body>
</html>
</jsp:root>