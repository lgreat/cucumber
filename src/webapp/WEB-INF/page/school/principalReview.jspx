<?xml version="1.0" encoding="UTF-8"?>
<jsp:root version="2.0"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:gsweb="gstaglib"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod" xmlns:form="http://www.springframework.org/tags/form"
          xmlns:spring="http://www.springframework.org/tags/form">

<c:set var="pageName" value="API Terms of Use"/>
<html>
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html"/>

<head>
    <title>Principal feedback form | GreatSchools </title>
    <meta content="todo" name="description"/>
    <meta content="todo" name="keywords"/>

    <link rel="stylesheet" href="/res/css/gs2010_styles.css" type="text/css"/>
</head>

<gsml:body adPageName="Principal feedback form " pageLayout="nocol">

    <div id="principalReviewFormContainer" class="container_24 slStylesV1-0 slFormsV1-0">
        <div class="spacer_20"><!-- do not collapse --></div>
        <div class="grid_24">
            <h1>School Official: Respond to reviews about ${school.name}</h1>

            <h3>What's your point of view?</h3>

            <p>Parents want to hear the "inside scoop" about this school from an official source. Add your comments in the space below. What you write will be posted on the reviews page above other school reviews.
                <link:parentReviewGuidelines
                        onclick="Popup=window.open(this.href,'guidelines','toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no, width=800,height=600,left=50,top=50'); return false;"
                        styleClass="linkGuidelines">Click here</link:parentReviewGuidelines> to read guidelines on the kinds of comments that GreatSchools will post.
            </p>

            <p>GreatSchools will display your full name and job title with your comment.</p>
        </div>
        <div class="grid_24">
            <div class="mod form">
                <div class="inner">
                    <div class="bd">
                        <form:form id="principalReviewForm" method="post" action="principalComments.page"
                                   commandName="reviewCommand">
                            <form:errors path="*" cssClass="error invalid" cssStyle="display:block;"/>
                            <input type="hidden" value="" name="member_id"/>
                            <input type="hidden" value="${school.name}" name="schoolname"/>
                            <input type="hidden" value="public" name="schooltype"/>
                            <input type="hidden" value="principal" name="who"/>
                            <input type="hidden" value="${school.databaseState}" name="state"/>
                            <input type="hidden" value="${school.id}" name="id"/>

                            <fieldset class="contactPw">

                                <div class="lal clearfix principalReview_firstName">
                                    <div class="alpha grid_5">
                                        <label for="fName">First name</label>
                                    </div>
                                    <div class="grid_9">
                                        <spring:input id="fName" class="text input_8" path="firstName"/>
                                    </div>
                                    <div class="grid_9 omega">

                                        <span class="error invalid">
                                            <span class="sprite i-alert vam"><!--Do not collapse--></span>
                                            Please provide your first name
                                        </span>
                                    </div>
                                </div>

                                <div class="lal clearfix principalReview_lastName">
                                    <div class="alpha grid_5">
                                        <label for="lName">Last name</label>
                                    </div>
                                    <div class="grid_9">
                                        <spring:input id="lName" class="text input_8" path="lastName"/>
                                    </div>
                                    <div class="grid_9 omega">
                                    <span class="error invalid">
                                        <span class="sprite i-alert vam"><!--Do not collapse--></span>
                                        Please provide your last name
                                    </span>
                                    </div>
                                </div>

                                <div class="lal clearfix principalReview_jobTitle">
                                    <div class="alpha grid_5">
                                        <label for="jobTitle">Job title</label>
                                    </div>
                                    <div class="grid_9">
                                        <spring:input id="jobTitle" class="text input_8" path="jobTitle"/>
                                    </div>
                                    <div class="grid_9 omega">
                                        <span class="error invalid">
                                            <span class="sprite i-alert vam"><!--Do not collapse--></span>
                                            Please provide your job title
                                        </span>
                                    </div>
                                </div>

                                <div class="lal clearfix principalReview_email">
                                    <div class="alpha grid_5">
                                    <label for="jemail">Email address</label>
                                        </div>
                                    <div class="grid_9">
                                    <spring:input id="jemail" class="text input_8" path="email"/>
                                        </div>
                                    <div class="grid_9 omega">
                                        <span class="error invalid">
                                            <span class="sprite i-alert vam"><!--Do not collapse--></span>
                                            Please provide a valid email address
                                        </span>
                                    </div>
                                </div>

                                <div class="lal clearfix principalReview_comments">
                                    <div class="alpha grid_5">
                                        <label for="principal-comments">Comments</label>
                                    </div>
                                    <div class="grid_9">
                                        <spring:textarea id="principal-comments" class="text input_8 height-2" path="comments"></spring:textarea>

                                        <div class="alpha grid_8 omega">
                                            <p class="principalReview-indent small">Please note: GreatSchools will only post one principal or school official comment at a time. If an official comment is already posted for this school, submitting this form may replace that comment.</p>
                                        </div>
                                    </div>
                                    <div class="grid_9 omega">
                                        <span class="error invalid">
                                            <span class="sprite i-alert vam"><!--Do not collapse--></span>
                                            Please provide us with your comments
                                        </span>
                                    </div>
                                </div>


                            </fieldset>

                            <fieldset class="btns">

                                <span class="error invalid" id="principalReview_termsNotChecked">
                                    <span class="sprite i-alert vam"><!--Do not collapse--></span>
                                    You must agree to our terms of use before proceeding
                                </span>

                                <div class="mbm">
                                    <input type="checkbox" name="permit" id="permit"/>
                                    <label id="touAgree" class="checkbox"
                                           for="permit">I give GreatSchools permission to post my comments online for other parents to read. Checking this box means you agree to the
                                        <link:termsOfUse title="GreatSchools Terms of Service"
                                                         target="_blank">GreatSchools Terms of Use.</link:termsOfUse></label>
                                </div>
                                <button class="button-1" type="submit" name="submitPrincipalReview" id="submitPrincipalReview">Submit</button>

                                <p>Thank you for your help!</p>

                            </fieldset>
                        </form:form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        jQuery(function () {

            function validateEmail(elementValue) {
                var emailPattern = /^[a-zA-Z0-9._-]+[+a-zA-Z0-9._-]*@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
                return emailPattern.test(elementValue);
            }

            jQuery('#principalReviewForm').submit(function () {
                var pass = true;

                var firstNameError = jQuery('#principalReviewForm .principalReview_firstName .invalid');
                var lastNameError = jQuery('#principalReviewForm .principalReview_lastName .invalid');
                var emailError = jQuery('#principalReviewForm .principalReview_email .invalid');
                var termsError = jQuery('#principalReviewForm #principalReview_termsNotChecked');
                var jobTitleError = jQuery('#principalReviewForm .principalReview_jobTitle .invalid');
                var commentsError = jQuery('#principalReviewForm .principalReview_comments .invalid')

                firstNameError.hide();
                lastNameError.hide();
                emailError.hide();
                termsError.hide();
                jobTitleError.hide();
                commentsError.hide();

                var firstName = jQuery('#principalReviewForm [name="firstName"]').val();
                var lastName = jQuery('#principalReviewForm [name="lastName"]').val();
                var email = jQuery('#principalReviewForm [name="email"]').val();
                var terms = jQuery('#principalReviewForm [name="permit"]');
                var jobTitle = jQuery('#principalReviewForm [name="jobTitle"]').val();
                var comments = jQuery('#principalReviewForm [name="comments"]').val();

                if (firstName == undefined || firstName.length == 0) {
                    firstNameError.show();
                    pass = false;
                }

                if (lastName == undefined || lastName.length == 0) {
                    lastNameError.show();
                    pass = false;
                }

                if (email == undefined || email.length == 0 || !validateEmail(email)) {
                    emailError.show();
                    pass = false
                }

                if (!terms.prop("checked")) {
                    termsError.show();
                    pass = false;
                }

                if (jobTitle == undefined || jobTitle.length == 0) {
                    jobTitleError.show();
                    pass = false;
                }

                if (comments == undefined || comments.length == 0 || comments == 'comments') {
                    commentsError.show();
                    pass = false;
                }

                return pass;
            });

            jQuery('#principal-comments').click(function () {
                if (jQuery('#principal-comments').val() == "Comments") {
                    jQuery('#principal-comments').val("");
                }
            })

        });

    </script>

    <mod:tracking pageName="principal feedback form" hier1="ESP,principal feedback form"/>
</gsml:body>


</html>
</jsp:root>