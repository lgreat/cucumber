<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:gsweb="gstaglib"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:form="http://www.springframework.org/tags/form">

    <jsp:directive.page import="gs.web.util.PageHelper"/>
    <html lang="en">

    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

    <jsp:directive.page contentType="text/html"/>
    <pageHelper:externalJavascript file="/res/js/school/espMembershipForm.js"/>
    <head>
        <title>ESP Sign up</title>
        <jsp:scriptlet>
            request.setAttribute("userLoggedIn",
                    Boolean.valueOf(gs.web.util.PageHelper.isCommunityCookieSet(request)));
        </jsp:scriptlet>
    </head>

    <gsml:body adPageName="school/esp" pageLayout="nocol">

        <c:set var="isDisabled" value="false"/>
        <c:if test="${userLoggedIn eq true}">
            <c:set var="isReadOnly" value="true"/>
        </c:if>

        <form:form commandName="schoolEspCommand">
            <form:label path="email">Email address *</form:label>
            <form:input path="email" cssClass="field" id="js_email" value="${schoolEspCommand.email}"
                        readonly="${isReadOnly}"/>
            <span id="js_invalidEmail" class="error" style="display: none;">Please enter a valid email.</span>

            <span id="js_uniqueError" class="error"
                  style="display: none;">You are already registered for this school.</span>

            <c:if test="${isUserApprovedESPMember eq true}">
                       <span>You are already a member go to landing page.</span>
            </c:if>

            <div id="js_regPanel" style="${showRegPanel eq true? '':'display:none'}">

                <div id="js_screenNameDiv" style="${showRegPanel eq true? '':'display:none'}">
                    <form:label path="screenName">User name *</form:label>
                    <form:input path="screenName" cssClass="field" id="js_screenName"
                                value="${schoolEspCommand.screenName}" readonly="${isReadOnly}"/>
                    <span class="js_screenName valid" style="display: none;">&amp;nbsp;</span>
                    <span class="js_screenName invalid"
                          style="display: none;"><!--Do not collapse.Invalid Error Message.--></span>
                </div>

                <div id="js_passwordDiv" style="display: none">
                    <form:label path="password">Password *</form:label>
                    <form:password path="password" cssClass="field" id="js_password"/>
                    <span class="js_password valid" style="display: none;">&amp;nbsp;</span>
                    <span class="js_password invalid"
                          style="display: none;"><!--Do not collapse.Invalid Error Message.--></span>
                </div>

                <div id="js_confirmPasswordDiv" style="display: none">
                    <form:label path="confirmPassword">Retype Password *</form:label>
                    <form:password path="confirmPassword" cssClass="field" id="js_confirmPassword"/>
                    <span class="js_confirmPassword valid" style="display: none;">&amp;nbsp;</span>
                    <span class="js_confirmPassword invalid"
                          style="display: none;"><!--Do not collapse.Invalid Error Message.--></span>
                </div>

                <div><strong> Your school</strong></div>

                <div>
                    <form:label path="state">State *</form:label>
                    <gsweb:stateSelector styleId="js_stateAdd"
                                         name="state"
                                         useNoState="true"
                                         noStateLabel="1. Choose state"
                                         allowNoState="false"
                            />
                    <span class="js_state invalid" style="display: none;">Please select a state.</span>
                </div>
                <div>
                    City *
                    <select id="js_citySelect" name="city">
                        <option selected="selected" value="">2. Choose city</option>
                        <c:forEach var="cityOption" items="">
                            <![CDATA[<option ]]>
                            <![CDATA[ value="${cityOption.name}">${cityOption.name}</option>]]>
                        </c:forEach>
                    </select>
                </div>

                <div>
                    <form:label path="schoolId">School *</form:label>
                    <select name="schoolId" id="js_school" class="selectChildSchool">
                        <option selected="selected" value="0">3. Choose school</option>
                        <c:forEach var="schoolOption" items="">
                            <![CDATA[<option ]]>
                            <![CDATA[ value="${schoolOption.id}">${schoolOption.name}</option>]]>
                        </c:forEach>
                    </select>
                    <span class="js_school invalid"
                          style="display: none;">Please select a state, city and school.</span>
                </div>

                <div><strong>Your contact info</strong></div>

                <div id="js_firstNameDiv" style="${showRegPanel eq true? '':'display:none'}">
                    <form:label path="firstName">First name *</form:label>
                    <form:input path="firstName" cssClass="field" id="js_firstName"
                                value="${schoolEspCommand.firstName}"/>
                    <span class="js_firstName valid" style="display: none;">&amp;nbsp;</span>
                    <span class="js_firstName invalid"
                          style="display: none;"><!--Do not collapse.Invalid Error Message.--></span>
                </div>

                <div id="js_lastNameDiv" style="${showRegPanel eq true? '':'display:none'}">
                    <form:label path="lastName">Last Name *</form:label>
                    <form:input path="lastName" cssClass="field" id="js_lastName"
                                value="${schoolEspCommand.lastName}"/>
                    <span class="js_lastName valid" style="display: none;">&amp;nbsp;</span>
                    <span class="js_lastName invalid"
                          style="display: none;"><!--Do not collapse.Invalid Error Message.--></span>
                </div>

                <div>
                    <form:label path="jobTitle">Your title *</form:label>
                    <form:select path="jobTitle" id="js_jobTitle">
                        <form:option value="">Choose One</form:option>
                        <form:option value="principal">Principal</form:option>
                        <form:option value="assistant principal">Asst. Principal</form:option>
                        <form:option value="admissions representative">Admissions Rep.</form:option>
                        <form:option value="development representative">Development Rep.</form:option>
                        <form:option value="communications representative">Communications Rep.</form:option>
                        <form:option value="administrator (other)">administrator (other)</form:option>
                        <form:option value="administrative assistant">Administrative Asst.</form:option>
                        <form:option value="webmaster">Webmaster</form:option>
                        <form:option value="registrar">Registrar</form:option>
                        <form:option value="teacher">Teacher</form:option>
                    </form:select>
                    <span class="js_jobTitle invalid" style="display: none;">Please specify your job title.</span>
                </div>

                <div>
                    <form:label path="webPageUrl">School website </form:label>
                    <form:input path="webPageUrl" cssClass="field"/>
                </div>

            </div>

            <div id="js_registeredPasswordDiv" style="display: none">
                <form:label path="registeredPassword">Password </form:label>
                <form:password path="registeredPassword" cssClass="field" id="js_registeredPassword"/>
                <span id="js_registeredPasswordEmpty" style="display: none;">Please enter your password.</span>
                <span id="js_registeredPasswordIncorrect" class="error"
                      style="display: none;">The password does not match.</span>
            </div>

            <div>
                <input type="submit" value="submit" id="js_submit"/>
            </div>

        </form:form>
    </gsml:body>

    </html>
</jsp:root>
