<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:map="urn:jsptagdir:/WEB-INF/tags/map"
          xmlns:link="urn:www.greatschools.net/taglib/link"
          version="2.0">
    <html>
    <jsp:directive.page contentType="text/html"/>
    <head>
        <title><c:out value="Best Public School Values: ${subtitle}"/></title>
    </head>
    <gsml:body adPageName="fixme" pageLayout="oneMainColumn">

        <pageHelper:externalCss file="/res/css/school/bpsv.css" />

        <table width="100%"><tr>
            <td style="vertical-align: top">
                <h1><c:out value="Best Public School Values: ${subtitle}"/></h1>
                <p>
                    Note: In order to be considered, a city had to have an average API Rank of 6.95 or greater, which
                    means the
                    city's API Rank is above average (6.94 is the average API Rank of all Bay Area cities).</p>

            </td>
            <td class="sidebar"><link:article articleId="594" >Back to Article</link:article></td>
            </tr></table>
        <c:if test="${showMap}" >
            <div id="mapContainer">
                <div id="map">&#160;</div>
                <noscript>In order to view this map, enable JavaScript in your browser.</noscript>
            </div>
            <map:setup/>
            <map:cities functionName="createMap"
                        id="map"
                        lon="-122.3"
                        lat="38.0"
                        scale="8"
                        tooltips="false"
                        bubbles="true"
                        cities="${cities}"/>
            <pageHelper:addOnLoadHandler handler="createMap()"/>
        </c:if>
        <c:if test="${not showMap}" >
            <table class="bpsv" cellspacing="0" cellpadding="0">
                <tr>
                    <c:if test="${showRank}">
                        <th>Rank</th>
                    </c:if>
                    <th>City</th><!--th>County</th--><th>Median Home Price</th><th>Average
                    API Rank</th><th># schools serving elementary grades</th><th># schools serving
                    middle school grades</th><th># schools serving
                    high school grades</th><!--th>Find schools</th-->
                </tr>
                <c:set var="i" value="1"/>
                <c:forEach items="${cities}" var="city">
                    <tr class="${(i mod 2 == 1) ? 'odd' : 'even'}">
                        <c:if test="${showRank}">
                            <td class="rank">${city.rank}</td>
                        </c:if>
                        <td class="name"><gsml:a href="${city.cityPageHref}">${city.cityName}</gsml:a></td>
                        <!--<td class="county">${city.countyName}</td>-->
                        <td class="price"><c:if test="${city.medianHomePrice ge 0}">$<fmt:formatNumber value="${city.medianHomePrice}"
                                                                       maxFractionDigits="0"/></c:if><c:if
                                test="${city.medianHomePrice lt 0}">n/a</c:if></td>
                        <td class="api"><c:if test="${city.averageApiRank ge 0}"><fmt:formatNumber
                                value="${city.averageApiRank}"
                                minFractionDigits="1"
                                maxFractionDigits="1"/></c:if><c:if
                                test="${city.averageApiRank lt 0}">n/a</c:if></td>
                        <td class="e"><link:schools city="${city}" levelCode="e" schoolTypes="public,charter"><c:if test="${city.elementarySchoolsCount eq 1}">1 school</c:if><c:if test="${city.elementarySchoolsCount gt 1}">${city.elementarySchoolsCount} schools</c:if></link:schools></td>
                        <td class="m"><link:schools city="${city}" levelCode="m" schoolTypes="public,charter"><c:if test="${city.middleSchoolsCount eq 1}">1 school</c:if><c:if test="${city.middleSchoolsCount gt 1}">${city.middleSchoolsCount} schools</c:if></link:schools></td>
                        <td class="h"><link:schools city="${city}" levelCode="h" schoolTypes="public,charter"><c:if test="${city.highSchoolsCount eq 1}">1 school</c:if><c:if test="${city.highSchoolsCount gt 1}">${city.highSchoolsCount} schools</c:if></link:schools></td>
                        <!--<td class="link"><gsml:a href="${city.schoolsPageHref}">Browse ${city.cityName} schools</gsml:a>-->
                        <!--</td>-->
                    </tr>
                    <c:set var="i" value="${i + 1}"/>
                </c:forEach>
            </table>
        </c:if>
        <mod:tracking pageName="Best Public School Values:${title}:${showMap?':map':''}"
                      pageType="city"
                      hier1="cities,best public school values,${title},${showMap?',map':''}"/>
    </gsml:body>
    </html>
</jsp:root>
