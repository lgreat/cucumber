<jsp:root xmlns="http://www.w3.org/1999/xhtml"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsweb="gstaglib"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:form="http://www.springframework.org/tags/form"
          version="2.0">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
<jsp:directive.page contentType="text/html"/>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>School Search Widget</title>
    <style type="text/css">
        /* Page styles */
        body {
            font-family: "Trebuchet MS", Arial, sans-serif;
            color: #666;
            font-size: 14px;
        }
        div.top {
            width: 640px;
        }
        h1, h2 {
            font-size: 18px;
            color: #333;
            font-weight:normal;
            margin: 0 0 15px 0;
            padding: 0;
        }
        h2 {
            font-size: 17px;
            margin-bottom: 5px;
        }
        ul {
            margin: 0;
        }
        p, .section input, label {
            color: #666;
        }
        p {
            margin: 0;
            padding: 0;
        }
        table {
            margin-top: 25px;
        }
        td.leftSide {
            width: 400px;
            padding-left: 10px;
        }
        table td {
            vertical-align: top;
        }
        div.section {
            margin-bottom: 15px;
            position: relative;
        }
        .section input {
            margin: 5px 0 0 10px
        }
        .searchQuery input {
            width: 200px;
        }
        .cobrandSite input {
            width: 100px;
        }
        div.dim input {
            margin-right: 10px;
        }
        div.specifyDim {
            margin-left: 34px;
        }
        div.specifyDim input {
            width: 50px;
            margin-right: 20px;
        }
        .email input {
            width: 200px;
        }
        input.submitButton {
            margin: 10px 0 0 10px;
        }
        p.questions {
            margin-top: 10px;
        }
        p.questions a, p.questions a:hover {
            color: #39A;
            text-decoration: underline;
        }

        /* Widget frame styles */
        div#GS_schoolSearchWidget {
            border: solid 4px #BFE9F1;
            border-bottom-width: 20px;
            width: ${requestScope.command.iframeWidth+2}px;
            position: relative;
            font-family: "Trebuchet MS", Arial, sans-serif;
        }

        div.GS_widget_innerBorder {
            border: solid 1px #9CD4DB;
        }

        div.GS_widget_footer {
            height: 40px;
            padding: 0 5px 0 15px;
        }

        div.GS_widget_footer img {
            margin-top: 8px;
            float: left;
            border: 0
        }

        div.GS_seo {
            float: right;
            text-align: right;
            width: 120px;
            margin-top: 3px;
        }

        div.GS_seo a, div.GS_seo a:hover {
            text-decoration: underline;
            color: #666;
            font-size: 10px;
        }

        div.GS_getWidget {
            position: absolute;
            bottom: -17px;
            right: 8px;
        }

        div.GS_getWidget a, div.GS_getWidget a:hover {
            color: #289;
            font-size: 11px;
            text-decoration: underline;
        }
    </style>
    <script type="text/javascript">
        <![CDATA[
        // <!--
        function inputsValid() {
            var customizeForm = document.forms['customizeForm'];
            if (customizeForm.width.value < 300) {
                customizeForm.width.value = 300;
                alert("Minimum width is 300");
                return false;
            }
            if (customizeForm.height.value < 412) {
                customizeForm.height.value = 412;
                alert("Minimum height is 412");
                return false;
            }
            if (customizeForm.email.value == '') {
                customizeForm.email.select();
                alert("You must provide an email address");
                return false;
            }
            return true;
        }

        function GS_updateSEOLinks(cityName, stateName, stateAbbr) {
            var cityLink = document.getElementById('GS_city_SEO');
            var stateLink = document.getElementById('GS_state_SEO');

            var cityUrl = GS_replaceAll(cityName, "%27", "'");
            cityUrl = GS_replaceAll(cityUrl, " ", "_");
            cityUrl = GS_replaceAll(cityUrl, "+", "_");
            cityLink.href = "/city/" + cityUrl + "/" + stateAbbr;
            cityLink.innerHTML = cityName  + " schools";
            stateLink.href = "/modperl/go/" + stateAbbr;
            stateLink.innerHTML = stateName + " schools";
        }

        function GS_replaceAll(strSource, strMatch, strReplace) {
            var rval = strSource;
            var index = rval.indexOf(strMatch);
            while (index != -1) {
                rval = rval.replace(strMatch, strReplace);
                index = rval.indexOf(strMatch);
            }
            return rval;
        }

        function selectDim(width, height) {
            document.forms['customizeForm'].width.value=width;
            document.forms['customizeForm'].height.value=height;
        }

        function customDim() {
            document.forms['customizeForm'].dimensions3.checked = true;
        }
        // -->
        ]]>
    </script>
</head>
<body>
    <div class="top">
        <h1>GreatSchools School Finder Widget</h1>
        <p>
            Provide school information on your Web site from the independent, nonprofit
            organization that has been improving education by inspiring parents to get
            involved for over a decade. This flexible widget lets you:
        </p>
        <ul>
            <li>Easily map school based on address, zip or city.</li>
            <li>See schools mapped, with pins showing the GreatSchools Rating, a measure of
            school performance.</li>
            <li>Click in to individual schools and see how parents have rated the school. K-12
            schools nationwide have an average of 5 parent ratings.</li>
            <li>View preschools, elementary, middle or high schools.</li>
        </ul>
    </div>
    
    <table>
        <tr>
            <td class="leftSide">
                <h2>Create Your Customized Widget:</h2>
                <form:form cssClass="customize" name="customizeForm" action="/widget/customizeSchoolSearchWidget.page" method="post">
                    <div class="section searchQuery">
                        <p>Step 1: Choose address, zip or city, state<br/>
                        Pick the location that you'd like your widget to feature</p>
                        <form:input path="searchQuery"/>
                    </div>

                    <div class="section cobrandSite">
                        <p>Step 2: Choose cobrand<br/>
                        Pick the cobrand, or leave in 'www' for none</p>
                        <form:input path="cobrand"/>
                    </div>

                    <div class="section widgetSize">
                        <p>Step 3: Choose the size<br/>
                        Do you want the widget to be small for
                        your blog, or full page for your
                        real estate Web site?</p>
                        <div class="dim smallDim">
                            <form:radiobutton path="dimensions" value="300x412" label="Small (300 x 412)"
                                              onclick="selectDim(300, 412);"/>
                        </div>
                        <div class="dim panDim">
                            <form:radiobutton path="dimensions" value="750x412" label="Panoramic (750 x 412)"
                                              onclick="selectDim(750, 412);"/>
                        </div>
                        <div class="dim customDim">
                            <form:radiobutton path="dimensions" value="custom" label="Custom"/>
                        </div>
                        <div class="specifyDim">
                            <form:label path="width">Width:</form:label><form:input path="width" onclick="customDim();"/>
                            <form:label path="height">Height:</form:label><form:input path="height" onclick="customDim();"/>
                        </div>
                        <!-- 298x410 -->
                    </div>

                    <div class="section widgetColors">
                        <p>Step 4: Choose your colors<br/>
                        Customize the widget to blend in with
                        your Web site</p>
                        
                    </div>

                    <div class="section email">
                        <p>Step 5: Enter your email address<br/>
                        Required to customize the widget. We'll
                        send your widget code directly to your
                        inbox.</p>
                        <form:input path="email"/>
                    </div>

                    <input type="submit" name="preview" value="Create Widget Code"
                           onclick="return inputsValid();" class="submitButton"/>
                </form:form>
                <p class="questions">Questions? Contact us at <a href="mailto:widget-support@greatschools.net">widget-support@greatschools.net</a>.</p>
            </td>
            <td class="rightSide">
                <div id="GS_schoolSearchWidget">
                    <div class="GS_widget_innerBorder">
                        <div id="widget">
                            <iframe class="greatschools"
                                    src="${requestScope.command.iframeUrl}"
                                    width="${requestScope.command.iframeWidth}" height="${requestScope.command.iframeHeight}"
                                    marginheight="0" marginwidth="0"
                                    frameborder="0" scrolling="no"><!-- Keep from collapsing --></iframe>
                        </div>
                        <div class="GS_widget_footer">
                            <a href="/" target="_blank"><img src="/res/img/widget/poweredby_logo.gif"
                                                             alt="Powered by GreatSchools"/></a>
                            <div class="GS_seo">
                                <!-- These links should always go to www -->
                                <div class="GS_city"><a href="/city/San_Francisco/CA"
                                                        target="_blank" rel="follow follow"
                                                        id="GS_city_SEO">San Francisco schools</a></div>
                                <div class="GS_state"><a href="/modperl/go/CA"
                                                         target="_blank" rel="follow follow"
                                                         id="GS_state_SEO">California schools</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="GS_getWidget">
                        <a href="#">Get this schools widget for my site</a>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</body>
</html>
</jsp:root>