<jsp:root xmlns="http://www.w3.org/1999/xhtml"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:gsweb="gstaglib"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:form="http://www.springframework.org/tags/form"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          version="2.0">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
<jsp:directive.page contentType="text/html"/>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>School Search Widget</title>
    <pageHelper:externalCss file="/res/css/widget/customizeSchoolSearchWidget.css"/>
    <pageHelper:externalJavascript file="/res/js/customizeSchoolSearchWidget.js"/>
    <style type="text/css">
        /* Widget frame styles */
        div#GS_schoolSearchWidget {
            border: solid 4px #${requestScope.command.backgroundColor};
            border-bottom-width: 20px;
            width: ${requestScope.command.iframeWidth+2}px;
            position: relative;
            font-family: "Trebuchet MS", Arial, sans-serif;
        }

        div.GS_widget_innerBorder {
            border: solid 1px #${requestScope.command.bordersColor};
        }

        div.GS_widget_footer {
            height: 40px;
            padding: 0 5px 0 15px;
        }

        div.GS_widget_footer img {
            margin-top: 8px;
            float: left;
            border: 0
        }

        div.GS_seo {
            float: right;
            text-align: right;
            width: 120px;
            margin-top: 3px;
        }

        div.GS_seo a, div.GS_seo a:hover {
            text-decoration: underline;
            color: #666;
            font-size: 10px;
        }

        div.GS_getWidget {
            position: absolute;
            bottom: -17px;
            right: 8px;
        }

        div.GS_getWidget a, div.GS_getWidget a:hover {
            color: #${requestScope.command.textColor};
            font-size: 11px;
            text-decoration: underline;
        }
    </style>
    <script type="text/javascript">
        <![CDATA[
        // <!--
        function GS_updateSEOLinks(cityName, stateName, stateAbbr) {
            var cityLink = document.getElementById('GS_city_SEO');
            var stateLink = document.getElementById('GS_state_SEO');

            var cityUrl = GS_replaceAll(cityName, "%27", "'");
            cityUrl = GS_replaceAll(cityUrl, " ", "_");
            cityUrl = GS_replaceAll(cityUrl, "+", "_");
            cityLink.href = "/city/" + cityUrl + "/" + stateAbbr;
            cityLink.innerHTML = cityName  + " schools";
            stateLink.href = "/modperl/go/" + stateAbbr;
            stateLink.innerHTML = stateName + " schools";
        }

        function GS_replaceAll(strSource, strMatch, strReplace) {
            var rval = strSource;
            var index = rval.indexOf(strMatch);
            while (index != -1) {
                rval = rval.replace(strMatch, strReplace);
                index = rval.indexOf(strMatch);
            }
            return rval;
        }
        // -->
        ]]>
    </script>
</head>
<body>
    <div class="top">
        <h1>GreatSchools School Finder Widget</h1>
        <p>
            Add school information to your Web site for free to:
        </p>
        <ul>
            <li>Easily assess the academic performance of a school</li>
            <li>See how other parents rate and review specific schools</li>
            <li>Map schools by address, zip or city</li>
        </ul>
    </div>

    <div class="body">
        <h2>Create Your Customized Widget</h2>
        <table>
            <tr>
                <td class="leftSide">
                    <form:form cssClass="customize" name="customizeForm" action="/widget/customizeSchoolSearchWidget.page" method="post">
                        <div class="section searchQuery">
                            <div class="step"><span class="step">Step 1:</span>
                                <span class="title">Choose address, zip or city, state</span></div>
                            <div class="instructions">Pick the location that you'd like your widget to feature</div>
                            <form:input path="searchQuery"/>
                        </div>

                        <div class="section widgetSize">
                            <div class="step"><span class="step">Step 2:</span>
                                <span class="title">Choose the size</span></div>
                            <div class="instructions">
                                Do you want the widget to be small for
                                your blog, or full page for your
                                real estate Web site?
                            </div>
                            <div class="dim smallDim">
                                <form:radiobutton path="dimensions" value="300x412" label="Small (300 x 412)"
                                                  onclick="selectDim(300, 412);"/>
                            </div>
                            <div class="dim panDim">
                                <form:radiobutton path="dimensions" value="750x412" label="Panoramic (750 x 412)"
                                                  onclick="selectDim(750, 412);"/>
                            </div>
                            <div class="dim customDim">
                                <form:radiobutton path="dimensions" value="custom" label="Custom"/>
                            </div>
                            <div class="specifyDim">
                                <form:label path="width">Width:</form:label><form:input path="width" onclick="customDim();"/>
                                <form:label path="height">Height:</form:label><form:input path="height" onclick="customDim();"/>
                            </div>
                            <!-- 300x412 -->
                        </div>

                        <div class="section widgetColors">
                            <div class="step"><span class="step">Step 3:</span>
                                <span class="title">Choose your colors</span></div>
                            <div class="instructions">
                                Customize the widget to blend in with
                                your Web site
                            </div>
                            <div class="colors background">
                                <form:label path="backgroundColorSelect" cssClass="name">Background:</form:label>
                                <form:select path="backgroundColorSelect" onchange="updateColor(this, 'backgroundColor', this.value);">
                                    <form:options items="${requestScope.command.backgroundColorOptions}"/>
                                </form:select>
                                <form:label path="backgroundColor" cssClass="hex">or Hex#</form:label>
                                <form:input path="backgroundColor"/>
                            </div>
                            <div class="colors text">
                                <form:label path="textColorSelect" cssClass="name">Text:</form:label>
                                <form:select path="textColorSelect" onchange="updateColor(this, 'textColor', this.value);">
                                    <form:options items="${requestScope.command.textColorOptions}"/>
                                </form:select>
                                <form:label path="textColor" cssClass="hex">or Hex#</form:label>
                                <form:input path="textColor"/>
                            </div>
                            <div class="colors borders">
                                <form:label path="bordersColorSelect" cssClass="name">Borders:</form:label>
                                <form:select path="bordersColorSelect" onchange="updateColor(this, 'bordersColor', this.value);">
                                    <form:options items="${requestScope.command.bordersColorOptions}"/>
                                </form:select>
                                <form:label path="bordersColor" cssClass="hex">or Hex#</form:label>
                                <form:input path="bordersColor"/>
                            </div>
                            <script type="text/javascript">
                                {
                                    var colorSelect;
                                    var i;
                                    var colorOption;
                                    colorSelect = document.getElementById('backgroundColorSelect');
                                    colorSelect.style.backgroundColor = '#' + colorSelect.value;
                                    for (i=0; i &lt; colorSelect.options.length; i++) {
                                        colorOption = colorSelect.options[i];
                                        colorOption.style.backgroundColor = '#' + colorOption.value;
                                    }
                                    colorSelect = document.getElementById('textColorSelect');
                                    colorSelect.style.backgroundColor = '#' + colorSelect.value;
                                    for (i=0; i &lt; colorSelect.options.length; i++) {
                                        colorOption = colorSelect.options[i];
                                        colorOption.style.backgroundColor = '#' + colorOption.value;
                                    }
                                    colorSelect = document.getElementById('bordersColorSelect');
                                    colorSelect.style.backgroundColor = '#' + colorSelect.value;
                                    for (i=0; i &lt; colorSelect.options.length; i++) {
                                        colorOption = colorSelect.options[i];
                                        colorOption.style.backgroundColor = '#' + colorOption.value;
                                    }
                                }
                            </script>
                        </div>

                        <div class="section cobrandSite">
                            <div class="step"><span class="step">Step 4:</span>
                                <span class="title">(optional, for GreatSchools cobrand customers only)</span></div>
                            <div class="instructions">
                                Enter the cobrand URL you want the widget to link into<br/>
                                EX: XXX.greatschools.net
                            </div>
                            <form:input path="cobrand"/>
                        </div>

                        <div class="section email">
                            <div class="step"><span class="step">Step 5:</span>
                                <span class="title">Enter your email address</span></div>
                            <div class="instructions">
                                Required to customize the widget. We'll
                                send your widget code directly to your
                                inbox
                            </div>
                            <form:input path="email"/>
                        </div>

                        <div class="section terms">
                            <form:checkbox path="terms" id="termsBox"/>
                            <form:label path="terms" for="termsBox">
                                I agree to the <gsml:popupWindow width="800" height="600" left="50" top="50"
                                                                 title="GreatSchools Terms of Use"
                                                                 href="/cgi-bin/static/terms.html/CA">GreatSchools Terms of Use.</gsml:popupWindow>
                            </form:label>
                        </div>

                        <input type="submit" name="preview" value="Preview"
                               onclick="return previewValid();" class="previewButton"/>
                        <input type="submit" name="submit" value="Create Widget Code"
                               onclick="return inputsValid();" class="submitButton"/>
                    </form:form>
                    <p class="questions">Questions? Contact us at <a href="mailto:widget@greatschools.net">widget@greatschools.net</a>.</p>
                </td>
                <td class="rightSide">
                    <div id="GS_schoolSearchWidget">
                        <div class="GS_widget_innerBorder">
                            <div id="widget">
                                <iframe class="greatschools"
                                        src="${requestScope.command.iframeUrl}"
                                        width="${requestScope.command.iframeWidth}" height="${requestScope.command.iframeHeight}"
                                        marginheight="0" marginwidth="0"
                                        frameborder="0" scrolling="no"><!-- Keep from collapsing --></iframe>
                            </div>
                            <div class="GS_widget_footer">
                                <a href="/" target="_blank"><img src="/res/img/widget/poweredby_logo.gif"
                                                                 alt="Powered by GreatSchools"/></a>
                                <div class="GS_seo">
                                    <!-- These links should always go to www -->
                                    <div class="GS_city"><a href="/city/San_Francisco/CA"
                                                            target="_blank" rel="follow follow"
                                                            id="GS_city_SEO">San Francisco schools</a></div>
                                    <div class="GS_state"><a href="/modperl/go/CA"
                                                             target="_blank" rel="follow follow"
                                                             id="GS_state_SEO">California schools</a></div>
                                </div>
                            </div>
                        </div>
                        <div class="GS_getWidget">
                            <a href="#">Get this schools widget for my site</a>
                        </div>
                    </div>
                </td>
            </tr>
        </table>

        <div class="faq">
            <h2>GreatSchools School Finder Widget FAQ</h2>

            <div class="question">1) Does the School Finder Widget cost anything?</div>
            <div class="answer">No, it's free! And it's simple to add to your Web site.</div>

            <div class="question">2) Does the School Finder Widget cost anything?</div>
            <div class="answer">No, it's free! And it's simple to add to your Web site.</div>

            <div class="question">2) Does the School Finder Widget cost anything?</div>
            <div class="answer">No, it's free! And it's simple to add to your Web site.</div>

            <div class="question">4) Does the School Finder Widget cost anything?</div>
            <div class="answer">No, it's free! And it's simple to add to your Web site.</div>

            <div class="question">5) Does the School Finder Widget cost anything?</div>
            <div class="answer">No, it's free! And it's simple to add to your Web site.</div>
        </div>
    </div>

    <div style="display:none">
        <c:set var="pageName" value="Customize Widget"/>
        <mod:tracking pageName="${pageName}"
                      hier1="Home,ContactUs,Partner Opportunities,SchoolFinder Widget"/>
        ${modTracking}
    </div>
</body>
</html>
</jsp:root>