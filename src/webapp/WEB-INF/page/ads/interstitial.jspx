<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" xmlns="http://www.w3.org/1999/xhtml" version="2.0"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
        >
    <jsp:directive.page import="org.apache.commons.lang.StringUtils"/>
    <jsp:directive.page import="java.net.URLDecoder"/>
    <jsp:scriptlet>
        String uri = request.getParameter("passThroughURI");
        if (StringUtils.isNotEmpty(uri)) {
            String uriDecoded = URLDecoder.decode(uri, "UTF-8");
            request.setAttribute("passThroughURI", uriDecoded);
        }
        gs.web.util.PageHelper.hideLeaderboard(request);
        gs.web.util.PageHelper.hideHeader(request);
        gs.web.util.PageHelper.hideFooterAd(request);
        gs.web.util.PageHelper.hideFooter(request);
    </jsp:scriptlet>
    <html lang="en">
    <pageHelper:addOnLoadHandler handler="createCookie('gs_interstitial', 'viewed', 1);"/>
    <jsp:output doctype-root-element="html"
                doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
    <jsp:directive.page contentType="text/html"/>
    <head>
        <title>Interstitial Ad</title>
        <meta http-equiv="refresh" content="20;url=${passThroughURI}"/>
        <pageHelper:externalCss file="/res/css/brand.css"/>
        <pageHelper:externalCss file="/res/css/ads/interstitial.css"/>
        <script type="text/javascript">
            function continueToDestination() {
                location.replace('${passThroughURI}');
            }

            function setContinueTimeout() {
                setTimeout("continueToDestination()", 15000);
            }
        </script>
        <pageHelper:addOnLoadHandler handler="setContinueTimeout()"/>
    </head>
    <body>
        <gsml:a href="/">
            <gsml:img src="/res/img/logo/logo_GS_330x110.gif"
                      alt="GreatSchools: The Parents&#039; Guide to K-12 Success" id="logo"/>
        </gsml:a>
        <div id="thanks">
            GreatSchools thanks the foundations and advertisers that make<br/>
            it possible to provide our site free to millions of parents. 
        </div>
        <div id="skip" class="bigger bold">
            <a href="${passThroughURI}" onclick="continueToDestination(); return false;">To skip this ad, click here</a>
            <a href="${passThroughURI}" onclick="continueToDestination(); return false;">
                <gsml:img src="/res/img/ad/two_pink_arrows_right.gif" alt="To skip this ad, click here"
                          id="arrows"/>
            </a>
        </div>
        <div id="background">
            <!-- Unfortunately, can't center a div unless it has its width set, and ads will be variable width -->
            <table id="frame" align="center">
                <tr>
                    <td id="shortly">
                        <div id="message">You will see the page you requested shortly</div>
                    </td>
                </tr>
                <tr>
                    <td id="interstitial">
                        <ad:interstitial/>
                    </td>
                </tr>
            </table>
        </div>
        <mod:tracking pageName="Interstitial Ad"
                      hier1="Advertising,Interstitial Ad"/>
    </body>
    </html>
</jsp:root>