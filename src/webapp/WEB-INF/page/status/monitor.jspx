<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
          xmlns="http://www.w3c.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
        >
<html lang="en">

<jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<jsp:directive.page contentType="text/html"/>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta name="wrapperstate" content="FL"/>
    <title>GreatSchools GSWeb Status Page</title>
    <style type="text/css">
        body {
            text-align: center;
        }

        h1 {
            font-family: Georgia, serif;
            font-variant: small-caps;
            font-size: 12pt;
        }

        .statusbox {
            width: 500px;
            border: thin dashed black;
            padding: 10px;
            background: #E8E8E8;
            margin: 0 auto;
        }

        .statustitle {
            text-align: left;
            color: #333399;
        }

        .statusvalue {
            text-align: left;
            text-transform: capitalize;
            color: #AA3333;
        }
    </style>
</head>

<body>
<h1>GSWeb Status Page</h1>
<!-- Opted for a table instead of pure CSS since this truly is a table -->
<table class="statusbox">
    <tr>
        <td class="statustitle">GSWeb build date/time (PST)</td>
        <td class="statusvalue" colspan="2">${buildtime}</td>
    </tr>
    <tr>
        <td class="statustitle">GSWeb Version</td>
        <td class="statusvalue" colspan="2">${version}</td>
    </tr>
    <tr>
        <td class="statustitle">Tomcat host serving request</td>
        <td class="statusvalue" colspan="2">${hostname}</td>
    </tr>
    <tr>
        <td class="statustitle">Main database read/write test</td>
        <td class="statusvalue">${mainReadWrite}</td>
        <td class="statuserror">${mainError}</td>
    </tr>
    <tr>
        <td class="statustitle">State database read/write test</td>
        <td class="statusvalue">${stateReadWrite}</td>
        <td class="statuserror">${stateError}</td>
    </tr>
    <tr>
        <td class="statustitle">Session test previous host</td>
        <td class="statusvalue">${lasthost}</td>
        <td class="statuserror"></td>
    </tr>
    <tr>
        <td class="statustitle">Session test view count</td>
        <td class="statusvalue">${hitcount}</td>
        <td class="statuserror"></td>
    </tr>
    <tr>
        <td class="statustitle">Lucene index version</td>
        <td class="statusvalue">${indexVersion}</td>
        <td class="statuserror"></td>
    </tr>
</table>

<br/>

<table class="statusbox">

    <tr>
        <td>Environment Properties</td>
    </tr>
    <c:forEach items="${environment}" var="item">
        <tr>
            <td class="statustitle">
                <c:out value="${item.key}"/>
            </td>
            <td class="statusvalue">
                <c:out value="${item.value}"/>
            </td>
        </tr>
    </c:forEach>
</table>

<br/>

<table class="statusbox">
    <gsml:url var="monitorPage" value="/status/monitor.page"/>

    <form action="${monitorPage}" method="post">
        <tr>
            <td class="statustitle">Trigger test log message: </td>
            <td><input type="text" name="logmessage" size="30"/></td>
            <td><input type="submit" value="log it!"/></td>
        </tr>
    </form>
</table>

<br/>
</body>
</html>
</jsp:root>

