<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="1.2"
    xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:spring="http://www.springframework.org/tags"
    xmlns:layout="urn:jsptagdir:/WEB-INF/tags/layout"
    >
    <html lang="en">

        <jsp:output doctype-root-element="html"
            doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
            doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

        <jsp:directive.page contentType="text/html"/>

        <head>
            <![CDATA[
            <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
            <link rel="stylesheet" href="res/css/spp2.css"></link>
            <script
                type="text/javascript"
                language="JavaScript"
                src="res/js/gen_validatorv2.js">
            </script>
            ]]>
            <title>Subscribe to ${subCmd.subscriptionProduct.longName}</title>
        </head>


        <body>

            <jsp:include page="/header/moveChoose.module"/>

            <layout:wizard>
                <c:url value="/subscribe.page" var="form_submit"/>
                <form action="${form_submit}" id="subscribe" name="subscribe" method="post"
                    onsubmit="var s=getDocumentById('submit');s.setValue('Processing...');s.enabled=false">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" id="header">
                        <tr>
                            <td align="center" width="30%">
                                <img src="res/img/pixel.gif" alt=""/>
                            </td>
                            <td align="center" width="*" nowrap="nowrap" id="active">Step 1:
                                <br/>
                  Register and Pay
                            </td>
                            <td align="center">
                                <img src="res/img/wizard_dottedarrow.gif" width="100" height="10" alt="arrow"/>
                            </td>
                            <td align="center" nowrap="nowrap">Step 2:
                                <br/>
                  Get Started
                            </td>
                            <td align="center" width="30%">
                                <img src="res/img/pixel.gif" alt=""/>
                            </td>
                        </tr>
                    </table>
                    <table width="100%" border="0" cellpadding="0" cellspacing="0" id="main">
                        <tr valign="top">
                            <td width="41%">
                                <spring:bind path="subCmd">
                                    <c:if test="${status.error}">
                                        <c:forEach items="${status.errorMessages}" var="error">
                                            <div class="error">
                                                <c:out value="${error}" escapeXml="false"/>
                                            </div>
                                        </c:forEach>
                                    </c:if>
                                    <c:if test="${!status.error}">
                                        Receive unlimited access for one year to all
                                        subscription content for ${subCmd.subscriptionPrice}.
                                        <div style="align:center">
                                            <img src="res/img/conv_pic2.gif" alt="photo of family" width="165" height="230" vspace="8" border="0"/>
                                        </div>
                                        <b>Please note:</b> You will have access to subscription content
                for all states in which it is available, currently including:
                ${subscriptionStates}. Information about
                private schools is very limited in all states.
                                    </c:if>
                                </spring:bind>
                            </td>
                            <td width="59%">
                                <b>Signing up is easy. First, enter your personal
                information</b>


                                <spring:bind path="subCmd.state">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>
                                <spring:bind path="subCmd.url">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>
                                <spring:bind path="subCmd.urlLabel">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>
                                <spring:bind path="subCmd.host">
                                    <input name="${status.expression}"
                                        type="hidden"
                                        value="${status.value}"/>
                                </spring:bind>

                                <div class="formrow">
                                    <span class="label">First Name</span>
                                    <spring:bind path="subCmd.user.firstName">
                                        <input
                                            id="firstName"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Last Name</span>
                                    <spring:bind path="subCmd.user.lastName">
                                        <input id="lastName"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Street Address</span>
                                    <spring:bind path="subCmd.user.address.street">
                                        <input id="street"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">City</span>
                                    <spring:bind path="subCmd.user.address.city">
                                        <input id="city"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">State</span>
                                    <spring:bind path="subCmd.user.address.state">
                                        <input id="state"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Zip - 5 digits</span>
                                    <spring:bind path="subCmd.user.address.zip">
                                        <input id="zip"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Email address</span>
                                    <spring:bind path="subCmd.user.email">
                                        <input id="email"
                                            name="${status.expression}"
                                            type="text"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <b>Then, review and agree to the terms of the subscriber agreement</b>
                                <div class="formrow">
                                    <spring:bind path="subCmd.agree">
                                        <span class="label">
                                            <jsp:element name="input">
                                                <jsp:attribute name="id">${status.expression}</jsp:attribute>
                                                <jsp:attribute name="name">${status.expression}</jsp:attribute>
                                                <jsp:attribute name="type">checkbox</jsp:attribute>
                                                <jsp:attribute name="value">x</jsp:attribute>
                                                <!-- <c:if test="${status.value == 'x'}">
                                                     <jsp:attribute name="checked">checked</jsp:attribute>
                                                 </c:if>-->
                                            </jsp:element>
                                        </span>
                                        <span class="labelright">I agree to the terms of the
                                            <a href="http://www.greatschools.net/content/insider/subscriber.html"
                                                target="issues"
                                                onclick="window.open('','issues','width=400,height=300,scrollbars=yes')">subscriber agreement</a>
                                        </span>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                    <br/>
                                    <br/>
                                </div>
                                <b>Finally, enter your payment information</b>
                                <div class="formrow">
                                    <span class="label">Credit Card Type</span>
                                    <spring:bind path="subCmd.creditCardType">
                                        <select id="creditCardType"
                                            name="${status.expression}">
                                            <c:choose>
                                                <c:when test="${status.value == 'visa' || status.value == ''}">
                                                    <option value="visa" selected="selected">Visa</option>
                                                </c:when>
                                                <c:otherwise>
                                                    <option value="visa">Visa</option>
                                                </c:otherwise>
                                            </c:choose>
                                            <c:choose>
                                                <c:when test="${status.value == 'mc'}">
                                                    <option value="mc" selected="selected">Mastercard</option>
                                                </c:when>
                                                <c:otherwise>
                                                    <option value="mc">Mastercard</option>
                                                </c:otherwise>
                                            </c:choose>
                                            <c:choose>
                                                <c:when test="${status.value == 'amex'}">
                                                    <option value="amex" selected="selected">American Express</option>
                                                </c:when>
                                                <c:otherwise>
                                                    <option value="amex">American Express</option>
                                                </c:otherwise>
                                            </c:choose>
                                        </select>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Credit Card Number</span>
                                    <spring:bind path="subCmd.creditCardNumber">
                                        <input id="creditCardNumber"
                                            name="${status.expression}"
                                            type="text"
                                            maxlength="16"
                                            size="20"
                                            value="${status.value}"/>
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <div class="formrow">
                                    <span class="label">Expiration (MM/YY)</span>
                                    <spring:bind path="subCmd.expirationMonth">
                                        <input id="expirationMonth"
                                            name="${status.expression}"
                                            type="text"
                                            size="2" maxlength="2"
                                            value="${status.value}"/>
                                    </spring:bind>
                                    /
                                    <spring:bind path="subCmd.expirationYear">
                                        <input id="expirationYear"
                                            name="${status.expression}"
                                            type="text"
                                            size="4" maxlength="4"
                                            value="${status.value}"/>
                                    </spring:bind>

                                    <spring:bind path="subCmd.expirationMonth">
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                    <spring:bind path="subCmd.expirationYear">
                                        <c:if test="${status.error}">
                                            <c:forEach items="${status.errorMessages}" var="error">
                                                <div class="error">
                                                    <c:out value="${error}" escapeXml="false"/>
                                                </div>
                                            </c:forEach>
                                        </c:if>
                                    </spring:bind>
                                </div>

                                <spring:bind path="subCmd">
                                    <c:if test="${status.error}">
                                        <div class="formrow">
                                            <span class="label">Amount</span>
                                            <input
                                                disabled="true"
                                                readonly="true"
                                                type="text"
                                                value="${subCmd.subscriptionPrice}"/>
                                        </div>
                                    </c:if>
                                </spring:bind>
                            </td>
                        </tr>
                    </table>


                    <table width="100%" border="0" cellpadding="0" cellspacing="0" id="footer">
                        <tr>
                            <td width="50%">
                                <img src="res/img/pixel.gif" alt=""/>
                            </td>
                            <td width="50%" align="right">
                                <input name="Submit" type="submit" id="Submit" value="Submit"/>
                            </td>
                        </tr>
                    </table>

                </form>

                <![CDATA[
        <script language="JavaScript" type="text/javascript">
  var v  = new Validator("subscribe");
  v.addValidation("firstName","req","Please enter your first name");
  v.addValidation("lastName","req","Please enter your last name");
  v.addValidation("street","req","Please enter your address");
  v.addValidation("city","req","Please enter your City");
  v.addValidation("state","req","Please enter your state");
  v.addValidation("zip","req","Please enter your ZIP code");
  v.addValidation("email","req","Please enter your email address");
  v.addValidation("email","email");
  v.addValidation("creditCardNumber","req","Please enter your card number");
  v.addValidation("creditCardNumber","numeric");
  v.addValidation("expirationMonth","req","Please enter the expiration month");
  v.addValidation("expirationMonth","numeric");
  v.addValidation("expirationYear","req","Please enter the expiration year");
  v.addValidation("expirationYear","numeric");
        </script>
                                                                                    ]]>


            </layout:wizard>

            <jsp:include page="/footer/copyright.module"/>

            <script language="javascript" type="text/javascript">
                <!--
                var fc_content='${subCmd.host}/${subCmd.state}/conversion/subscribe/-/-/-/-';
                -->
            </script>
            <!-- Fireclick Web Analytics - COPYRIGHT 1999-2005 - Please do not modify this code-->
            <script language="javascript" type="text/javascript">
                <!--
                function handle(){return true;}
                window.onerror=handle;
                var fc_host='www.greatschools.net';
                document.write('<scr'+'ipt '
                +'src="'+((location.protocol=='http:')?'http:':'https:')
                +'//a248.e.akamai.net/f/248/5462/3h/hints.netflame.cc/service/sc'+'ript/'+fc_host+'"></scr'+'ipt>');
                function fcce(){if (typeof(fcnf)!="undefined") fcnf();}
                var fcfn=window.onload;
                function fcco(){window.setTimeout("fcce();", 100);fcfn();}
                window.onload= null==fcfn ? fcce:fcco;
                // -->
            </script>


        </body>
    </html>
</jsp:root>