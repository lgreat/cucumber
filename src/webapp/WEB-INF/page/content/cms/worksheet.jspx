<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:communityHover="urn:jsptagdir:/WEB-INF/tags/community/hover"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:cms="urn:jsptagdir:/WEB-INF/tags/content/cms"
          xmlns:gsweb="gstaglib"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:k12="urn:jsptagdir:/WEB-INF/tags/promo/k12"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:article="urn:jsptagdir:/WEB-INF/tags/content/cms/article"
          version="2.0">
<jsp:directive.page import="gs.web.util.CookieUtil"/>
<html lang="en">
<jsp:directive.page contentType="text/html"/>
<jsp:scriptlet>
    request.setAttribute("isHubUser", CookieUtil.getCookieValue(request, "ishubUser"));
</jsp:scriptlet>

<pageHelper:addFacebookWorksheetMetaTags deck="${feature.summary}" title="${feature.title}"
                                        permalink="${feature.permaLink}"/>

<ad:setSlotPrefix slotPrefix="Library_Article_Page"/>

<head>
    <c:choose>
        <c:when test="${not empty feature.pageTitle}">
            <c:set var="pageTitle">${feature.pageTitle}</c:set>
        </c:when>
        <c:when test="${not empty feature.promo}">
            <c:set var="pageTitle">${feature.promo} - ${feature.primaryKategory.name}</c:set>
        </c:when>
        <c:otherwise>
            <c:set var="pageTitle">${feature.title} - ${feature.primaryKategory.name}</c:set>
        </c:otherwise>
    </c:choose>
    <title>${pageTitle} | GreatSchools</title>

    <c:choose>
        <c:when test="${not empty isHubUser}">
            <meta name="decorator" content="standardDecorator-hubs"/>
        </c:when>
        <c:otherwise>
            <meta name="decorator" content="standardDecorator-v1"/>
        </c:otherwise>
    </c:choose>
    <meta name="description" content="${feature.metaDescription}"/>
    <meta name="keywords" content="${feature.metaKeywords}"/>

    <k12:trafficDriverIncludes/>

    <link rel="stylesheet" href="/res/css/04_text/articles-v1.css?v=$RELEASE_NUMBER" type="text/css" />

</head>
<body>

<div class="container_24">
    <div class="grid_16 zir-2 articles">

        <div class="smaller pbs mbn mtm">
            <link:home>Home</link:home> &amp;gt;
            <link:cmsContent contentKey="TopicCenter#4313"
                             fullUri="/worksheets-activities.topic">Worksheets &amp;amp; Activities</link:cmsContent> &amp;gt;
            <link:cmsWorksheetGallery>Worksheets</link:cmsWorksheetGallery>
        </div>

        <div><h1 class="mts">${feature.title}</h1></div>

        <div class="clearfloat brdbtm_dotted-ccc mbm mrm"><!-- do not collapse --></div>

        <p class="text2 fl mbn">
            <c:if test="${not empty feature.grades}">
                <cms:printCmsFeatureGrades gradeString="${feature.grades}" includeLabel="${true}"/> |
            </c:if>

            ${feature.subjectsString}
        </p>

        <!-- DONE-11818 FB Like, Tweet, Email buttons (no print!); see related GS-11856 -->
        <div class="fr mrm">
            <cms:articleDistribution includeFbSendBtn="true" includeShareBtn="false" includeEmailBtn="true"/>
        </div>

        <div class="shim-15"><!-- don't collapse --></div>

        <div class="grid_9 alpha mtm">

            <!-- deck -->
            <p class="text1 mbm">
                ${fn:escapeXml(feature.summary)}
            </p>

            <div class="shim-15"><!-- don't collapse --></div>

            <!-- body (optional) - do not escape XML due to possible intentional HTML tags -->
            <c:if test="${not empty feature.body}">
                <p class="text2 mbn">
                    ${feature.body}
                </p>
            </c:if>

            <div class="shim-15"><!-- don't collapse --></div>

            <c:if test="${not empty feature.skillsList}">
                <p class="text2">
                    Skills:
                    <c:forEach var="skill" items="${feature.skillsList}" varStatus="loopStatus">
                        ${fn:escapeXml(skill)}<c:if test="${!loopStatus.last}">, </c:if>
                    </c:forEach>
                </p>
            </c:if>

            <div class="shim-15"><!-- don't collapse --></div>

            <gsml:a href="${feature.pdfUri}" styleClass="button-1" target="_blank">Print Full Size</gsml:a>

            <div class="shim-20"><!-- don't collapse --></div>

            <c:if test="${not empty feature.commonCoreStandardsList}">
                <p class="smaller" id="js-ccs-links" style="color:#333;">
                    Common Core Standards:
                    <c:forEach var="standard" items="${feature.commonCoreStandardsList}" varStatus="loopStatus">
                        <a href="${standard.url}" target="_blank" class="js-ccs-link" onclick="if (s.tl) {s.tl(this, 'o', 'WorksheetSingle_CCS_Link');}">${fn:escapeXml(standard.name)}</a><c:if
                            test="${!loopStatus.last}">, </c:if>
                    </c:forEach>
                </p>
            </c:if>

            <div class="shim-15"><!-- don't collapse --></div>

            <p class="smallest mbn" style="color: #777;">
                <c:forEach var="standard" items="${feature.commonCoreStandardsMap}" varStatus="loopStatus">
                    ${fn:escapeXml(standard.key)}<c:if
                        test="${!loopStatus.last}">, </c:if>
                </c:forEach>
            </p>
        </div>
        <div class="grid_7 omega mtm">

            <c:if test="${not empty feature.previewImageUrl}">
                <gsml:a href="${feature.pdfUri}" target="_blank">
                    <gsml:img src="${feature.previewImageUrl}"
                              title="${feature.previewImageTitle}"
                              alt="${feature.previewImageAltText}"
                              styleClass="" style="border: 1px solid #ccc"/>
                </gsml:a>
            </c:if>

            <!-- DONE-11818 acrobat reader icon -->
            <p class="smaller mtm bottom">
                <span class="iconx16 i-16-pdf vert-align-mid"><!-- do not collapse --></span> Don't have Acrobat Reader? <a
                    href="http://get.adobe.com/reader/" target="_blank">Get it now</a>.
            </p>
        </div>

        <div class="shim-20 brdbtm_dotted-ccc mbs mrm"><!-- do not collapse --></div>

        <div class="text3 fr">
            <ul>
                <c:if test="${not empty feature.otherLanguageUri}">
                    <li><a href="${feature.otherLanguageUri}">
                        <c:choose>
                            <c:when test="${feature.language eq 'ES'}">
                                <span class="bolder">Watch video in English &amp;raquo;</span>
                            </c:when>
                            <c:otherwise>
                                <span class="bolder">Ver video en espa&amp;ntilde;ol &amp;raquo;</span>
                            </c:otherwise>
                        </c:choose>
                    </a></li>
                </c:if>
            </ul>
        </div>

        <!-- DONE-RANDALL-10540 - This ad slot should appear for 15.8. I've commented it out pre-code-freeze so it doesn't appear in 15.7. -->
        <ad:adTag position="Sponsor_610x16"/>

        <!-- share this -->
        <!-- TODO-11818 switch to new version; see GS-11856 -->
        <cms:communityDistribution content="${feature}" hideShareThis="true"/>

        <div class="shim-10"><!-- do not collapse --></div>

        <!-- related worksheets -->
        <c:if test="${feature.hasPublishedRelatedWorksheets}">
            <div class="mrm">
                <cms:relatedWorksheets-v1 feature="${feature}"/>
            </div>
        </c:if>

        <div class="clearfloat brdbtm_dotted-ccc mbm mrm"><!-- do not collapse --></div>

        <div class="articleCommentForm noprint mrm">
            <c:choose>
                <c:when test="${requestScope.context.fbCommentsEnabled}">
                    <!-- FB Comments -->
                    <div><article:commentsFB-v1 comments="${comments}" feature="${feature}" fbWidth="610"/></div>
                </c:when>
                <c:otherwise>
                    <div id="enterComment">
                        <script type="text/javascript">
                            function wrapCommentWithDelimiter(comment) {
                                return "BEGIN_ARTICLE_COMMENT\n" + comment + "\nEND_ARTICLE_COMMENT\n";
                            }
                        </script>
                        <!-- Article comment form -->
                        <cms:cmsCommentForm feature="${feature}" contentUrl="${contentUrl}" type="article"/>
                        <!-- end #cmsArticleForm -->
                    </div>

                    <div class="shim-10 brdbtm_dotted-ccc mbs mrm"><!-- do not collapse --></div>

                    <div id="cmsArticleComments">
                        <c:if test="${not empty comments and fn:length(comments) gt 0}">
                            <!--<hr width="100%" class="commentDivider"/>-->
                            <h4 class="subhead2">Comments from GreatSchools.org readers</h4>

                            <div id="comments">
                                <c:forEach var="comment" items="${comments}">
                                    <div class="comment">
                                        <div class="comment-date"><fmt:formatDate value="${comment.posted}"
                                                                                  pattern="MM/d/yyyy"/>:
                                        </div>

                                        <div class="comment-text">"${comment.text}"</div>
                                    </div>
                                </c:forEach>
                            </div>
                        </c:if>
                    </div>
                </c:otherwise>
            </c:choose>
        </div>
    </div>
    <div class="grid_8 zir-1">
        <div id="squareadvert">
            <ad:AboveFold_300x250/>
        </div>

        <jsp:include page="/promo/emailSignUp.module"/>

        <jsp:include page="/content/cms/moreInCategory-v1.module?topics=${feature.primaryKategory.id}&amp;excludeType=${
                    feature.contentKey.type}&amp;excludeContentId=${feature.contentKey.identifier}&amp;language=${feature.language}&amp;strict=true"/>

        <div id="articleBottomRightAd">
            <gsweb:adTagGenerator position="BelowFold2_300x250">
                <span class="jq-ghostText">ADVERTISEMENT</span>$AD
            </gsweb:adTagGenerator>
        </div>
    </div>
</div>

<c:set var="pageName" value="WorksheetSingle"/>

<c:set var="hier1"
       value="Worksheet,${feature.gradeCategories[0].name},${feature.subjectCategories[0].name},${titleForOmniture}"/>

<mod:tracking pageName="${pageName}"
              hier1="${hier1}"
              events="event48"
              worksheetLicensorName="${feature.licensorName}"
        />

<!-- even though this is the video template, surveyType should remain "article" -->
<communityHover:interruptSurvey surveyType="article"/>
<c:if test="${!requestScope.context.crawler and !requestScope.context.cobranded and not empty surveyDetails and surveyDetails['showSurveyHover'] and !requestScope.context.iosSafari}">
    <script type="text/javascript">
        setTimeout("GSType.hover.interruptSurvey.showHover('Article ${feature.contentKey.identifier}','Article','${gsweb:escapeJavaScript(surveyDetails['url'])}')", 7000);
    </script>
</c:if>

<pageHelper:externalJavascript file="/res/js/omnitureEventNotifier.js"/>

<script type="text/javascript">
    //requires /res/js/omnitureEventNotifier.js
    /*jQuery('#js-ccs-links .js-ccs-link').click(function() {
     omnitureEventNotifier.clear();
     omnitureEventNotifier.successEvents = "event51;";
     omnitureEventNotifier.send();
     return true;
     });*/
</script>

</body>
</html>
</jsp:root>