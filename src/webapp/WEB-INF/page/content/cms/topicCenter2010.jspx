<?xml version="1.0" encoding="UTF-8"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:pageHelper="urn:jsptagdir:/WEB-INF/tags/pageHelper"
          xmlns:school="urn:jsptagdir:/WEB-INF/tags/school"
          xmlns:gsml="urn:jsptagdir:/WEB-INF/tags/gsml"
          xmlns:cms="urn:jsptagdir:/WEB-INF/tags/content/cms"
          xmlns:gsweb="gstaglib"
          xmlns:ad="urn:jsptagdir:/WEB-INF/tags/ad"
          xmlns:link="urn:www.greatschools.org/taglib/link"
          xmlns:mod="urn:jsptagdir:/WEB-INF/tags/mod"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions"
          version="2.0">
<html lang="en">
<jsp:directive.page contentType="text/html"/>
<c:set var="pageName" value="${omnitureTopicCenterName} Landing Page" scope="request"/>

<head>
    <c:choose>
        <c:when test="${not empty topicCenter.pageTitle}">
            <c:set var="pageTitle">${topicCenter.pageTitle}</c:set>
        </c:when>
        <c:otherwise>
            <c:set var="pageTitle">${topicCenter.title}</c:set>
        </c:otherwise>
    </c:choose>
    <title>${pageTitle} | GreatSchools</title>

    <meta name="description" content="${topicCenter.metaDescription}"/>
    <meta name="keywords" content="${topicCenter.metaKeywords}"/>

    <pageHelper:externalJavascript file="/res/js/topiccenter/topicCenter2010.js"/>

    <c:choose>
        <c:when test="${topicCenter.healthAndDevelopmentTopicCenter}">
            <pageHelper:setPathway pathway="HEALTH_AND_DEVELOPMENT"/>
        </c:when>
        <c:when test="${topicCenter.academicsAndActivitiesTopicCenter}">
            <pageHelper:setPathway pathway="ACADEMICS_AND_ACTIVITIES"/>
        </c:when>
        <c:when test="${topicCenter.specialEducationTopicCenter}">
            <pageHelper:setPathway pathway="LEARNING_DISABILITIES"/>
        </c:when>
        <c:when test="${topicCenter.contentKey.identifier eq 1542}">
            <pageHelper:setPathway pathway="COLLEGE"/>
        </c:when>
        <c:when test="${topicCenter.contentKey.identifier eq 1543}">
            <pageHelper:setPathway pathway="IMPROVE_YOUR_SCHOOL"/>
        </c:when>
        <c:when test="${topicCenter.preschoolTopicCenter}">
            <pageHelper:setPathway pathway="PRESCHOOL"/>
        </c:when>
        <c:when test="${topicCenter.elementarySchoolTopicCenter}">
            <pageHelper:setPathway pathway="ELEMENTARY_SCHOOL"/>
        </c:when>
        <c:when test="${topicCenter.middleSchoolTopicCenter}">
            <pageHelper:setPathway pathway="MIDDLE_SCHOOL"/>
        </c:when>
        <c:when test="${topicCenter.highSchoolTopicCenter}">
            <pageHelper:setPathway pathway="HIGH_SCHOOL"/>
        </c:when>
        <c:when test="${topicCenter.greatGiftsTopicCenter}">
            <pageHelper:setPathway pathway="GREAT_GIFTS"/>
        </c:when>
    </c:choose>

    <c:set var="slotPrefixName" value="Library_Article_Page"/>
    <ad:setSlotPrefix slotPrefix="${slotPrefixName}"/>
</head>

<gsml:body adPageName="${pageName}">

<school:miniStateLauncherHover/>

    <div id="mainGS" class="col">

    <cms:topicCenterBreadcrumbs topicCenter="${topicCenter}"/>
        
    <div><h1 class="fltlft">${topicCenter.title}</h1></div>

    <!-- this ad slot will only show up on some topic centers, currently only Health & Development, content=1539 -->
    <div class="logoAd fltrt mrgtop_5">
        <c:if test="${not empty topicCenter.contentProviderLogoUrl}">
            <c:set var="licensorLogo">
                <img src="${topicCenter.contentProviderLogoUrl}" alt="${topicCenter.contentProviderLogoAltText}"/>
            </c:set>
        </c:if>
        <c:choose>
            <c:when test="${not empty licensorLogo and topicCenter.contentKey.identifier ne 1542}">
                ${licensorLogo}
            </c:when>
            <c:otherwise>
                <ad:adTag position="HeaderLogo_88x33"/>
            </c:otherwise>
        </c:choose>
    </div>
    <!-- end logoAd -->

    <div class="spacer_5"><!-- don't collapse --></div>
    <!--<gsweb:adTagGenerator position="Inline_598x50"/>-->
    <!-- Subtopics -->
    <div id="topicContentGS" class="clearfix">

        <div id="topicbarGS" class="col">
            <cms:topicCenterTopicBar topicCenter="${topicCenter}"/>

            <div class="skyscraperAd">
                <ad:AboveFold_Left_160x600/>
            </div>
        </div>
        <!-- end #topicbarGS -->

                <div id="topicMainGS" class="col">

                    <c:if test="${!topicCenter.k12SponsorshipPage}">
                        <div id="featured">

                            <div id="featured-image">
                                <a href="${topicCenter.mainFeatureLink.url}">
                                    <img src="${topicCenter.imageUrl}" width="421" height="213"
                                         alt="${topicCenter.imageAltText}"/>
                                </a>
                            </div>

                            <div id="featured-copy" class="gradient-2 clearfix">
                                <c:if test="${not empty topicCenter.mainFeatureLink}">
                                    <h3 class="title2 mbm"><a
                                            href="${topicCenter.mainFeatureLink.url}">${topicCenter.mainFeatureLink.title}</a>
                                    </h3>

                                    <p class="featured-copy text3 mbs">${topicCenter.mainFeatureLink.description}</p>

                                    <c:choose>
                                        <c:when test="${topicCenter.mainFeatureLink.type eq 'Video'}">

                                            <div class="line">
                                                <div class="unit size3of4">&amp;nbsp;</div>
                                                <div class="unit size1of4 lastUnit">
                                                    <div class="mediaExt1-1">
                                                        <span class="img sprite video"><!-- do not collapse --></span>

                                                        <div class="bk smallText1">
                                                            <a class="wsnw"
                                                               href="${topicCenter.mainFeatureLink.url}">Watch video <span
                                                                    class="alertDoubleArrow">&amp;raquo;</span></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </c:when>
                                        <c:otherwise>
                                            <span class="fltrt smallText1">
                                            <a href="${topicCenter.mainFeatureLink.url}">More <span
                                                    class="alertDoubleArrow">&amp;raquo;</span></a>
                                        </span>
                                        </c:otherwise>
                                    </c:choose>

                                </c:if>
                            </div>

                        </div>
                        <!-- end #featured -->
                    </c:if>

                    <div class="spacer_10"><!--do not collapse--></div>
                    <!-- DONE-9457, DONE-9536 Randall, this ad slot will only show up on some topic centers, currently only Health & Development, content=1539 -->
                    <div class="inlineAd">
                        <ad:adTag position="Inline_423x60"/>
                    </div>

                    <c:if test="${topicCenter.healthAndDevelopmentTopicCenter}">
                        <div class="spacer_15"><!-- do not collapse --></div>
                    </c:if>

                    <ad:adTag position="House_Ad_423x230"/>

            <c:choose>
                <c:when test="${requestScope.topicCenter.carouselOrder eq 'video'}">
                    <cms:infiniteVideoCarousel name="${requestScope.topicCenter.videoCarouselName}"
                                  items="${requestScope.videoCarouselItems}"/>
                    <cms:infiniteCarousel name="${requestScope.topicCenter.carouselName}"
                                          items="${requestScope.carouselItems}"/>
                </c:when>
                <c:otherwise>
                    <cms:infiniteCarousel name="${requestScope.topicCenter.carouselName}"
                                  items="${requestScope.carouselItems}"/>
                    <cms:infiniteVideoCarousel name="${requestScope.topicCenter.videoCarouselName}"
                                  items="${requestScope.videoCarouselItems}"/>
                </c:otherwise>
            </c:choose>
                    <c:set var="raiseYourHand">
                        <c:import
                                url="/community/raiseYourHand.module?featureContentKey=${gsweb:urlEncode(topicCenter.contentKey)}&amp;limit=3&amp;style=topicCenter&amp;showViewAll=true&amp;showSponsor=true"/>
                    </c:set>
                    ${raiseYourHand}

                    <c:if test="${!topicCenter.stateOfEducationTopicCenter}">

                        <!-- Community links -->
                        <gsweb:currentAbsolutePath var="myUrl" urlEncode="true"/>
                        <c:set var="recentDiscussions">
                            <c:import
                                    url="/community/recentDiscussions.module?board_id=${requestScope.topicCenter.discussionBoardId}&amp;limit=5"/>
                        </c:set>
                        <c:if test="${!empty recentDiscussions}">
                            <div class="spacer_10"><!-- don't collapse --></div>
                            <div id="recentDiscussions" class="mod">
                                ${recentDiscussions}
                            </div>
                        </c:if>

                        <!-- GS-10042 only show Start a Conversation module if not a K12 topic center -->
                        <c:if test="${!fn:startsWith(requestScope.topicCenter.fullUri, '/online-education')}">
                            <div class="startAConversationModule rnd8">
                                <div id="sac-downArrow-fc6"><!--do not collapse--></div>
                                <c:set var="startAConversationModule">
                                    <c:import
                                            url="/community/startDiscussion.module?topicCenterId=${requestScope.topicCenter.contentKey.identifier}&amp;discussionBoardId=${requestScope.topicCenter.discussionBoardId}&amp;callPreviewHoverTag=false"/>
                                </c:set>
                                ${pageScope.startAConversationModule}
                            </div>
                        </c:if>

                    </c:if>
                </div>

            <!--end #topicMainGS -->

    </div>
    <!-- end #topicContentGS -->

    <!-- begin Raise Your Hand by Topic block -->
    <gsml:ifUserCanManageRaiseYourHand pageUser="${requestScope.context.user}">
        <c:if test="${not empty allRaiseYourHandDiscussions}">
            <div class="topic">
                <h3 class="introTextGA">Raise Your Hand Discussions for this topic</h3>
                <ul class="list text2">
                    <c:forEach var="raiseYourHandDiscussion" items="${allRaiseYourHandDiscussions}"
                               varStatus="ryhDStat">
                        <li><link:discussion discussionId="${raiseYourHandDiscussion.discussion.id}"
                                             fullUri="${raiseYourHandDiscussion.discussion.discussionBoard.fullUri}"><span
                                class="">${raiseYourHandDiscussion.discussion.title}</span></link:discussion></li>

                    </c:forEach>
                </ul>
            </div>
        </c:if>
    </gsml:ifUserCanManageRaiseYourHand>
    <!-- end Raise Your Hand by Topic block -->

    <div class="clear"><!-- don't collapse --></div>

</div>
<!-- end #mainGS -->

<div id="sidebarGS" class="col">
    <cms:topicCenterSidebar topicCenter="${topicCenter}" adSlotPrefix="${slotPrefixName}"/>
</div>
<!-- end #sidebarGS -->


<mod:almondNet title="${pageTitle}" category="${almondNetCategory}"/>

<mod:tracking pageName="${pageName}"
              hier1="Topic Centers,${omnitureTopicCenterName}"
              omitAlmondNet="${true}"
        />

</gsml:body>
</html>
</jsp:root>