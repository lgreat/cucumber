<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-2.5.xsd
            http://www.springframework.org/schema/aop
            http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"
       default-autowire="byName" default-lazy-init="true">

    <context:component-scan base-package="gs.web">
        <context:include-filter type="annotation"
                                expression="org.springframework.stereotype.Controller"/>
    </context:component-scan>

    <!--
    - Application context definition for "springapp" DispatcherServlet.
    -->
    <bean name="defaultHandlerMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"
          lazy-init="true">
        <property name="interceptors">
            <list>
                <bean class="gs.web.util.ReadWriteInterceptor"/>
                <bean class="gs.web.util.HttpCacheInterceptor" autowire="byName"/>
                <!-- CookieInterceptor and SeoCobrandInterceptor are dependent on SessionContextInterceptor, and must come after it in config -->
                <bean class="gs.web.util.context.SessionContextInterceptor" autowire="byName"/>
                <bean class="gs.web.util.SeoCobrandRedirectInterceptor" autowire="byName"/>
                <bean class="gs.web.util.CookieInterceptor" autowire="byName"/>
            </list>
        </property>
        <property name="alwaysUseFullPath" value="true"/>
    </bean>

    <bean name="directoryStructureUrlHandlerMapping" parent="defaultHandlerMapping"
          class="gs.web.path.DirectoryStructureUrlHandlerMapping" lazy-init="true">
        <property name="lazyInitHandlers" value="true"/>
    </bean>

    <bean name="seoHandlerMapping" parent="defaultHandlerMapping"
          class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" lazy-init="true">
        <!-- bean mappings for special SEO pages -->
        <property name="urlMap">
            <map>
                <entry key="/city/**" value="/city.page"/>
                <entry key="/top-high-schools/**" value="/schools/topSchools.page"/>
                <entry key="/schools/**" value="/schools/allInState.page"/>
                <entry key="/preschool/**" value="/preschool/index.page"/>
                <entry key="/education-topics/**" value="/content/library.page"/>
                <entry key="/holiday-giving/**" value="/content/holidayGiving.page"/>
                <entry key="/school-choice/**" value="/content/schoolChoice.page"/>
            </map>
        </property>
    </bean>

    <bean name="articleCategoryHandlerMapping" parent="defaultHandlerMapping"
          class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" lazy-init="true">
        <!-- bean mappings for article category browse pages -->
        <property name="urlMap">
            <map>
                <entry key="/articles/**" value="/articleCategory.page"/>
            </map>
        </property>
    </bean>

    <bean name="noInterceptorsHandlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"
          lazy-init="true">
        <!-- controllers that shouldn't have any interceptors other than cache headers running around them -->
        <property name="interceptors">
            <list>
                <bean class="gs.web.util.HttpCacheInterceptor" autowire="byName"/>
            </list>
        </property>
        <property name="urlMap">
            <map>
                <entry key="/chart/pie.page" value="pieController"/>
                <entry key="/util/isValidEmail.page" value="isValidEmailController"/>
                <entry key="/util/gradeToLevelCode.page" value="gradeToLevelCodeController"/>
                <entry key="/util/articleCacheController.page" value="articleCacheController"/>
                <entry key="/util/getVariantConfiguration.page" value="getVariantConfigurationController"/>
                <entry key="/content/box/v1/*/*.page" value="contentBoxController"/>
                <entry key="/promo/getSurveyHoverInterceptConfiguration.page"
                       value="getSurveyHoverInterceptConfigurationController"/>
            </map>
        </property>
    </bean>

    <bean name="loginRequiredHandlerMapping" parent="defaultHandlerMapping"
          class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" lazy-init="true">
        <property name="interceptors">
            <!--Use merge="true" to add an interceptor to the parents list  -->
            <list merge="true">
                <bean class="gs.web.util.LoginRequiredInterceptor"/>
            </list>
        </property>
        <property name="urlMap">
            <map>
                <entry key="/community/changeEmail.page" value="changeEmailController"/>
            </map>
        </property>
    </bean>

    <bean name="schoolHandlerMapping" parent="defaultHandlerMapping"
          class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"
          lazy-init="true">
        <property name="interceptors">
            <!--Use merge="true" to add an interceptor to the parents list  -->
            <list merge="true">
                <bean class="gs.web.school.SchoolPageInterceptor" autowire="byName"/>
            </list>
        </property>
        <property name="urlMap">
            <map>
                <entry key="/school/parentReviews.page" value="parentReviews"/>
                <entry key="/school/addComments.page" value="addParentReviews"/>
                <entry key="/school/updateRatings.page" value="updateRatings"/>
                <entry key="/survey/form.page" value="surveyController"/>
                <entry key="/survey/results.page" value="surveyResultsController"/>
                <entry key="/survey/start.page" value="surveySchoolLevelController"/>
                <entry key="/survey/startResults.page" value="resultsSchoolLevelController"/>
                <entry key="/school/ajaxAddComments.page" value="ajaxAddParentReviews"/>
            </map>
        </property>
    </bean>

    <bean name="schoolRestXmlWebServicesHandlerMapping" parent="defaultHandlerMapping"
          class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"
          lazy-init="true">
        <property name="interceptors">
            <!--Use merge="true" to add an interceptor to the parents list  -->
            <list merge="true">
                <bean class="gs.web.school.SchoolPageInterceptor" autowire="byName">
                    <property name="showXmlErrorPage" value="true"/>
                </bean>
            </list>
        </property>
        <property name="urlMap">
            <map>
                <entry key="/school/restAddComments.page" value="restAddParentReviews"/>
            </map>
        </property>
    </bean>

    <bean id="requiresStateInterceptor"
          class="gs.web.state.RequiresStateInterceptor"
          autowire="byName" lazy-init="true">
    </bean>

    <!-- WEB PAGE DEFINITIONS BEGIN -->

    <bean name="/robots.txt" class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>robots</value>
        </property>
    </bean>

    <bean name="/search/feedback.page"
          class="gs.web.search.FeedbackController" lazy-init="true">
        <property name="formView">
            <value>search/feedback</value>
        </property>
        <property name="commandName">
            <value>feedbackCommand</value>
        </property>
        <property name="commandClass">
            <value>gs.web.search.FeedbackCommand</value>
        </property>
    </bean>

    <bean name="/search/feedbackSubmit.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>search/feedbackSubmit</value>
        </property>
    </bean>

    <!-- ******************************************  -->
    <!--BEGIN configuration for the Beta group pages -->
    <!-- ******************************************  -->

    <bean id="emailValidator" class="gs.web.util.validator.EmailValidator"
          autowire="byName" lazy-init="true"/>
    <bean id="betaSubNotExistsValidator" class="gs.web.community.BetaSubNotExistsValidator"
          autowire="byName" lazy-init="true"/>
    <bean id="betaSubExistsValidator" class="gs.web.community.BetaSubExistsValidator"
          autowire="byName" lazy-init="true"/>
    <bean id="userValidator" class="gs.web.util.validator.UserCommandValidator"
          autowire="byName" lazy-init="true"/>
    <bean id="submitSchoolCommandValidator" class="gs.web.util.validator.SubmitSchoolCommandValidator"
          autowire="byName" lazy-init="true"/>
    <bean id="submitPreschoolCommandValidator" class="gs.web.util.validator.SubmitPreschoolCommandValidator"
          autowire="byName" lazy-init="true"/>
    <bean id="submitPrivateSchoolCommandValidator" class="gs.web.util.validator.SubmitPrivateSchoolCommandValidator"
          autowire="byName" lazy-init="true"/>

    <bean name="/index.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>index</value>
        </property>
    </bean>


    <bean name="/community/beta.page" class="gs.web.community.BetaController"
          autowire="byName" lazy-init="true">
        <property name="commandName">
            <value>betaSignupCommand</value>
        </property>
        <property name="commandClass">
            <value>gs.web.community.BetaSignupCommand</value>
        </property>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
                <ref local="betaSubNotExistsValidator"/>
            </list>
        </property>
        <property name="formView">
            <value>community/beta</value>
        </property>
        <property name="successView">
            <value>community/betaThankyou</value>
        </property>
    </bean>

    <bean name="/community/betaThankyou.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/betaThankyou</value>
        </property>
    </bean>

    <bean name="/gsHeader.page" class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          lazy-init="true">
        <property name="viewName">
            <value>gsHeader</value>
        </property>
    </bean>

    <bean name="/gsFooter.page" class="gs.web.util.CacheablePageParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>gsFooter</value>
        </property>
    </bean>

    <bean name="/widget/editorialWidget.page"
          class="gs.web.util.CacheablePageParameterizableViewController"
          lazy-init="true">
        <property name="viewName">
            <value>widget/editorialWidget</value>
        </property>
    </bean>

    <bean name="/widget/customizeSchoolInfoWidget.page"
          class="gs.web.util.CacheablePageParameterizableViewController" lazy-init="true">
        <property name="viewName" value="widget/customizeSchoolInfoWidget"/>
    </bean>

    <bean name="/schoolfinder/widget/customize.page"
          class="gs.web.widget.CustomizeSchoolSearchWidgetController" lazy-init="true">
        <property name="commandName" value="command"/>
        <property name="commandClass" value="gs.web.widget.CustomizeSchoolSearchWidgetCommand"/>
        <property name="formView" value="widget/customizeSchoolSearchWidget"/>
        <property name="successView" value="widget/customizeSchoolSearchWidget"/>
        <property name="schoolSearchWidgetController" ref="/widget/schoolSearch.page"/>
    </bean>

    <bean name="/widget/schoolSearch.page"
          class="gs.web.widget.SchoolSearchWidgetController"
          autowire="byName"
          lazy-init="true">
        <property name="formView">
            <value>widget/schoolSearch</value>
        </property>
        <property name="successView">
            <value>widget/schoolSearch</value>
        </property>
        <property name="bindOnNewForm" value="true"/>
        <property name="hidePreschools" value="true"/>
    </bean>

    <bean name="/community/betaUnsubscribe.page" class="gs.web.community.BetaUnsubscribeController"
          autowire="byName" lazy-init="true">
        <property name="commandName">
            <value>betaSignupCommand</value>
        </property>
        <property name="commandClass">
            <value>gs.web.community.BetaSignupCommand</value>
        </property>
        <property name="validator">
            <ref bean="betaSubExistsValidator"/>
        </property>
        <property name="formView">
            <value>community/betaUnsubscribe</value>
        </property>
        <property name="successView">
            <value>community/betaUnsubscribeConfirm</value>
        </property>
    </bean>

    <bean name="/community/betaUnsubscribeConfirm.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/betaUnsubscribeConfirm</value>
        </property>
    </bean>
    <!-- *****************************************  -->
    <!-- END configuration for the Beta group pages -->
    <!-- *****************************************  -->

    <bean name="/school/authorizers.page"
          class="gs.web.school.AuthorizersController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>school/authorizers</value>
        </property>
    </bean>

    <!-- Search begin -->
    <bean name="/search/search.page"
          class="gs.web.search.SearchController"
          autowire="byName" lazy-init="true">
        <constructor-arg>
            <ref bean="searcher"/>
        </constructor-arg>
        <property name="sessionForm">
            <value>false</value>
        </property>
        <property name="commandName">
            <value>searchCommand</value>
        </property>
        <property name="commandClass">
            <value>gs.data.search.SearchCommand</value>
        </property>
        <property name="searcher">
            <ref bean="searcher"/>
        </property>
    </bean>

    <!-- These beans control access to searchmanager.page -->
    <bean id="loginValidator" class="gs.web.status.LoginValidator" lazy-init="true"/>
    <bean name="/status/login.page"
          class="gs.web.status.LoginController" autowire="byName" lazy-init="true">
        <property name="sessionForm">
            <value>true</value>
        </property>
        <property name="commandName">
            <value>identity</value>
        </property>
        <property name="commandClass">
            <value>gs.web.status.Identity</value>
        </property>
        <property name="validator">
            <ref bean="loginValidator"/>
        </property>
        <property name="formView">
            <value>status/login</value>
        </property>
        <property name="successView">
            <value>/status/searchmanager.page</value>
        </property>
    </bean>

    <!-- This page allows the search indexes to be rebuilt. -->
    <bean name="/status/searchmanager.page"
          class="gs.web.status.SearchManagerController" autowire="byName" lazy-init="true">
    </bean>

    <bean name="/search/raw.page"
          class="gs.web.search.RawSearchController" autowire="byName" lazy-init="true">
        <property name="searcher">
            <ref bean="searcher"/>
        </property>
    </bean>

    <!-- Search end -->

    <!-- Status begin -->
    <!-- Status monitor to verify that database access is working and build version -->
    <bean name="/status/monitor.page"
          class="gs.web.status.MonitorController" autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>status/monitor</value>
        </property>
        <property name="searcher">
            <ref bean="searcher"/>
        </property>
    </bean>

    <bean name="/status/memorymonitor.page"
          class="gs.web.status.MonitorController" autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>status/memorymonitor</value>
        </property>
        <property name="searcher">
            <ref bean="searcher"/>
        </property>
    </bean>

    <bean name="/status/batch.page"
          class="gs.web.status.BatchLogController" autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>status/batch</value>
        </property>
    </bean>

    <bean name="/status/cache.page"
          class="gs.web.status.CacheController" autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>status/cache</value>
        </property>
    </bean>
    <!-- Status end -->

    <bean name="/content/poll.page"
          class="gs.web.util.google.GoogleSpreadsheetController" lazy-init="true">
        <property name="viewName" value="/content/poll"/>
        <property name="tableDao">
            <bean factory-bean="pollFactory" factory-method="getTableDao"/>
        </property>
    </bean>

    <bean name="pollFactory" class="gs.web.util.google.GoogleSpreadsheetDaoFactory">
        <property name="googleKey" value="pouqRkV5D_eZrSoQkrDCwBA"/>
        <property name="visibility" value="public"/>
        <property name="projection" value="values"/>
        <property name="worksheetName" value="od6"/>
    </bean>

    <bean name="/content/article.page"
          class="gs.web.content.ArticleController"
          autowire="byName" lazy-init="true">
    </bean>

    <bean name="/content/allArticles.page"
          class="gs.web.content.AllArticlesController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>301</value>
        </property>
    </bean>

    <bean name="/content/library.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>content/library</value>
        </property>
    </bean>

    <bean name="/content/articles/rss.page"
          class="gs.web.content.AllArticlesController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>content/rss</value>
        </property>
    </bean>

    <bean name="/about/aboutUs.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/aboutUs</value>
        </property>
    </bean>

    <bean name="/about/supportUs.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/supportUs</value>
        </property>
    </bean>

    <bean name="/about/donationBridge.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/donationBridge</value>
        </property>
    </bean>

    <bean name="/about/sponsors.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/sponsors</value>
        </property>
    </bean>

    <bean name="/about/gsNetwork.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/gsNetwork</value>
        </property>
    </bean>

    <bean name="/about/pressRoom.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/pressRoom</value>
        </property>
    </bean>

    <bean name="/about/pressRoom/pressReleases.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/pressRoom/pressReleases</value>
        </property>
    </bean>

    <bean name="/about/pressRoom/pressClippings.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/pressRoom/pressClippings</value>
        </property>
    </bean>

    <bean name="/about/downloadLogo.page"
          class="gs.web.about.DownloadLogoController" lazy-init="true">
    </bean>

    <bean name="/about/pressKit.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/pressKit</value>
        </property>
    </bean>

    <bean name="/about/gsFaq.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/gsFaq</value>
        </property>
    </bean>

    <bean name="/about/partnerOpportunities.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/partnerOpportunities</value>
        </property>
    </bean>

    <bean name="/about/linkToUs.page"
          class="gs.web.about.LinkToUsController"
          autowire="byName" lazy-init="true">
        <property name="formView" value="about/linkToUs"/>
        <property name="hideSchoolFinderWidgetPreschools" value="true"/>
    </bean>

    <bean name="/about/whoWeAre.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/whoWeAre</value>
        </property>
    </bean>

    <bean name="/about/privacyStatement.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/privacyStatement</value>
        </property>
    </bean>

    <bean name="/about/testimonials.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/testimonials</value>
        </property>
    </bean>

    <bean name="/about/editorialPolicy.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>about/editorialPolicy</value>
        </property>
    </bean>

    <bean name="/compareSchools.page" class="gs.web.school.CompareSchoolsController"
          autowire="byName" lazy-init="true"/>

    <bean name="/school/compareSchool.page" class="gs.web.school.CompareSchoolController"
          autowire="byName" lazy-init="true"/>

    <bean name="/schools.page"
          class="gs.web.school.SchoolsController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="school/schoolsTable"/>
    </bean>

    <bean name="/school/sampleSchoolRedirect.page" class="gs.web.school.RedirectToSampleSchoolController"
          autowire="byName" lazy-init="true"/>

    <bean name="/test/*"
          class="gs.web.util.TestViewController" lazy-init="true"/>

    <bean name="/sandbox/jspcomments.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>sandbox/jspcomments</value>
        </property>
    </bean>

    <bean name="/sandbox/*"
          class="gs.web.util.TestViewController" lazy-init="true"/>


    <!--Begin conversion pages -->
    <bean name="/community/conversion/conversion.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/conversion</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/schoolChoiceOptions.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/popup/schoolChoiceOptions</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/topRatedSchools.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/popup/topRatedSchools</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/ratings.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/popup/ratings</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/parentReviews.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/popup/parentReviews</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/flagAlerts.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/popup/flagAlerts</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/compareSchools.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/conversion/popup/compareSchools</value>
        </property>
    </bean>
    <!-- End Conversion pages -->

    <bean name="/path/compareEntry.page"
          class="gs.web.path.CompareEntryController" lazy-init="true"/>

    <bean name="/articleCategory.page"
          class="gs.web.content.ArticlesByCategoryController"
          autowire="byName" lazy-init="true"/>

    <bean name="/city.page"
          class="gs.web.geo.CityController"
          autowire="byName" lazy-init="true"/>

    <bean name="/city/"
          class="gs.web.geo.CityController"
          autowire="byName" lazy-init="true"/>

    <bean name="/Alameda/CA/"
          class="gs.web.geo.CityController"
          autowire="byName" lazy-init="true"/>

    <bean name="/cities.page"
          class="gs.web.geo.NearbyCitiesController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/geo/selectACity</value>
        </property>
    </bean>

    <bean name="/citiesAjax.page"
          class="gs.web.geo.NearbyCitiesAjaxController"
          autowire="byName" lazy-init="true"/>

    <bean name="/schools/allInState.page"
          class="gs.web.school.AllInStateController"
          autowire="byName" lazy-init="true"/>

    <bean name="/schools/topSchools.page" class="gs.web.school.TopSchoolsController" autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/school/topSchools</value>
        </property>
        <property name="tableDao">
            <bean factory-bean="topSchoolsFactory" factory-method="getTableDao"/>
        </property>
    </bean>

    <bean name="topSchoolsFactory" class="gs.web.util.google.GoogleSpreadsheetDaoFactory">
        <property name="googleKey" value="pouqRkV5D_eZtLbVwDRFtHQ"/>
        <property name="visibility" value="public"/>
        <property name="projection" value="values"/>
        <property name="worksheetName" value="od6"/>
    </bean>

    <bean name="/browseCities.page" class="gs.web.geo.BrowseCitiesController" autowire="byName" lazy-init="true"/>

    <bean name="/school/performance/bestValuesMap.page"
          class="gs.web.school.performance.BestPublicSchoolValuesController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/school/performance/bestPublicSchoolValuesMap</value>
        </property>
        <property name="showingRank">
            <value>true</value>
        </property>
        <property name="showingAll">
            <value>false</value>
        </property>
        <property name="title">
            <value>San Francisco Bay Area Best Public School Values Map</value>
        </property>
        <property name="limit">
            <value>20</value>
        </property>
    </bean>

    <bean name="/school/performance/allCities.page"
          class="gs.web.school.performance.BestPublicSchoolValuesController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/school/performance/bestPublicSchoolValues</value>
        </property>
        <property name="showingRank">
            <value>false</value>
        </property>
        <property name="showingAll">
            <value>true</value>
        </property>
        <property name="title">
            <value>San Francisco Bay Area Cities</value>
        </property>
    </bean>

    <bean name="/selectAState.page"
          class="gs.web.state.SelectAStateController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="stateLauncher"/>
    </bean>

    <bean name="/miniSelectAState.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName" value="miniStateLauncher"/>
    </bean>

    <bean name="/content/guideToTests.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/guideToTests</value>
        </property>
    </bean>

    <bean name="/content/summerSurvivalGuide.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/summerSurvivalGuide</value>
        </property>
    </bean>

    <bean name="/content/summerReading.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/summerReading</value>
        </property>
    </bean>

    <bean name="/content/specialNeeds.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/specialNeeds</value>
        </property>
    </bean>

    <bean name="/school/research.page"
          class="gs.web.school.ResearchController"
          autowire="byName" lazy-init="true">
        <property name="tableDao">
            <bean factory-bean="testScoreLandingPageTableFactory" factory-method="getTableDao"/>
        </property>
        <property name="viewName">
            <value>/school/research</value>
        </property>
    </bean>

    <bean name="/content/backToSchool.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/backToSchool</value>
        </property>
    </bean>

    <bean name="/content/stateStandards.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/stateStandards</value>
        </property>
    </bean>

    <bean name="/content/countdownToCollege.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/countdownToCollege</value>
        </property>
    </bean>

    <bean name="/content/schoolChoiceCenter.page"
          class="gs.web.util.Redirect301Controller"
          autowire="byName" lazy-init="true">
        <property name="redirectPath" value="/school-choice/"/>
    </bean>

    <bean name="/content/schoolChoice.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/schoolChoice</value>
        </property>
    </bean>

    <bean name="/content/tutoring.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/tutoring</value>
        </property>
    </bean>

    <bean name="/content/tutoring_Homework_Help.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/tutoring</value>
        </property>
    </bean>

    <bean name="/content/travel.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/travel</value>
        </property>
    </bean>

    <bean name="/content/summerPlanning.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/summerPlanning</value>
        </property>
    </bean>

    <bean name="/content/healthyKids.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/content/healthyKids</value>
        </property>
    </bean>

    <bean name="/content/holidayLearning.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/content/holidayLearning"/>
    </bean>

    <bean name="/content/holidayGiving.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/content/holidayGiving"/>
    </bean>

    <bean name="/content/movingWithKids.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/content/movingWithKids"/>
    </bean>

    <bean name="/content/mediaChoices.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/content/mediaChoices"/>
    </bean>

    <bean name="/content/actionForEducation.page"
          class="gs.web.content.Election2008Controller"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="formView" value="/content/election2008"/>
        <property name="successView" value="/content/election2008Confirm"/>
        <property name="commandName" value="edin08Cmd"/>
        <property name="commandClass" value="gs.web.content.Election2008Command"/>
    </bean>

    <bean name="/content/actionForEducationEmail.page"
          class="gs.web.content.Election2008EmailConfirmController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="formView" value="/content/election2008Confirm"/>
        <property name="successView" value="/content/election2008Confirm"/>
        <property name="commandName" value="edin08Cmd"/>
        <property name="commandClass" value="gs.web.content.Election2008EmailCommand"/>
        <property name="mailSender" ref="mailSender"/>

    </bean>

    <bean name="/content/actionForEducationQuiz.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/content/election2008Quiz"/>
    </bean>

    <bean name="/preschool/index.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/preschool/index2"/>
    </bean>

    <bean name="/geo/landing/dayton_ohio.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/geo/landing/dayton_ohio"/>
    </bean>

    <bean name="/geo/landing/milwaukee.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/geo/landing/milwaukee"/>
    </bean>

    <bean name="/promo/shutterfly/cards.page"
          class="gs.web.promo.ShutterflyCardsController"
          autowire="byName" lazy-init="true">
        <property name="mailSender" ref="mailSender"/>
    </bean>

    <bean name="/promo/webbyAwardWinner.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/promo/webbyAwardWinner"/>
    </bean>

    <bean name="/promo/youTubeVideo.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/promo/youTubeVideo"/>
    </bean>

    <bean name="/stateLauncher.page"
          class="gs.web.state.StatePathwayController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>stateLauncher</value>
        </property>
        <property name="pathways">
            <ref bean="pathwaysMap"/>
        </property>
    </bean>

    <bean name="/admin/news/list.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/admin/news/list</value>
        </property>
    </bean>

    <bean name="/admin/news/delete.page"
          class="gs.web.admin.news.DeleteNewsItemController"
          autowire="byName" lazy-init="true"/>

    <bean name="/admin/news/edit.page"
          class="gs.web.admin.news.EditNewsItemController"
          autowire="byName" lazy-init="true">
        <property name="commandName" value="newsItem"/>
        <property name="commandClass" value="gs.data.content.NewsItem"/>
        <property name="formView" value="admin/news/edit"/>
        <property name="successView" value="redirect:/admin/news/list.page"/>
    </bean>

    <bean name="/admin/news/create.page"
          class="gs.web.admin.news.EditNewsItemController"
          autowire="byName" lazy-init="true">
        <property name="commandName" value="newsItem"/>
        <property name="commandClass" value="gs.data.content.NewsItem"/>
        <property name="formView" value="admin/news/edit"/>
        <property name="successView" value="redirect:/admin/news/list.page"/>
    </bean>

    <bean name="/admin/database/tableMover.page" class="gs.web.admin.database.TableMoverController" lazy-init="true">
        <property name="formView" value="admin/database/tableMover"/>
        <property name="previewView" value="admin/database/tableMoverPreview"/>
        <property name="successView" value="admin/database/tableMoverComplete"/>
        <property name="errorView" value="admin/noProductionAccess"/>
        <property name="commandName" value="tableMoverCmd"/>
        <property name="commandClass" value="gs.web.admin.database.TableMoverCommand"/>
        <!--<property name="validators">-->
        <!--<list>-->
        <!--<ref local="emailValidator"/>-->
        <!--</list>-->
        <!--</property>-->
    </bean>

    <!--
        "v1" is here so that we can easily update to newer versions
        of this.
        "*" should be:
        <code>$STATE/pagename</code>
        where
        pagename matches something on the perl side.
    -->
    <bean name="contentBoxController"
          class="gs.web.content.ContentBoxViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>content/box</value>
        </property>
    </bean>

    <bean name="/ads/interstitial.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>/ads/interstitial</value>
        </property>
    </bean>

    <bean name="/ads/serveAds.page" autowire="byName" lazy-init="true"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName" value="ads/serveAds"/>
    </bean>

    <bean name="/ads/tacoda/728x90.page" autowire="byName" lazy-init="true"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName" value="ads/tacoda/728x90"/>
    </bean>

    <bean name="/ads/tacoda/160x600.page" autowire="byName" lazy-init="true"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName" value="ads/tacoda/160x600"/>
    </bean>

    <bean name="/ads/tacoda/300x250.page" autowire="byName" lazy-init="true"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName" value="ads/tacoda/300x250"/>
    </bean>

    <bean id="newsCheckBoxValidator" class="gs.web.community.newsletters.popup.NewsletterCheckBoxValidator"
          autowire="byName" lazy-init="true"/>

    <bean id="schoolIdValidator" class="gs.web.util.validator.SchoolIdValidator"
          autowire="byName" lazy-init="true"/>

    <bean id="stateValidator" class="gs.web.util.validator.StateValidator"
          autowire="byName" lazy-init="true"/>

    <!--newsletter popup-->
    <bean name="/community/newsletters/popup/newsletter.page"
          class="gs.web.community.newsletters.popup.NthGraderController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="newsCmd"/>
        <property name="commandClass" value="gs.web.community.newsletters.popup.NewsletterCommand"/>
        <property name="formView" value="/community/newsletters/popup/newsletters"/>
        <property name="successView" value="redirect:/community/newsletters/popup/mss/page3.page"/>
        <property name="validators">
            <list>
                <ref bean="emailValidator"/>
                <ref bean="newsCheckBoxValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/promo/LDTeenGuide.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/promo/ldTeenGuide"/>
    </bean>

    <bean name="/promo/surveyPromoHover.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/promo/surveyPromoHover"/>
    </bean>

    <!--My School stats newsletter popups-->
    <bean name="/community/newsletters/popup/mss/page1.page"
          class="gs.web.community.newsletters.popup.MssPaController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="newsCmd"/>
        <property name="commandClass" value="gs.web.community.newsletters.popup.NewsletterCommand"/>
        <property name="formView" value="/community/newsletters/popup/mss/page1"/>
        <property name="successView" value="redirect:/community/newsletters/popup/mss/page2.page"/>
        <property name="onLoadValidators">
            <list>
                <ref bean="stateValidator"/>
                <ref bean="schoolIdValidator"/>
            </list>
        </property>
        <property name="validators">
            <list>
                <ref bean="schoolIdValidator"/>
                <ref bean="emailValidator"/>
                <ref bean="newsCheckBoxValidator"/>
            </list>
        </property>
    </bean>
    <bean name="/community/newsletters/popup/mss/page2.page"
          class="gs.web.community.newsletters.popup.NthGraderController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="newsCmd"/>
        <property name="commandClass" value="gs.web.community.newsletters.popup.NewsletterCommand"/>
        <property name="formView" value="/community/newsletters/popup/mss/page2"/>
        <property name="successView" value="redirect:/community/newsletters/popup/mss/page3.page"/>
        <property name="onLoadValidators">
            <list>
                <ref bean="emailValidator"/>
                <ref bean="stateValidator"/>
                <ref bean="schoolIdValidator"/>
            </list>
        </property>
        <property name="validators">
            <list>
                <ref bean="emailValidator"/>
            </list>
        </property>
    </bean>
    <bean name="/community/newsletters/popup/mss/page3.page"
          class="gs.web.community.newsletters.popup.SubscriptionSummaryController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="newsCmd"/>
        <property name="commandClass" value="gs.web.community.newsletters.popup.NewsletterCommand"/>
        <property name="formView" value="/community/newsletters/popup/mss/page3"/>
        <property name="successView" value="/community/newsletters/popup/mss/page3"/>
        <property name="onLoadValidators">
            <list>
                <ref bean="emailValidator"/>
            </list>
        </property>
    </bean>
    <bean name="/community/newsletters/popup/mss/coreg.page"
          class="gs.web.community.newsletters.popup.SubscriptionSummaryController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="newsCmd"/>
        <property name="commandClass" value="gs.web.community.newsletters.popup.NewsletterCommand"/>
        <property name="formView" value="/community/newsletters/popup/mss/coreg"/>
        <property name="successView" value="/community/newsletters/popup/mss/coreg"/>
    </bean>
    <bean name="/community/newsletters/popup/community.page"
          class="gs.web.community.newsletters.popup.CommunitySubscriptionController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/newsletters/popup/community"/>
    </bean>
    <!--End Myschool stats newsletter popups -->

    <!-- Factory to be used by /community/registration.page -->
    <bean id="communityRegistrationTableFactory"
          class="gs.web.util.google.GoogleSpreadsheetDaoFactory" lazy-init="true">
        <property name="googleKey" value="pYwV1uQwaOCKLqeupJ7WqXA"/>
        <property name="visibility" value="public"/>
        <property name="projection" value="values"/>
        <property name="worksheetName" value="od6"/>
    </bean>

    <!--Begin Registration pages -->
    <bean name="/community/registration.page"
          class="gs.web.community.registration.RegistrationController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="userCmd"/>
        <property name="commandClass" value="gs.web.community.registration.UserCommand"/>
        <property name="formView" value="/community/registration/registration"/>
        <property name="successView" value="redirect:/community/registration2.page"/>
        <property name="errorView" value="/community/registration/registrationSoapError"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
        <property name="mailSender">
            <ref bean="mailSender"/>
        </property>
        <property name="requireEmailValidation" value="false"/>
        <property name="tableDao">
            <bean factory-bean="communityRegistrationTableFactory" factory-method="getTableDao"/>
        </property>
    </bean>

    <bean name="/community/registration2.page"
          class="gs.web.community.registration.RegistrationFollowUpController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="followUpCmd"/>
        <property name="commandClass" value="gs.web.community.registration.FollowUpCommand"/>
        <property name="formView" value="/community/registration/registration2"/>
        <property name="successView" value="redirect:/community/loginOrRegister.page"/>
        <property name="errorView" value="/community/registration/registrationSoapError"/>
    </bean>

    <bean name="/community/registrationSoapError.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName">
            <value>community/registration/registrationSoapError</value>
        </property>
    </bean>

    <bean name="/community/registration3.page"
          class="gs.web.community.registration.RegistrationNewsletterController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="newsletterCmd"/>
        <property name="commandClass" value="gs.web.community.registration.NewsletterCommand"/>
        <property name="formView" value="/community/registration/registration3"/>
        <property name="successView" value="redirect:/community/communityLanding.page"/>
    </bean>

    <bean name="/community/registrationAjax.page"
          class="gs.web.community.registration.RegistrationAjaxController"
          autowire="byName" lazy-init="true"/>

    <bean name="/community/registration2Ajax.page"
          class="gs.web.community.registration.Registration2AjaxController"
          autowire="byName" lazy-init="true"/>

    <bean name="/community/registrationConfirm.page"
          class="gs.web.community.registration.RegistrationConfirmController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/registration/registrationConfirm"/>
    </bean>

    <bean name="/community/registrationRemove.page"
          class="gs.web.community.registration.RegistrationRemoveController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/registration/registrationRemove"/>
    </bean>

    <bean name="/community/requestEmailValidation.page"
          class="gs.web.community.registration.RequestEmailValidationController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/registration/requestEmailValidation"/>
    </bean>

    <bean name="/community/forgotPassword.page"
          class="gs.web.community.registration.ForgotPasswordController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="userCmd"/>
        <property name="commandClass" value="gs.web.community.registration.ForgotPasswordCommand"/>
        <property name="formView" value="/community/registration/forgotPassword"/>
        <property name="successView" value="redirect:/community/loginOrRegister.page"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/community/resetPassword.page"
          class="gs.web.community.registration.ResetPasswordController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="passwordCmd"/>
        <property name="formView" value="/community/registration/resetPassword"/>
    </bean>

    <bean name="changeEmailController"
          class="gs.web.community.registration.ChangeEmailController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="emailCmd"/>
        <property name="formView" value="/community/registration/changeEmail"/>
        <property name="successView" value="redirect:/community/loginOrRegister.page"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/community/loginOrRegister.page"
          class="gs.web.community.registration.LoginController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="loginCmd"/>
        <property name="commandClass" value="gs.web.community.registration.LoginCommand"/>
        <property name="formView" value="/community/registration/loginOrRegister"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/community/registration/popup/loginOrRegisterHover.page"
          class="gs.web.community.registration.popup.LoginHoverController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="formView" value="/community/registration/popup/loginOrRegisterHover"/>
        <property name="commandName" value="loginCmd"/>
        <property name="commandClass" value="gs.web.community.registration.popup.LoginHoverCommand"/>
    </bean>

    <bean name="/community/registration/popup/registrationHover.page"
          class="gs.web.community.registration.popup.RegistrationHoverController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="userCmd"/>
        <property name="commandClass" value="gs.web.community.registration.popup.RegistrationHoverCommand"/>
        <property name="formView" value="/community/registration/popup/registrationHover"/>
        <property name="errorView" value="/community/registration/registrationSoapError"/>
        <property name="requireEmailValidation" value="false"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
        <property name="mailSender">
            <ref bean="mailSender"/>
        </property>
        <property name="tableDao">
            <bean factory-bean="communityRegistrationTableFactory" factory-method="getTableDao"/>
        </property>
    </bean>

    <bean name="/community/registration/popup/forgotPasswordHover.page"
          class="gs.web.community.registration.popup.ForgotPasswordHoverController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="forgotPasswordCmd"/>
        <property name="commandClass" value="gs.web.community.registration.ForgotPasswordCommand"/>
        <property name="formView" value="/community/registration/popup/forgotPasswordHover"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/community/registration/popup/sendToDestination.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/registration/popup/sendToDestination"/>
    </bean>
    <!--End Registration pages -->

    <bean name="/accountInformation.page"
          class="gs.web.community.registration.AccountInformationController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="command"/>
        <property name="commandClass" value="gs.web.community.registration.AccountInformationCommand"/>
        <property name="formView" value="/community/registration/accountInformation"/>
    </bean>

    <bean name="/accountInformationAjax.page"
          class="gs.web.community.registration.AccountInformationAjaxController"
          autowire="byName" lazy-init="true"/>

    <bean name="/community/getUserProfile.page"
          class="gs.web.community.registration.GetUserProfileController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/registration/getUserProfile"/>
    </bean>

    <bean name="/community/communityLanding.page"
          class="gs.web.community.registration.CommunityLandingController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/registration/communityLanding"/>
    </bean>

    <bean name="/community/localCommunity.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/community/local/localCommunity"/>
    </bean>

    <bean name="/community/deactivateUser.page"
          class="gs.web.community.DeactivateUserController"
          autowire="byName" lazy-init="true"/>

    <bean name="/community/login.page"
          class="gs.web.community.LoginController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="loginCmd"/>
        <property name="commandClass" value="gs.web.community.LoginCommand"/>
        <property name="formView" value="/community/login"/>
        <property name="validators">
            <list>
                <ref local="emailValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/community/redirect.page"
          class="gs.web.community.CommunityRedirectController"
          autowire="byName" lazy-init="true"/>

    <bean name="/redirect.page"
          class="gs.web.util.RedirectController"
          autowire="byName" lazy-init="true"/>

    <bean name="/school/rating.page"
          class="gs.web.test.rating.RatingsController"
          autowire="byName" lazy-init="true">
        <property name="commandName" value="ratingsCmd"/>
        <property name="commandClass" value="gs.web.test.rating.RatingsCommand"/>
        <property name="viewName" value="test/ratings"/>
        <property name="onLoadValidators">
            <list>
                <ref bean="stateValidator"/>
                <ref bean="schoolIdValidator"/>
            </list>
        </property>
    </bean>

    <bean name="/school/rating2.page"
          class="gs.web.test.rating.RatingsController"
          autowire="byName" lazy-init="true">
        <property name="showingSubjectGroups" value="true"/>
        <property name="commandName" value="ratingsCmd"/>
        <property name="commandClass" value="gs.web.test.rating.RatingsCommand"/>
        <property name="viewName" value="test/ratings"/>
        <property name="onLoadValidators">
            <list>
                <ref bean="stateValidator"/>
                <ref bean="schoolIdValidator"/>
            </list>
        </property>
    </bean>

    <bean id="testScoreLandingPageTableFactory"
          class="gs.web.util.google.GoogleSpreadsheetDaoFactory" lazy-init="true">
        <property name="googleKey" value="pYwV1uQwaOCJGhxtFDPHjTg"/>
        <property name="visibility" value="public"/>
        <property name="projection" value="values"/>
        <property name="worksheetName" value="od7"/>
    </bean>

    <bean name="/test/landing.page"
          class="gs.web.test.TestLandingController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="testLandingCommand"/>
        <property name="commandClass" value="gs.web.test.TestLandingCommand"/>
        <property name="formView" value="/test/landing"/>
        <property name="tableDao">
            <bean factory-bean="testScoreLandingPageTableFactory" factory-method="getTableDao"/>
        </property>
    </bean>

    <bean name="/school/parentReviews/submit.page"
          class="gs.web.school.review.SubmitParentFeedbackController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="submitParentFeedbackCommand"/>
        <property name="commandClass" value="gs.web.school.review.SubmitParentFeedbackCommand"/>
        <property name="formView" value="/school/parentReviews/submitParentFeedback"/>
        <property name="levelCodes" value="p"/>
        <property name="title" value="Submit a Parent Survey for Your Preschool"/>
        <property name="omniturePageName" value="Rating Review Submit Page"/>
        <property name="omnitureHierarchy" value="School,Parent Reviews,Rating Review Submit Page"/>
    </bean>

    <bean name="/test/schoolsInCity.page"
          class="gs.web.test.SchoolsInCityAjaxController"
          autowire="byName" lazy-init="true"/>

    <bean name="/test/schoolLevelsInCity.page"
          class="gs.web.test.SchoolLevelsInCityAjaxController"
          autowire="byName" lazy-init="true"/>

    <bean name="/test/firstTestScoreLanding.page"
          class="gs.web.test.FirstTestScoreLandingController"
          autowire="byName"
          lazy-init="true">
        <property name="tableDao">
            <bean factory-bean="testScoreLandingPageTableFactory" factory-method="getTableDao"/>
        </property>
    </bean>

    <bean name="/school/error.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>school/error</value>
        </property>
    </bean>

    <bean name="/school/overview.page"
          class="gs.web.school.SchoolOverviewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>school/overview2</value>
        </property>
    </bean>

    <bean name="parentReviews"
          class="gs.web.school.review.ParentReviewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>school/parentReviews</value>
        </property>
    </bean>

    <!-- This bean is for the add comments hover, but posts happen to jsonAddParentReviews bean -->
    <bean name="addParentReviews"
          class="gs.web.school.SchoolInModelController"
          autowire="byName" lazy-init="true">
        <property name="viewName" value="/school/parentReviews/addCommentsHover"/>
    </bean>

    <bean name="addParentReviewsTarget" abstract="true"
          class="gs.web.school.review.AddParentReviewsController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="parentReviewCommand"/>
        <property name="commandClass" value="gs.web.school.review.ReviewCommand"/>
        <property name="formView" value="/school/parentReviews/addComments"/>
        <property name="successView" value="redirect:/school/parentReviews/updatedParentRatingsThanks.page"/>
        <property name="validators">
            <list>
                <ref bean="emailValidator"/>
                <ref bean="addParentReviewsValidator"/>
            </list>
        </property>
    </bean>

    <bean id="ajaxAddParentReviews" parent="addParentReviewsTarget" lazy-init="true">
        <property name="jsonPage" value="true"/>
    </bean>

    <bean id="restAddParentReviews" parent="addParentReviewsTarget" lazy-init="true">
        <property name="xmlPage" value="true"/>
    </bean>

    <bean name="addParentReviewsValidator"
          class="gs.web.school.review.AddParentReviewsValidator"
          autowire="byName"
          lazy-init="true"/>

    <bean name="updateRatings"
          class="gs.web.school.review.UpdateRatingsController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="parentReviewCommand"/>
        <property name="commandClass" value="gs.web.school.review.ReviewCommand"/>
        <property name="formView" value="/school/parentReviews/updateRatingsHover"/>
        <property name="successView" value="/school/parentReviews/thankYouHover"/>
    </bean>

    <bean name="/school/thankYouHover.page"
          class="gs.web.school.review.ThankYouController"
          autowire="byName"
          lazy-init="true">
        <property name="viewName" value="/school/parentReviews/thankYouHover"/>
    </bean>

    <bean name="/school/mapSchool.page"
          class="gs.web.school.MapSchoolController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>school/mapSchool</value>
        </property>
    </bean>

    <bean name="/school/mapSchoolAndHomes.page"
          class="gs.web.school.MapSchoolController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>school/mapSchoolAndHomes</value>
        </property>
    </bean>

    <bean name="/community/mailToFriend.page"
          autowire="byName"
          class="gs.web.community.MailToFriendControllerWithReCaptcha" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="formView" value="community/mailToFriend"/>
        <property name="successView" value="community/mailToFriendConfirmation"/>
        <property name="commandName" value="mailToFriendCmd"/>
        <property name="commandClass" value="gs.web.community.MailToFriendCommand"/>
        <property name="mailSender" ref="mailSender"/>
    </bean>

    <bean name="/table/clear.page"
          autowire="byName"
          class="gs.web.util.ClearTableDaoCacheController" lazy-init="true">
    </bean>
    <bean name="pieController"
          autowire="byName"
          class="gs.web.chart.PieController"
          lazy-init="true"/>

    <bean name="isValidEmailController"
          class="gs.web.util.IsValidEmailController"
          autowire="byName" lazy-init="true"/>

    <bean name="gradeToLevelCodeController"
          class="gs.web.util.GradeToLevelCodeController"
          autowire="byName" lazy-init="true"/>

    <bean name="articleCacheController"
          class="gs.web.util.ArticleCacheController"
          autowire="byName" lazy-init="true"/>

    <bean name="getVariantConfigurationController"
          class="gs.web.util.GetVariantConfigurationController"
          autowire="byName" lazy-init="true"/>

    <bean name="getSurveyHoverInterceptConfigurationController"
          class="gs.web.promo.GetSurveyHoverInterceptConfigurationController"
          autowire="byName" lazy-init="true"/>

    <bean name="surveyController"
          class="gs.web.survey.SurveyController" autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="userResponseCommand"/>
        <property name="commandClass" value="gs.web.survey.UserResponseCommand"/>
        <property name="formView" value="survey/form"/>
        <property name="validators">
            <list>
                <ref bean="emailValidator"/>
            </list>
        </property>
    </bean>

    <bean name="surveyResultsController"
          class="gs.web.survey.SurveyResultsController" autowire="byName" lazy-init="true">
    </bean>

    <bean name="surveySchoolLevelController"
          class="gs.web.survey.SchoolLevelController" autowire="byName" lazy-init="true">
        <!--<property name="bindOnNewForm" value="true"/>-->
        <property name="commandName" value="schoolLevelCommand"/>
        <property name="commandClass" value="gs.web.survey.SchoolLevelCommand"/>
        <property name="formView" value="survey/selectLevel"/>
        <property name="successView" value="redirect:/survey/form.page"/>
    </bean>

    <bean name="resultsSchoolLevelController"
          class="gs.web.survey.SchoolLevelController" autowire="byName" lazy-init="true">
        <property name="commandName" value="schoolLevelCommand"/>
        <property name="commandClass" value="gs.web.survey.SchoolLevelCommand"/>
        <property name="formView" value="survey/selectLevel"/>
        <property name="successView" value="redirect:/survey/results.page"/>
    </bean>

    <bean name="/school/ajaxFindSchoolAndCity.page"
          class="gs.web.school.FindSchoolController" autowire="byName" lazy-init="true"/>

    <bean name="/mySchoolList.page"
          class="gs.web.community.MySchoolListController" autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>community/mySchoolList</value>
        </property>
    </bean>

    <bean name="/mySchoolListLogin.page"
          class="gs.web.community.MySchoolListLoginController" autowire="byName" lazy-init="true">
        <property name="commandName" value="loginCmd"/>
        <property name="commandClass" value="gs.web.community.LoginCommand"/>
        <property name="formView" value="/community/mySchoolListLogin"/>
        <property name="successView" value="redirect:/mySchoolList.page"/>
    </bean>

    <bean name="/community/logout.page"
          class="gs.web.community.LogoutController" autowire="byName" lazy-init="true">
    </bean>

    <bean name="/community/mssRedirect.page"
          class="gs.web.community.MssLocalRedirectController" autowire="byName" lazy-init="true">
        <property name="pageMap">
            <map>
                <entry key="1"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/How-does-public-school-enrollment-work-in-%CITY%"/>
                <entry key="2"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/How-did-you-choose-a-preschool-in-%CITY%"/>
                <entry key="3"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/How-do-public-and-private-schools-compare-in-%CITY%"/>
                <entry key="4"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/What-preschool-do-you-think-is-great-in-%CITY%"/>
                <entry key="5"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/Whats-a-great-elementary-school-in-%CITY%"/>
                <entry key="6"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/Share-your-experiences-about-a-great-middle-school-in-%CITY%"/>
                <entry key="7"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/Talk-about-your-experiences-as-parent-of-a-high-schooler-in-%CITY%"/>
                <entry key="8"
                       value="http://community.greatschools.net/q-and-a/location/%STATE%/%CITY%/What-school-districts-have-the-best-reputation-in-or-around-%CITY%"/>
            </map>
        </property>
    </bean>

    <!-- XML feed related web services -->
    <bean name="/util/feed/city.page" class="gs.web.util.feed.CityFeedController" autowire="byName" lazy-init="true"/>

    <bean name="/content/btsQuiz.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>content/btsQuiz</value>
        </property>
    </bean>

    <!-- schwab learning redirects -->
    <bean name="/content/schwabArticle.page"
          class="gs.web.content.SchwabArticleRedirectController"
          autowire="byName" lazy-init="true"/>

    <bean name="/community/schwabForumArchive.page"
          class="gs.web.community.SchwabForumRedirectController"
          autowire="byName" lazy-init="true"/>

    <bean name="/about/feedback/submitPreschool.page"
          class="gs.web.about.feedback.SubmitSchoolController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="submitSchoolCommand"/>
        <property name="commandClass" value="gs.web.about.feedback.SubmitPreschoolCommand"/>
        <property name="formView" value="/about/feedback/submitSchool"/>
        <property name="successView" value="/about/feedback/submitSchoolConfirm"/>
        <property name="fromEmail" value="preschools@greatschools.net"/>
        <property name="type" value="preschool"/>
    </bean>

    <bean name="/about/feedback/submitPrivateSchool.page"
          class="gs.web.about.feedback.SubmitSchoolController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true"/>
        <property name="commandName" value="submitSchoolCommand"/>
        <property name="commandClass" value="gs.web.about.feedback.SubmitPrivateSchoolCommand"/>
        <property name="formView" value="/about/feedback/submitSchool"/>
        <property name="successView" value="/about/feedback/submitSchoolConfirm"/>
        <property name="fromEmail" value="pvtschools@greatschools.net"/>
        <property name="type" value="private school"/>
    </bean>

    <!-- directory structure url beans - start -->
    <!-- see also directoryStructureUrlHandlerMapping -->

    <bean name="directoryStructureUrlNoSchoolTypesController"
          class="gs.web.path.DirectoryStructureUrlNoSchoolsLabelController"
          autowire="byName" lazy-init="true"/>

    <bean id="directoryStructureUrlControllerFactory"
          class="gs.web.path.DirectoryStructureUrlControllerFactory"
          autowire="byType" scope="request" lazy-init="true">
        <property name="controllers">
            <list>
                <ref bean="directoryStructureUrlNoSchoolTypesController"/>
                <ref bean="/schools.page"/>
                <ref bean="/school/overview.page"/>
            </list>
        </property>
        <aop:scoped-proxy proxy-target-class="false"/>
    </bean>

    <bean name="/directoryStructureUrlRequest.page"
          class="gs.web.path.DirectoryStructureUrlRequestController"
          autowire="byName" lazy-init="true" scope="request">
        <property name="controller">
            <bean factory-bean="directoryStructureUrlControllerFactory" factory-method="getController"/>
        </property>
        <aop:scoped-proxy proxy-target-class="false"/>
    </bean>

    <!-- directory structure url beans - end -->

    <!-- WEB PAGE DEFINITIONS END -->

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" lazy-init="true">
        <property name="viewClass">
            <value>org.springframework.web.servlet.view.JstlView</value>
        </property>
        <property name="prefix">
            <value>/WEB-INF/page/</value>
        </property>
        <property name="suffix">
            <value>.jspx</value>
        </property>
    </bean>
    <!-- -->
    <!--    <bean id="customEditorConfigurer"-->
    <!--        class="org.springframework.beans.factory.config.CustomEditorConfigurer">-->
    <!--        <property name="customEditors">-->
    <!--            <map>-->
    <!--                <entry key="java.util.Date">-->
    <!--                    <bean class="gs.web.MyCustomDateEditor"></bean>-->
    <!--                </entry>-->
    <!--            </map>-->
    <!--        </property>-->
    <!--    </bean>-->
    <bean name="/status/error500.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>status/error500</value>
        </property>
    </bean>

    <bean name="/status/error404.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>status/error404</value>
        </property>
    </bean>

    <bean name="/content/modulePlacer.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName" lazy-init="true">
        <property name="viewName">
            <value>content/modulePlacer</value>
        </property>
    </bean>

    <bean name="/promo/schoolChoicePackPromo.page"
          class="gs.web.promo.SchoolChoicePackPromoController"
          autowire="byName" lazy-init="true"/>

    <bean name="/api/registration.page"
          class="gs.web.api.RegistrationController"
          autowire="byName" lazy-init="true">
        <property name="bindOnNewForm" value="true" />
        <property name="commandClass" value="gs.data.api.ApiAccount" />
        <property name="formView" value="api/registration" />
        <property name="successView" value="api/success" />
    </bean>

    <!--
    <bean name="/api/registrationSuccess.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController" lazy-init="true">
        <property name="viewName" value="api/registrationSuccess"/>
    </bean>

    <bean name="/api/admin/accounts.page"
          class="gs.web.api.admin.AccountsController" lazy-init="true">
    </bean>

    <bean name="/api/admin/account.page"
          class="gs.web.api.admin.AccountController"
          lazy-init="true">
        <property name="bindOnNewForm" value="true" />
        <property name="commandClass" value="gs.data.api.ApiAccount" />
        <property name="formView" value="api/admin/account" />
        <property name="successView" value="api/success" />
    </bean>
    -->
</beans>
