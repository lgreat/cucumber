<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!--
  - Application context definition for "springapp" DispatcherServlet.
  -->

<beans>
    <bean name="defaultHandlerMapping"
          class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping">
        <property name="interceptors">
            <list>
                <ref local="responseInterceptor"/>
                <ref local="sessionContextInterceptor"/>
                <!--                <ref local="insiderOnlyInterceptor"/>-->
            </list>
        </property>
    </bean>

    <!--bean name="lecacyHandlerMapping"
        class="gs.web.util.LegacyHandlerMapping">
        </bean-->
    <bean id="responseInterceptor"
            class="gs.web.ResponseInterceptor"
            autowire="byName" />

    <bean id="sessionContextInterceptor"
          class="gs.web.SessionContextInterceptor"
          autowire="byName">
    </bean>

    <!--    <bean id="insiderOnlyInterceptor"-->
    <!--        class="gs.web.community.InsiderOnlyInterceptor"-->
    <!--        autowire="byName">-->
    <!--    </bean>-->

    <!-- WEB PAGE DEFINITIONS BEGIN -->

    <!-- Insider begin -->
    <bean name="/subscribe.page"
          class="gs.web.community.SubscribeController"
          autowire="byName">
        <property name="commandName">
            <value>subCmd</value>
        </property>
        <property name="bindOnNewForm">
            <value>true</value>
        </property>
        <property name="sessionForm">
            <value>true</value>
        </property>
        <property name="formView">
            <value>community/subscribe</value>
        </property>
        <property name="successView">
            <value>redirected to /thankyou.page to prevent multiple submits</value>
        </property>
        <property name="validator">
            <ref bean="subscribeValidator"/>
        </property>
    </bean>

    <bean id="subscribeValidator" class="gs.web.community.SubscribeValidator"></bean>

    <bean name="/thankyou.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/thankyou</value>
        </property>
    </bean>

    <bean name="/insider.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/insider</value>
        </property>
    </bean>

    <bean name="/fiveSteps.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>promo/insiderFiveSteps</value>
        </property>
    </bean>
    <!-- Insider end -->

    <!-- Search begin -->
    <bean name="/search/search.page" class="gs.web.search.SearchController"
          autowire="byName">
        <property name="sessionForm">
            <value>false</value>
        </property>
        <property name="commandName">
            <value>searchCommand</value>
        </property>
        <property name="commandClass">
            <value>gs.data.search.SearchCommand</value>
        </property>
        <property name="spellCheckSearcher">
            <ref bean="spellCheckSearcher"/>
        </property>
        <property name="searcher">
            <ref bean="searcher"/>
        </property>
    </bean>

    <bean name="resultsPager" class="gs.web.search.ResultsPager"
          autowire="byName"/>

    <!-- These beans control access to searchmanager.page -->
    <bean id="loginValidator" class="gs.web.status.LoginValidator"/>
    <bean name="/status/login.page"
          class="gs.web.status.LoginController" autowire="byName">
        <property name="sessionForm">
            <value>true</value>
        </property>
        <property name="commandName">
            <value>identity</value>
        </property>
        <property name="commandClass">
            <value>gs.web.status.Identity</value>
        </property>
        <property name="validator">
            <ref bean="loginValidator"/>
        </property>
        <property name="formView">
            <value>status/login</value>
        </property>
        <property name="successView">
            <value>/status/searchmanager.page</value>
        </property>
    </bean>

    <!-- This page allows the search indexes to be rebuilt. -->
    <bean name="/status/searchmanager.page"
          class="gs.web.status.SearchManagerController" autowire="byName">
    </bean>

    <bean id="versionProperties"
          class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="location">
            <value>classpath:version.properties</value>
        </property>
    </bean>
    <!-- Search end -->

    <!-- Status begin -->
    <!-- Status monitor to verify that database access is working and build version -->
    <bean name="/status/monitor.page"
          class="gs.web.status.MonitorController" autowire="byName">
        <property name="viewName">
            <value>status/monitor</value>
        </property>
    </bean>
    <!-- Status end -->

    <bean name="/content/allArticles.page"
          class="gs.web.content.AllArticlesController"
          autowire="byName">
        <property name="viewName">
            <value>content/allArticles</value>
        </property>
    </bean>

    <bean name="/about/aboutUs.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName">
        <property name="viewName">
            <value>about/aboutUs</value>
        </property>
    </bean>

     <bean name="/about/donate.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName">
        <property name="viewName">
            <value>about/donate</value>
        </property>
    </bean>

     <bean name="/about/donationBridge.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName">
        <property name="viewName">
            <value>about/donationBridge</value>
        </property>
    </bean>


    <bean name="/bill/jackson.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          autowire="byName">
        <property name="viewName">
            <value>about/aboutUs</value>
        </property>
    </bean>

    <bean name="/sorry.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>fatalError</value>
        </property>
    </bean>

    <bean name="/compareSchools.page" class="gs.web.school.CompareSchoolsController"
          autowire="byName">
    </bean>

    <bean name="/test/*"
          class="gs.web.util.TestViewController">
    </bean>

    <!--Begin conversion pages -->
    <bean name="/community/conversion/conversion.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/conversion</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/schoolChoiceOptions.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/popup/schoolChoiceOptions</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/topRatedSchools.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/popup/topRatedSchools</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/ratings.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/popup/ratings</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/parentReviews.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/popup/parentReviews</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/flagAlerts.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/popup/flagAlerts</value>
        </property>
    </bean>

    <bean name="/community/conversion/popup/compareSchools.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>community/conversion/popup/compareSchools</value>
        </property>
    </bean>
    <!-- End Conversion pages -->

    <bean name="/path/choose.page"
          class="gs.web.path.ChoosingPathwayController"
          autowire="byName">
    </bean>

    <bean name="/path/mySchool.page"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName">
            <value>path/mySchool</value>
        </property>
    </bean>

    <bean name="/content/schoolChoiceCenter.page"
          class="gs.web.content.PremiumArticlesController"
          autowire="byName">
        <property name="viewName">
            <value>/content/schoolChoiceCenter</value>
        </property>
    </bean>

    <bean name="/stateLauncher.page"
          class="gs.web.state.StatePathwayController"
          autowire="byName">
        <property name="viewName">
            <value>stateLauncher</value>
        </property>
        <property name="pathways">
            <ref bean="pathwaysMap"/>
        </property>
    </bean>

    <!-- WEB PAGE DEFINITIONS END -->

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass">
            <value>org.springframework.web.servlet.view.JstlView</value>
        </property>
        <property name="prefix">
            <value>/WEB-INF/page/</value>
        </property>
        <property name="suffix">
            <value>.jspx</value>
        </property>
    </bean>
    <!-- -->
    <!--    <bean id="customEditorConfigurer"-->
    <!--        class="org.springframework.beans.factory.config.CustomEditorConfigurer">-->
    <!--        <property name="customEditors">-->
    <!--            <map>-->
    <!--                <entry key="java.util.Date">-->
    <!--                    <bean class="gs.web.MyCustomDateEditor"></bean>-->
    <!--                </entry>-->
    <!--            </map>-->
    <!--        </property>-->
    <!--    </bean>-->
</beans>